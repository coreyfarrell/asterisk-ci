<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - Asterisk GIT-16-9767e98486 - main/channel_internal_api.c</title>
  <link rel="stylesheet" type="text/css" href="../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../index.html">top level</a> - <a href="index.html">main</a> - channel_internal_api.c<span style="font-size: 80%;"> (source / <a href="channel_internal_api.c.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">Asterisk GIT-16-9767e98486</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">646</td>
            <td class="headerCovTableEntry">728</td>
            <td class="headerCovTableEntryMed">88.7 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2018-07-22 22:16:30</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">224</td>
            <td class="headerCovTableEntry">270</td>
            <td class="headerCovTableEntryMed">83.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Legend:</td>
            <td class="headerValueLeg">            Lines:
            <span class="coverLegendCov">hit</span>
            <span class="coverLegendNoCov">not hit</span>
</td>
            <td></td>
          </tr>
          <tr><td><img src="../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : /*</a>
<span class="lineNum">       2 </span>            :  * Asterisk -- An open source telephony toolkit.
<span class="lineNum">       3 </span>            :  *
<span class="lineNum">       4 </span>            :  * Copyright (C) 2012, Digium, Inc.
<span class="lineNum">       5 </span>            :  *
<span class="lineNum">       6 </span>            :  * Mark Spencer &lt;markster@digium.com&gt;
<span class="lineNum">       7 </span>            :  *
<span class="lineNum">       8 </span>            :  * See http://www.asterisk.org for more information about
<span class="lineNum">       9 </span>            :  * the Asterisk project. Please do not directly contact
<span class="lineNum">      10 </span>            :  * any of the maintainers of this project for assistance;
<span class="lineNum">      11 </span>            :  * the project provides a web site, mailing lists and IRC
<span class="lineNum">      12 </span>            :  * channels for your use.
<span class="lineNum">      13 </span>            :  *
<span class="lineNum">      14 </span>            :  * This program is free software, distributed under the terms of
<span class="lineNum">      15 </span>            :  * the GNU General Public License Version 2. See the LICENSE file
<span class="lineNum">      16 </span>            :  * at the top of the source tree.
<span class="lineNum">      17 </span>            :  */
<span class="lineNum">      18 </span>            : 
<span class="lineNum">      19 </span>            : /*! \file
<span class="lineNum">      20 </span>            :  *
<span class="lineNum">      21 </span>            :  * \brief Channel Accessor API
<span class="lineNum">      22 </span>            :  *
<span class="lineNum">      23 </span>            :  * This file is intended to be the only file that ever accesses the
<span class="lineNum">      24 </span>            :  * internals of an ast_channel. All other files should use the
<span class="lineNum">      25 </span>            :  * accessor functions defined here.
<span class="lineNum">      26 </span>            :  *
<span class="lineNum">      27 </span>            :  * \author Terry Wilson
<span class="lineNum">      28 </span>            :  */
<span class="lineNum">      29 </span>            : 
<span class="lineNum">      30 </span>            : /*** MODULEINFO
<span class="lineNum">      31 </span>            :         &lt;support_level&gt;core&lt;/support_level&gt;
<span class="lineNum">      32 </span>            :  ***/
<span class="lineNum">      33 </span>            : 
<span class="lineNum">      34 </span>            : #include &quot;asterisk.h&quot;
<span class="lineNum">      35 </span>            : 
<span class="lineNum">      36 </span>            : #include &lt;unistd.h&gt;
<span class="lineNum">      37 </span>            : #include &lt;fcntl.h&gt;
<span class="lineNum">      38 </span>            : 
<span class="lineNum">      39 </span>            : #include &quot;asterisk/alertpipe.h&quot;
<span class="lineNum">      40 </span>            : #include &quot;asterisk/paths.h&quot;
<span class="lineNum">      41 </span>            : #include &quot;asterisk/channel.h&quot;
<span class="lineNum">      42 </span>            : #include &quot;asterisk/channel_internal.h&quot;
<span class="lineNum">      43 </span>            : #include &quot;asterisk/endpoints.h&quot;
<span class="lineNum">      44 </span>            : #include &quot;asterisk/indications.h&quot;
<span class="lineNum">      45 </span>            : #include &quot;asterisk/stasis_cache_pattern.h&quot;
<span class="lineNum">      46 </span>            : #include &quot;asterisk/stasis_channels.h&quot;
<span class="lineNum">      47 </span>            : #include &quot;asterisk/stasis_endpoints.h&quot;
<span class="lineNum">      48 </span>            : #include &quot;asterisk/stringfields.h&quot;
<span class="lineNum">      49 </span>            : #include &quot;asterisk/stream.h&quot;
<span class="lineNum">      50 </span>            : #include &quot;asterisk/test.h&quot;
<span class="lineNum">      51 </span>            : #include &quot;asterisk/vector.h&quot;
<span class="lineNum">      52 </span>            : 
<span class="lineNum">      53 </span>            : /*!
<span class="lineNum">      54 </span>            :  * \brief Channel UniqueId structure
<span class="lineNum">      55 </span>            :  * \note channel creation time used for determining LinkedId Propagation
<span class="lineNum">      56 </span>            :  */
<span class="lineNum">      57 </span>            : struct ast_channel_id {
<span class="lineNum">      58 </span>            :         time_t creation_time;                           /*!&lt; Creation time */
<span class="lineNum">      59 </span>            :         int creation_unique;                            /*!&lt; sub-second unique value */
<span class="lineNum">      60 </span>            :         char unique_id[AST_MAX_UNIQUEID];       /*!&lt; Unique Identifier */
<span class="lineNum">      61 </span>            : };
<span class="lineNum">      62 </span>            : 
<span class="lineNum">      63 </span>            : /*!
<span class="lineNum">      64 </span>            :  * \brief Main Channel structure associated with a channel.
<span class="lineNum">      65 </span>            :  *
<span class="lineNum">      66 </span>            :  * \note When adding fields to this structure, it is important to add the field
<span class="lineNum">      67 </span>            :  *       'in position' with like-aligned fields, so as to keep the compiler from
<span class="lineNum">      68 </span>            :  *       having to add padding to align fields. The structure's fields are sorted
<span class="lineNum">      69 </span>            :  *       in this order: pointers, structures, long, int/enum, short, char. This
<span class="lineNum">      70 </span>            :  *       is especially important on 64-bit architectures, where mixing 4-byte
<span class="lineNum">      71 </span>            :  *       and 8-byte fields causes 4 bytes of padding to be added before many
<span class="lineNum">      72 </span>            :  *       8-byte fields.
<span class="lineNum">      73 </span>            :  */
<span class="lineNum">      74 </span>            : struct ast_channel {
<span class="lineNum">      75 </span>            :         const struct ast_channel_tech *tech;            /*!&lt; Technology (point to channel driver) */
<span class="lineNum">      76 </span>            :         void *tech_pvt;                                 /*!&lt; Private data used by the technology driver */
<span class="lineNum">      77 </span>            :         void *music_state;                              /*!&lt; Music State*/
<span class="lineNum">      78 </span>            :         void *generatordata;                            /*!&lt; Current generator data if there is any */
<span class="lineNum">      79 </span>            :         struct ast_generator *generator;                /*!&lt; Current active data generator */
<span class="lineNum">      80 </span>            :         struct ast_channel *masq;                       /*!&lt; Channel that will masquerade as us */
<span class="lineNum">      81 </span>            :         struct ast_channel *masqr;                      /*!&lt; Who we are masquerading as */
<span class="lineNum">      82 </span>            :         const char *blockproc;                          /*!&lt; Procedure causing blocking */
<span class="lineNum">      83 </span>            :         const char *appl;                               /*!&lt; Current application */
<span class="lineNum">      84 </span>            :         const char *data;                               /*!&lt; Data passed to current application */
<span class="lineNum">      85 </span>            :         struct ast_sched_context *sched;                /*!&lt; Schedule context */
<span class="lineNum">      86 </span>            :         struct ast_filestream *stream;                  /*!&lt; Stream itself. */
<span class="lineNum">      87 </span>            :         struct ast_filestream *vstream;                 /*!&lt; Video Stream itself. */
<span class="lineNum">      88 </span>            :         ast_timing_func_t timingfunc;
<span class="lineNum">      89 </span>            :         void *timingdata;
<span class="lineNum">      90 </span>            :         struct ast_pbx *pbx;                            /*!&lt; PBX private structure for this channel */
<span class="lineNum">      91 </span>            :         struct ast_trans_pvt *writetrans;               /*!&lt; Write translation path */
<span class="lineNum">      92 </span>            :         struct ast_trans_pvt *readtrans;                /*!&lt; Read translation path */
<span class="lineNum">      93 </span>            :         struct ast_audiohook_list *audiohooks;
<span class="lineNum">      94 </span>            :         struct ast_framehook_list *framehooks;
<span class="lineNum">      95 </span>            :         struct ast_cdr *cdr;                            /*!&lt; Call Detail Record */
<span class="lineNum">      96 </span>            :         struct ast_tone_zone *zone;                     /*!&lt; Tone zone as set in indications.conf or
<span class="lineNum">      97 </span>            :                                                          *   in the CHANNEL dialplan function */
<span class="lineNum">      98 </span>            :         struct ast_channel_monitor *monitor;            /*!&lt; Channel monitoring */
<span class="lineNum">      99 </span>            :         ast_callid callid;                      /*!&lt; Bound call identifier pointer */
<span class="lineNum">     100 </span>            :         struct ao2_container *dialed_causes;            /*!&lt; Contains tech-specific and Asterisk cause data from dialed channels */
<span class="lineNum">     101 </span>            : 
<span class="lineNum">     102 </span>            :         AST_DECLARE_STRING_FIELDS(
<span class="lineNum">     103 </span>            :                 AST_STRING_FIELD(name);         /*!&lt; ASCII unique channel name */
<span class="lineNum">     104 </span>            :                 AST_STRING_FIELD(language);     /*!&lt; Language requested for voice prompts */
<span class="lineNum">     105 </span>            :                 AST_STRING_FIELD(musicclass);   /*!&lt; Default music class */
<span class="lineNum">     106 </span>            :                 AST_STRING_FIELD(latest_musicclass);   /*!&lt; Latest active music class */
<span class="lineNum">     107 </span>            :                 AST_STRING_FIELD(accountcode);  /*!&lt; Account code for billing */
<span class="lineNum">     108 </span>            :                 AST_STRING_FIELD(peeraccount);  /*!&lt; Peer account code for billing */
<span class="lineNum">     109 </span>            :                 AST_STRING_FIELD(userfield);    /*!&lt; Userfield for CEL billing */
<span class="lineNum">     110 </span>            :                 AST_STRING_FIELD(call_forward); /*!&lt; Where to forward to if asked to dial on this interface */
<span class="lineNum">     111 </span>            :                 AST_STRING_FIELD(parkinglot);   /*! Default parking lot, if empty, default parking lot  */
<span class="lineNum">     112 </span>            :                 AST_STRING_FIELD(hangupsource); /*! Who is responsible for hanging up this channel */
<span class="lineNum">     113 </span>            :                 AST_STRING_FIELD(dialcontext);  /*!&lt; Dial: Extension context that we were called from */
<span class="lineNum">     114 </span>            :         );
<span class="lineNum">     115 </span>            : 
<span class="lineNum">     116 </span>            :         struct ast_channel_id uniqueid;         /*!&lt; Unique Channel Identifier - can be specified on creation */
<span class="lineNum">     117 </span>            :         struct ast_channel_id linkedid;         /*!&lt; Linked Channel Identifier - oldest propagated when bridged */
<span class="lineNum">     118 </span>            : 
<span class="lineNum">     119 </span>            :         struct timeval whentohangup; /*!&lt; Non-zero, set to actual time when channel is to be hung up */
<span class="lineNum">     120 </span>            :         pthread_t blocker;           /*!&lt; If anyone is blocking, this is them */
<span class="lineNum">     121 </span>            : 
<span class="lineNum">     122 </span>            :         /*!
<span class="lineNum">     123 </span>            :          * \brief Dialed/Called information.
<span class="lineNum">     124 </span>            :          * \note Set on incoming channels to indicate the originally dialed party.
<span class="lineNum">     125 </span>            :          * \note Dialed Number Identifier (DNID)
<span class="lineNum">     126 </span>            :          */
<span class="lineNum">     127 </span>            :         struct ast_party_dialed dialed;
<span class="lineNum">     128 </span>            : 
<span class="lineNum">     129 </span>            :         /*!
<span class="lineNum">     130 </span>            :          * \brief Channel Caller ID information.
<span class="lineNum">     131 </span>            :          * \note The caller id information is the caller id of this
<span class="lineNum">     132 </span>            :          * channel when it is used to initiate a call.
<span class="lineNum">     133 </span>            :          */
<span class="lineNum">     134 </span>            :         struct ast_party_caller caller;
<span class="lineNum">     135 </span>            : 
<span class="lineNum">     136 </span>            :         /*!
<span class="lineNum">     137 </span>            :          * \brief Channel Connected Line ID information.
<span class="lineNum">     138 </span>            :          * \note The connected line information identifies the channel
<span class="lineNum">     139 </span>            :          * connected/bridged to this channel.
<span class="lineNum">     140 </span>            :          */
<span class="lineNum">     141 </span>            :         struct ast_party_connected_line connected;
<span class="lineNum">     142 </span>            : 
<span class="lineNum">     143 </span>            :         /*!
<span class="lineNum">     144 </span>            :          * \brief Channel Connected Line ID information that was last indicated.
<span class="lineNum">     145 </span>            :          */
<span class="lineNum">     146 </span>            :         struct ast_party_connected_line connected_indicated;
<span class="lineNum">     147 </span>            : 
<span class="lineNum">     148 </span>            :         /*! \brief Redirecting/Diversion information */
<span class="lineNum">     149 </span>            :         struct ast_party_redirecting redirecting;
<span class="lineNum">     150 </span>            : 
<span class="lineNum">     151 </span>            :         struct ast_frame dtmff;                         /*!&lt; DTMF frame */
<span class="lineNum">     152 </span>            :         struct varshead varshead;                       /*!&lt; A linked list for channel variables. See \ref AstChanVar */
<span class="lineNum">     153 </span>            :         ast_group_t callgroup;                          /*!&lt; Call group for call pickups */
<span class="lineNum">     154 </span>            :         ast_group_t pickupgroup;                        /*!&lt; Pickup group - which calls groups can be picked up? */
<span class="lineNum">     155 </span>            :         struct ast_namedgroups *named_callgroups;       /*!&lt; Named call group for call pickups */
<span class="lineNum">     156 </span>            :         struct ast_namedgroups *named_pickupgroups;     /*!&lt; Named pickup group - which call groups can be picked up? */
<span class="lineNum">     157 </span>            :         struct timeval creationtime;                    /*!&lt; The time of channel creation */
<span class="lineNum">     158 </span>            :         struct timeval answertime;                              /*!&lt; The time the channel was answered */
<span class="lineNum">     159 </span>            :         struct ast_readq_list readq;
<span class="lineNum">     160 </span>            :         struct ast_jb jb;                               /*!&lt; The jitterbuffer state */
<span class="lineNum">     161 </span>            :         struct timeval dtmf_tv;                         /*!&lt; The time that an in process digit began, or the last digit ended */
<span class="lineNum">     162 </span>            :         struct ast_hangup_handler_list hangup_handlers;/*!&lt; Hangup handlers on the channel. */
<span class="lineNum">     163 </span>            :         struct ast_datastore_list datastores; /*!&lt; Data stores on the channel */
<span class="lineNum">     164 </span>            :         struct ast_autochan_list autochans; /*!&lt; Autochans on the channel */
<span class="lineNum">     165 </span>            :         unsigned long insmpl;                           /*!&lt; Track the read/written samples for monitor use */
<span class="lineNum">     166 </span>            :         unsigned long outsmpl;                          /*!&lt; Track the read/written samples for monitor use */
<span class="lineNum">     167 </span>            : 
<span class="lineNum">     168 </span>            :         int blocker_tid;                                        /*!&lt; If anyone is blocking, this is their thread id */
<span class="lineNum">     169 </span>            :         AST_VECTOR(, int) fds;                          /*!&lt; File descriptors for channel -- Drivers will poll on
<span class="lineNum">     170 </span>            :                                                          *   these file descriptors, so at least one must be non -1.
<span class="lineNum">     171 </span>            :                                                          *   See \arg \ref AstFileDesc */
<span class="lineNum">     172 </span>            :         int softhangup;                         /*!&lt; Whether or not we have been hung up...  Do not set this value
<span class="lineNum">     173 </span>            :                                                          *   directly, use ast_softhangup() */
<span class="lineNum">     174 </span>            :         int fdno;                                       /*!&lt; Which fd had an event detected on */
<span class="lineNum">     175 </span>            :         int streamid;                                   /*!&lt; For streaming playback, the schedule ID */
<span class="lineNum">     176 </span>            :         int vstreamid;                                  /*!&lt; For streaming video playback, the schedule ID */
<span class="lineNum">     177 </span>            :         struct ast_format *oldwriteformat;  /*!&lt; Original writer format */
<span class="lineNum">     178 </span>            :         int timingfd;                                   /*!&lt; Timing fd */
<span class="lineNum">     179 </span>            :         enum ast_channel_state state;                   /*!&lt; State of line -- Don't write directly, use ast_setstate() */
<span class="lineNum">     180 </span>            :         int rings;                                      /*!&lt; Number of rings so far */
<span class="lineNum">     181 </span>            :         int priority;                                   /*!&lt; Dialplan: Current extension priority */
<span class="lineNum">     182 </span>            :         int macropriority;                              /*!&lt; Macro: Current non-macro priority. See app_macro.c */
<span class="lineNum">     183 </span>            :         int amaflags;                                   /*!&lt; Set BEFORE PBX is started to determine AMA flags */
<span class="lineNum">     184 </span>            :         enum ast_channel_adsicpe adsicpe;               /*!&lt; Whether or not ADSI is detected on CPE */
<span class="lineNum">     185 </span>            :         unsigned int fin;                               /*!&lt; Frames in counters. The high bit is a debug mask, so
<span class="lineNum">     186 </span>            :                                                          *   the counter is only in the remaining bits */
<span class="lineNum">     187 </span>            :         unsigned int fout;                              /*!&lt; Frames out counters. The high bit is a debug mask, so
<span class="lineNum">     188 </span>            :                                                          *   the counter is only in the remaining bits */
<span class="lineNum">     189 </span>            :         int hangupcause;                                /*!&lt; Why is the channel hanged up. See causes.h */
<span class="lineNum">     190 </span>            :         unsigned int finalized:1;       /*!&lt; Whether or not the channel has been successfully allocated */
<span class="lineNum">     191 </span>            :         struct ast_flags flags;                         /*!&lt; channel flags of AST_FLAG_ type */
<span class="lineNum">     192 </span>            :         int alertpipe[2];
<span class="lineNum">     193 </span>            :         struct ast_format_cap *nativeformats;         /*!&lt; Kinds of data this channel can natively handle */
<span class="lineNum">     194 </span>            :         struct ast_format *readformat;            /*!&lt; Requested read format (after translation) */
<span class="lineNum">     195 </span>            :         struct ast_format *writeformat;           /*!&lt; Requested write format (before translation) */
<span class="lineNum">     196 </span>            :         struct ast_format *rawreadformat;         /*!&lt; Raw read format (before translation) */
<span class="lineNum">     197 </span>            :         struct ast_format *rawwriteformat;        /*!&lt; Raw write format (after translation) */
<span class="lineNum">     198 </span>            :         unsigned int emulate_dtmf_duration;             /*!&lt; Number of ms left to emulate DTMF for */
<span class="lineNum">     199 </span>            :         int visible_indication;                         /*!&lt; Indication currently playing on the channel */
<span class="lineNum">     200 </span>            :         int hold_state;                                                 /*!&lt; Current Hold/Unhold state */
<span class="lineNum">     201 </span>            : 
<span class="lineNum">     202 </span>            :         unsigned short transfercapability;              /*!&lt; ISDN Transfer Capability - AST_FLAG_DIGITAL is not enough */
<span class="lineNum">     203 </span>            : 
<span class="lineNum">     204 </span>            :         struct ast_bridge *bridge;                      /*!&lt; Bridge this channel is participating in */
<span class="lineNum">     205 </span>            :         struct ast_bridge_channel *bridge_channel;/*!&lt; The bridge_channel this channel is linked with. */
<span class="lineNum">     206 </span>            :         struct ast_timer *timer;                        /*!&lt; timer object that provided timingfd */
<span class="lineNum">     207 </span>            : 
<span class="lineNum">     208 </span>            :         char context[AST_MAX_CONTEXT];                  /*!&lt; Dialplan: Current extension context */
<span class="lineNum">     209 </span>            :         char exten[AST_MAX_EXTENSION];                  /*!&lt; Dialplan: Current extension number */
<span class="lineNum">     210 </span>            :         char macrocontext[AST_MAX_CONTEXT];             /*!&lt; Macro: Current non-macro context. See app_macro.c */
<span class="lineNum">     211 </span>            :         char macroexten[AST_MAX_EXTENSION];             /*!&lt; Macro: Current non-macro extension. See app_macro.c */
<span class="lineNum">     212 </span>            :         char unbridged;                                                 /*!&lt; non-zero if the bridge core needs to re-evaluate the current
<span class="lineNum">     213 </span>            :                                                                                          bridging technology which is in use by this channel's bridge. */
<span class="lineNum">     214 </span>            :         char is_t38_active;                                             /*!&lt; non-zero if T.38 is active on this channel. */
<span class="lineNum">     215 </span>            :         char dtmf_digit_to_emulate;                     /*!&lt; Digit being emulated */
<span class="lineNum">     216 </span>            :         char sending_dtmf_digit;                        /*!&lt; Digit this channel is currently sending out. (zero if not sending) */
<span class="lineNum">     217 </span>            :         struct timeval sending_dtmf_tv;         /*!&lt; The time this channel started sending the current digit. (Invalid if sending_dtmf_digit is zero.) */
<span class="lineNum">     218 </span>            :         struct stasis_cp_single *topics;                /*!&lt; Topic for all channel's events */
<span class="lineNum">     219 </span>            :         struct stasis_forward *endpoint_forward;        /*!&lt; Subscription for event forwarding to endpoint's topic */
<span class="lineNum">     220 </span>            :         struct stasis_forward *endpoint_cache_forward; /*!&lt; Subscription for cache updates to endpoint's topic */
<span class="lineNum">     221 </span>            :         struct ast_stream_topology *stream_topology; /*!&lt; Stream topology */
<span class="lineNum">     222 </span>            :         void *stream_topology_change_source; /*!&lt; Source that initiated a stream topology change */
<span class="lineNum">     223 </span>            :         struct ast_stream *default_streams[AST_MEDIA_TYPE_END]; /*!&lt; Default streams indexed by media type */
<span class="lineNum">     224 </span>            : };
<span class="lineNum">     225 </span>            : 
<span class="lineNum">     226 </span>            : /*! \brief The monotonically increasing integer counter for channel uniqueids */
<span class="lineNum">     227 </span>            : static int uniqueint;
<span class="lineNum">     228 </span>            : 
<span class="lineNum">     229 </span>            : /* ACCESSORS */
<span class="lineNum">     230 </span>            : 
<span class="lineNum">     231 </span>            : #define DEFINE_STRINGFIELD_SETTERS_FOR(field, publish, assert_on_null) \
<span class="lineNum">     232 </span>            : void ast_channel_##field##_set(struct ast_channel *chan, const char *value) \
<span class="lineNum">     233 </span>            : { \
<span class="lineNum">     234 </span>            :         if ((assert_on_null)) ast_assert(!ast_strlen_zero(value)); \
<span class="lineNum">     235 </span>            :         if (!strcmp(value, chan-&gt;field)) return; \
<span class="lineNum">     236 </span>            :         ast_string_field_set(chan, field, value); \
<span class="lineNum">     237 </span>            :         if (publish &amp;&amp; ast_channel_internal_is_finalized(chan)) ast_channel_publish_snapshot(chan); \
<span class="lineNum">     238 </span>            : } \
<span class="lineNum">     239 </span>            :   \
<span class="lineNum">     240 </span>            : void ast_channel_##field##_build_va(struct ast_channel *chan, const char *fmt, va_list ap) \
<span class="lineNum">     241 </span>            : { \
<span class="lineNum">     242 </span>            :         ast_string_field_build_va(chan, field, fmt, ap); \
<span class="lineNum">     243 </span>            :         if (publish &amp;&amp; ast_channel_internal_is_finalized(chan)) ast_channel_publish_snapshot(chan); \
<span class="lineNum">     244 </span>            : } \
<span class="lineNum">     245 </span>            : void ast_channel_##field##_build(struct ast_channel *chan, const char *fmt, ...) \
<span class="lineNum">     246 </span>            : { \
<span class="lineNum">     247 </span>            :         va_list ap; \
<span class="lineNum">     248 </span>            :         va_start(ap, fmt); \
<span class="lineNum">     249 </span>            :         ast_channel_##field##_build_va(chan, fmt, ap); \
<span class="lineNum">     250 </span>            :         va_end(ap); \
<a name="251"><span class="lineNum">     251 </span>            : }</a>
<a name="252"><span class="lineNum">     252 </span>            : </a>
<a name="253"><span class="lineNum">     253 </span><span class="lineCov">      28490 : DEFINE_STRINGFIELD_SETTERS_FOR(name, 0, 1);</span></a>
<a name="254"><span class="lineNum">     254 </span><span class="lineCov">       5785 : DEFINE_STRINGFIELD_SETTERS_FOR(language, 1, 0);</span></a>
<a name="255"><span class="lineNum">     255 </span><span class="lineCov">       2099 : DEFINE_STRINGFIELD_SETTERS_FOR(musicclass, 0, 0);</span></a>
<a name="256"><span class="lineNum">     256 </span><span class="lineCov">        172 : DEFINE_STRINGFIELD_SETTERS_FOR(latest_musicclass, 0, 0);</span></a>
<a name="257"><span class="lineNum">     257 </span><span class="lineCov">      25541 : DEFINE_STRINGFIELD_SETTERS_FOR(accountcode, 1, 0);</span></a>
<a name="258"><span class="lineNum">     258 </span><span class="lineCov">      25366 : DEFINE_STRINGFIELD_SETTERS_FOR(peeraccount, 1, 0);</span></a>
<a name="259"><span class="lineNum">     259 </span><span class="lineCov">      24020 : DEFINE_STRINGFIELD_SETTERS_FOR(userfield, 0, 0);</span></a>
<a name="260"><span class="lineNum">     260 </span><span class="lineCov">         32 : DEFINE_STRINGFIELD_SETTERS_FOR(call_forward, 0, 0);</span></a>
<a name="261"><span class="lineNum">     261 </span><span class="lineCov">       1921 : DEFINE_STRINGFIELD_SETTERS_FOR(parkinglot, 0, 0);</span></a>
<span class="lineNum">     262 </span><span class="lineCov">       1852 : DEFINE_STRINGFIELD_SETTERS_FOR(hangupsource, 0, 0);</span>
<span class="lineNum">     263 </span><span class="lineCov">       1481 : DEFINE_STRINGFIELD_SETTERS_FOR(dialcontext, 0, 0);</span>
<span class="lineNum">     264 </span>            : 
<span class="lineNum">     265 </span>            : #define DEFINE_STRINGFIELD_GETTER_FOR(field) const char *ast_channel_##field(const struct ast_channel *chan) \
<span class="lineNum">     266 </span>            : { \
<span class="lineNum">     267 </span>            :         return chan-&gt;field; \
<a name="268"><span class="lineNum">     268 </span>            : }</a>
<a name="269"><span class="lineNum">     269 </span>            : </a>
<a name="270"><span class="lineNum">     270 </span><span class="lineCov">     235535 : DEFINE_STRINGFIELD_GETTER_FOR(name);</span></a>
<a name="271"><span class="lineNum">     271 </span><span class="lineCov">      68647 : DEFINE_STRINGFIELD_GETTER_FOR(language);</span></a>
<a name="272"><span class="lineNum">     272 </span><span class="lineCov">       3084 : DEFINE_STRINGFIELD_GETTER_FOR(musicclass);</span></a>
<a name="273"><span class="lineNum">     273 </span><span class="lineNoCov">          0 : DEFINE_STRINGFIELD_GETTER_FOR(latest_musicclass);</span></a>
<a name="274"><span class="lineNum">     274 </span><span class="lineCov">      97383 : DEFINE_STRINGFIELD_GETTER_FOR(accountcode);</span></a>
<a name="275"><span class="lineNum">     275 </span><span class="lineCov">      72433 : DEFINE_STRINGFIELD_GETTER_FOR(peeraccount);</span></a>
<a name="276"><span class="lineNum">     276 </span><span class="lineCov">      88040 : DEFINE_STRINGFIELD_GETTER_FOR(userfield);</span></a>
<a name="277"><span class="lineNum">     277 </span><span class="lineCov">     437951 : DEFINE_STRINGFIELD_GETTER_FOR(call_forward);</span></a>
<a name="278"><span class="lineNum">     278 </span><span class="lineCov">       1302 : DEFINE_STRINGFIELD_GETTER_FOR(parkinglot);</span></a>
<span class="lineNum">     279 </span><span class="lineCov">      66169 : DEFINE_STRINGFIELD_GETTER_FOR(hangupsource);</span>
<a name="280"><span class="lineNum">     280 </span><span class="lineNoCov">          0 : DEFINE_STRINGFIELD_GETTER_FOR(dialcontext);</span></a>
<span class="lineNum">     281 </span>            : 
<span class="lineNum">     282 </span><span class="lineCov">     156853 : const char *ast_channel_uniqueid(const struct ast_channel *chan)</span>
<span class="lineNum">     283 </span>            : {
<span class="lineNum">     284 </span><span class="lineCov">     156853 :         ast_assert(chan-&gt;uniqueid.unique_id[0] != '\0');</span>
<span class="lineNum">     285 </span><span class="lineCov">     156853 :         return chan-&gt;uniqueid.unique_id;</span>
<a name="286"><span class="lineNum">     286 </span>            : }</a>
<span class="lineNum">     287 </span>            : 
<span class="lineNum">     288 </span><span class="lineCov">     111867 : const char *ast_channel_linkedid(const struct ast_channel *chan)</span>
<span class="lineNum">     289 </span>            : {
<span class="lineNum">     290 </span><span class="lineCov">     111867 :         ast_assert(chan-&gt;linkedid.unique_id[0] != '\0');</span>
<span class="lineNum">     291 </span><span class="lineCov">     111867 :         return chan-&gt;linkedid.unique_id;</span>
<a name="292"><span class="lineNum">     292 </span>            : }</a>
<span class="lineNum">     293 </span>            : 
<span class="lineNum">     294 </span><span class="lineCov">     177367 : const char *ast_channel_appl(const struct ast_channel *chan)</span>
<span class="lineNum">     295 </span>            : {
<a name="296"><span class="lineNum">     296 </span><span class="lineCov">     177367 :         return chan-&gt;appl;</span></a>
<span class="lineNum">     297 </span>            : }
<span class="lineNum">     298 </span><span class="lineCov">      60884 : void ast_channel_appl_set(struct ast_channel *chan, const char *value)</span>
<span class="lineNum">     299 </span>            : {
<a name="300"><span class="lineNum">     300 </span><span class="lineCov">      60884 :         chan-&gt;appl = value;</span></a>
<span class="lineNum">     301 </span><span class="lineCov">      60884 : }</span>
<span class="lineNum">     302 </span><span class="lineNoCov">          0 : const char *ast_channel_blockproc(const struct ast_channel *chan)</span>
<span class="lineNum">     303 </span>            : {
<a name="304"><span class="lineNum">     304 </span><span class="lineNoCov">          0 :         return chan-&gt;blockproc;</span></a>
<span class="lineNum">     305 </span>            : }
<span class="lineNum">     306 </span><span class="lineCov">    3696603 : void ast_channel_blockproc_set(struct ast_channel *chan, const char *value)</span>
<span class="lineNum">     307 </span>            : {
<a name="308"><span class="lineNum">     308 </span><span class="lineCov">    3696603 :         chan-&gt;blockproc = value;</span></a>
<span class="lineNum">     309 </span><span class="lineCov">    3696603 : }</span>
<span class="lineNum">     310 </span><span class="lineCov">     272472 : const char *ast_channel_data(const struct ast_channel *chan)</span>
<span class="lineNum">     311 </span>            : {
<a name="312"><span class="lineNum">     312 </span><span class="lineCov">     272472 :         return chan-&gt;data;</span></a>
<span class="lineNum">     313 </span>            : }
<span class="lineNum">     314 </span><span class="lineCov">      60884 : void ast_channel_data_set(struct ast_channel *chan, const char *value)</span>
<span class="lineNum">     315 </span>            : {
<span class="lineNum">     316 </span><span class="lineCov">      60884 :         chan-&gt;data = value;</span>
<a name="317"><span class="lineNum">     317 </span><span class="lineCov">      60884 : }</span></a>
<span class="lineNum">     318 </span>            : 
<span class="lineNum">     319 </span><span class="lineCov">     139271 : const char *ast_channel_context(const struct ast_channel *chan)</span>
<span class="lineNum">     320 </span>            : {
<a name="321"><span class="lineNum">     321 </span><span class="lineCov">     139271 :         return chan-&gt;context;</span></a>
<span class="lineNum">     322 </span>            : }
<span class="lineNum">     323 </span><span class="lineCov">      32306 : void ast_channel_context_set(struct ast_channel *chan, const char *value)</span>
<span class="lineNum">     324 </span>            : {
<a name="325"><span class="lineNum">     325 </span><span class="lineCov">      32306 :         ast_copy_string(chan-&gt;context, value, sizeof(chan-&gt;context));</span></a>
<span class="lineNum">     326 </span><span class="lineCov">      32306 : }</span>
<span class="lineNum">     327 </span><span class="lineCov">     139543 : const char *ast_channel_exten(const struct ast_channel *chan)</span>
<span class="lineNum">     328 </span>            : {
<a name="329"><span class="lineNum">     329 </span><span class="lineCov">     139543 :         return chan-&gt;exten;</span></a>
<span class="lineNum">     330 </span>            : }
<span class="lineNum">     331 </span><span class="lineCov">      34331 : void ast_channel_exten_set(struct ast_channel *chan, const char *value)</span>
<span class="lineNum">     332 </span>            : {
<a name="333"><span class="lineNum">     333 </span><span class="lineCov">      34331 :         ast_copy_string(chan-&gt;exten, value, sizeof(chan-&gt;exten));</span></a>
<span class="lineNum">     334 </span><span class="lineCov">      34331 : }</span>
<span class="lineNum">     335 </span><span class="lineCov">       1629 : const char *ast_channel_macrocontext(const struct ast_channel *chan)</span>
<span class="lineNum">     336 </span>            : {
<a name="337"><span class="lineNum">     337 </span><span class="lineCov">       1629 :         return chan-&gt;macrocontext;</span></a>
<span class="lineNum">     338 </span>            : }
<span class="lineNum">     339 </span><span class="lineNoCov">          0 : void ast_channel_macrocontext_set(struct ast_channel *chan, const char *value)</span>
<span class="lineNum">     340 </span>            : {
<a name="341"><span class="lineNum">     341 </span><span class="lineNoCov">          0 :         ast_copy_string(chan-&gt;macrocontext, value, sizeof(chan-&gt;macrocontext));</span></a>
<span class="lineNum">     342 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">     343 </span><span class="lineCov">       2348 : const char *ast_channel_macroexten(const struct ast_channel *chan)</span>
<span class="lineNum">     344 </span>            : {
<a name="345"><span class="lineNum">     345 </span><span class="lineCov">       2348 :         return chan-&gt;macroexten;</span></a>
<span class="lineNum">     346 </span>            : }
<span class="lineNum">     347 </span><span class="lineNoCov">          0 : void ast_channel_macroexten_set(struct ast_channel *chan, const char *value)</span>
<span class="lineNum">     348 </span>            : {
<span class="lineNum">     349 </span><span class="lineNoCov">          0 :         ast_copy_string(chan-&gt;macroexten, value, sizeof(chan-&gt;macroexten));</span>
<a name="350"><span class="lineNum">     350 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     351 </span>            : 
<span class="lineNum">     352 </span><span class="lineCov">        109 : char ast_channel_dtmf_digit_to_emulate(const struct ast_channel *chan)</span>
<span class="lineNum">     353 </span>            : {
<a name="354"><span class="lineNum">     354 </span><span class="lineCov">        109 :         return chan-&gt;dtmf_digit_to_emulate;</span></a>
<span class="lineNum">     355 </span>            : }
<span class="lineNum">     356 </span><span class="lineCov">        224 : void ast_channel_dtmf_digit_to_emulate_set(struct ast_channel *chan, char value)</span>
<span class="lineNum">     357 </span>            : {
<span class="lineNum">     358 </span><span class="lineCov">        224 :         chan-&gt;dtmf_digit_to_emulate = value;</span>
<a name="359"><span class="lineNum">     359 </span><span class="lineCov">        224 : }</span></a>
<span class="lineNum">     360 </span>            : 
<span class="lineNum">     361 </span><span class="lineCov">       3095 : char ast_channel_sending_dtmf_digit(const struct ast_channel *chan)</span>
<span class="lineNum">     362 </span>            : {
<a name="363"><span class="lineNum">     363 </span><span class="lineCov">       3095 :         return chan-&gt;sending_dtmf_digit;</span></a>
<span class="lineNum">     364 </span>            : }
<span class="lineNum">     365 </span><span class="lineCov">       2719 : void ast_channel_sending_dtmf_digit_set(struct ast_channel *chan, char value)</span>
<span class="lineNum">     366 </span>            : {
<span class="lineNum">     367 </span><span class="lineCov">       2719 :         chan-&gt;sending_dtmf_digit = value;</span>
<a name="368"><span class="lineNum">     368 </span><span class="lineCov">       2719 : }</span></a>
<span class="lineNum">     369 </span>            : 
<span class="lineNum">     370 </span><span class="lineCov">         32 : struct timeval ast_channel_sending_dtmf_tv(const struct ast_channel *chan)</span>
<span class="lineNum">     371 </span>            : {
<a name="372"><span class="lineNum">     372 </span><span class="lineCov">         32 :         return chan-&gt;sending_dtmf_tv;</span></a>
<span class="lineNum">     373 </span>            : }
<span class="lineNum">     374 </span><span class="lineCov">       1361 : void ast_channel_sending_dtmf_tv_set(struct ast_channel *chan, struct timeval value)</span>
<span class="lineNum">     375 </span>            : {
<span class="lineNum">     376 </span><span class="lineCov">       1361 :         chan-&gt;sending_dtmf_tv = value;</span>
<a name="377"><span class="lineNum">     377 </span><span class="lineCov">       1361 : }</span></a>
<span class="lineNum">     378 </span>            : 
<span class="lineNum">     379 </span><span class="lineCov">      88061 : enum ama_flags ast_channel_amaflags(const struct ast_channel *chan)</span>
<span class="lineNum">     380 </span>            : {
<span class="lineNum">     381 </span><span class="lineCov">      88061 :         return chan-&gt;amaflags;</span>
<a name="382"><span class="lineNum">     382 </span>            : }</a>
<span class="lineNum">     383 </span>            : 
<span class="lineNum">     384 </span><span class="lineCov">      28431 : void ast_channel_amaflags_set(struct ast_channel *chan, enum ama_flags value)</span>
<span class="lineNum">     385 </span>            : {
<span class="lineNum">     386 </span><span class="lineCov">      28431 :         if (chan-&gt;amaflags == value) {</span>
<span class="lineNum">     387 </span><span class="lineNoCov">          0 :                 return;</span>
<span class="lineNum">     388 </span>            :         }
<span class="lineNum">     389 </span><span class="lineCov">      28431 :         chan-&gt;amaflags = value;</span>
<a name="390"><span class="lineNum">     390 </span><span class="lineCov">      28431 :         ast_channel_publish_snapshot(chan);</span></a>
<span class="lineNum">     391 </span>            : }
<span class="lineNum">     392 </span><span class="lineCov">    6139643 : int ast_channel_fdno(const struct ast_channel *chan)</span>
<span class="lineNum">     393 </span>            : {
<a name="394"><span class="lineNum">     394 </span><span class="lineCov">    6139643 :         return chan-&gt;fdno;</span></a>
<span class="lineNum">     395 </span>            : }
<span class="lineNum">     396 </span><span class="lineCov">    6355386 : void ast_channel_fdno_set(struct ast_channel *chan, int value)</span>
<span class="lineNum">     397 </span>            : {
<a name="398"><span class="lineNum">     398 </span><span class="lineCov">    6355386 :         chan-&gt;fdno = value;</span></a>
<span class="lineNum">     399 </span><span class="lineCov">    6355386 : }</span>
<span class="lineNum">     400 </span><span class="lineCov">      77515 : int ast_channel_hangupcause(const struct ast_channel *chan)</span>
<span class="lineNum">     401 </span>            : {
<a name="402"><span class="lineNum">     402 </span><span class="lineCov">      77515 :         return chan-&gt;hangupcause;</span></a>
<span class="lineNum">     403 </span>            : }
<span class="lineNum">     404 </span><span class="lineCov">       8470 : void ast_channel_hangupcause_set(struct ast_channel *chan, int value)</span>
<span class="lineNum">     405 </span>            : {
<a name="406"><span class="lineNum">     406 </span><span class="lineCov">       8470 :         chan-&gt;hangupcause = value;</span></a>
<span class="lineNum">     407 </span><span class="lineCov">       8470 : }</span>
<span class="lineNum">     408 </span><span class="lineNoCov">          0 : int ast_channel_macropriority(const struct ast_channel *chan)</span>
<span class="lineNum">     409 </span>            : {
<a name="410"><span class="lineNum">     410 </span><span class="lineNoCov">          0 :         return chan-&gt;macropriority;</span></a>
<span class="lineNum">     411 </span>            : }
<span class="lineNum">     412 </span><span class="lineNoCov">          0 : void ast_channel_macropriority_set(struct ast_channel *chan, int value)</span>
<span class="lineNum">     413 </span>            : {
<a name="414"><span class="lineNum">     414 </span><span class="lineNoCov">          0 :         chan-&gt;macropriority = value;</span></a>
<span class="lineNum">     415 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">     416 </span><span class="lineCov">     106093 : int ast_channel_priority(const struct ast_channel *chan)</span>
<span class="lineNum">     417 </span>            : {
<a name="418"><span class="lineNum">     418 </span><span class="lineCov">     106093 :         return chan-&gt;priority;</span></a>
<span class="lineNum">     419 </span>            : }
<span class="lineNum">     420 </span><span class="lineCov">      41233 : void ast_channel_priority_set(struct ast_channel *chan, int value)</span>
<span class="lineNum">     421 </span>            : {
<a name="422"><span class="lineNum">     422 </span><span class="lineCov">      41233 :         chan-&gt;priority = value;</span></a>
<span class="lineNum">     423 </span><span class="lineCov">      41233 : }</span>
<span class="lineNum">     424 </span><span class="lineNoCov">          0 : int ast_channel_rings(const struct ast_channel *chan)</span>
<span class="lineNum">     425 </span>            : {
<a name="426"><span class="lineNum">     426 </span><span class="lineNoCov">          0 :         return chan-&gt;rings;</span></a>
<span class="lineNum">     427 </span>            : }
<span class="lineNum">     428 </span><span class="lineCov">        573 : void ast_channel_rings_set(struct ast_channel *chan, int value)</span>
<span class="lineNum">     429 </span>            : {
<a name="430"><span class="lineNum">     430 </span><span class="lineCov">        573 :         chan-&gt;rings = value;</span></a>
<span class="lineNum">     431 </span><span class="lineCov">        573 : }</span>
<span class="lineNum">     432 </span><span class="lineCov">       4224 : int ast_channel_streamid(const struct ast_channel *chan)</span>
<span class="lineNum">     433 </span>            : {
<a name="434"><span class="lineNum">     434 </span><span class="lineCov">       4224 :         return chan-&gt;streamid;</span></a>
<span class="lineNum">     435 </span>            : }
<span class="lineNum">     436 </span><span class="lineCov">      10282 : void ast_channel_streamid_set(struct ast_channel *chan, int value)</span>
<span class="lineNum">     437 </span>            : {
<a name="438"><span class="lineNum">     438 </span><span class="lineCov">      10282 :         chan-&gt;streamid = value;</span></a>
<span class="lineNum">     439 </span><span class="lineCov">      10282 : }</span>
<span class="lineNum">     440 </span><span class="lineCov">    2906618 : int ast_channel_timingfd(const struct ast_channel *chan)</span>
<span class="lineNum">     441 </span>            : {
<a name="442"><span class="lineNum">     442 </span><span class="lineCov">    2906618 :         return chan-&gt;timingfd;</span></a>
<span class="lineNum">     443 </span>            : }
<span class="lineNum">     444 </span><span class="lineCov">      32851 : void ast_channel_timingfd_set(struct ast_channel *chan, int value)</span>
<span class="lineNum">     445 </span>            : {
<a name="446"><span class="lineNum">     446 </span><span class="lineCov">      32851 :         chan-&gt;timingfd = value;</span></a>
<span class="lineNum">     447 </span><span class="lineCov">      32851 : }</span>
<span class="lineNum">     448 </span><span class="lineCov">         32 : int ast_channel_visible_indication(const struct ast_channel *chan)</span>
<span class="lineNum">     449 </span>            : {
<a name="450"><span class="lineNum">     450 </span><span class="lineCov">         32 :         return chan-&gt;visible_indication;</span></a>
<span class="lineNum">     451 </span>            : }
<span class="lineNum">     452 </span><span class="lineCov">       3344 : void ast_channel_visible_indication_set(struct ast_channel *chan, int value)</span>
<span class="lineNum">     453 </span>            : {
<a name="454"><span class="lineNum">     454 </span><span class="lineCov">       3344 :         chan-&gt;visible_indication = value;</span></a>
<span class="lineNum">     455 </span><span class="lineCov">       3344 : }</span>
<span class="lineNum">     456 </span><span class="lineCov">       1888 : int ast_channel_hold_state(const struct ast_channel *chan)</span>
<span class="lineNum">     457 </span>            : {
<a name="458"><span class="lineNum">     458 </span><span class="lineCov">       1888 :         return chan-&gt;hold_state;</span></a>
<span class="lineNum">     459 </span>            : }
<span class="lineNum">     460 </span><span class="lineCov">      28654 : void ast_channel_hold_state_set(struct ast_channel *chan, int value)</span>
<span class="lineNum">     461 </span>            : {
<a name="462"><span class="lineNum">     462 </span><span class="lineCov">      28654 :         chan-&gt;hold_state = value;</span></a>
<span class="lineNum">     463 </span><span class="lineCov">      28654 : }</span>
<span class="lineNum">     464 </span><span class="lineNoCov">          0 : int ast_channel_vstreamid(const struct ast_channel *chan)</span>
<span class="lineNum">     465 </span>            : {
<a name="466"><span class="lineNum">     466 </span><span class="lineNoCov">          0 :         return chan-&gt;vstreamid;</span></a>
<span class="lineNum">     467 </span>            : }
<span class="lineNum">     468 </span><span class="lineCov">       4406 : void ast_channel_vstreamid_set(struct ast_channel *chan, int value)</span>
<span class="lineNum">     469 </span>            : {
<a name="470"><span class="lineNum">     470 </span><span class="lineCov">       4406 :         chan-&gt;vstreamid = value;</span></a>
<span class="lineNum">     471 </span><span class="lineCov">       4406 : }</span>
<span class="lineNum">     472 </span><span class="lineCov">        809 : unsigned short ast_channel_transfercapability(const struct ast_channel *chan)</span>
<span class="lineNum">     473 </span>            : {
<a name="474"><span class="lineNum">     474 </span><span class="lineCov">        809 :         return chan-&gt;transfercapability;</span></a>
<span class="lineNum">     475 </span>            : }
<span class="lineNum">     476 </span><span class="lineCov">        809 : void ast_channel_transfercapability_set(struct ast_channel *chan, unsigned short value)</span>
<span class="lineNum">     477 </span>            : {
<a name="478"><span class="lineNum">     478 </span><span class="lineCov">        809 :         chan-&gt;transfercapability = value;</span></a>
<span class="lineNum">     479 </span><span class="lineCov">        809 : }</span>
<span class="lineNum">     480 </span><span class="lineCov">    2779952 : unsigned int ast_channel_emulate_dtmf_duration(const struct ast_channel *chan)</span>
<span class="lineNum">     481 </span>            : {
<a name="482"><span class="lineNum">     482 </span><span class="lineCov">    2779952 :         return chan-&gt;emulate_dtmf_duration;</span></a>
<span class="lineNum">     483 </span>            : }
<span class="lineNum">     484 </span><span class="lineCov">        224 : void ast_channel_emulate_dtmf_duration_set(struct ast_channel *chan, unsigned int value)</span>
<span class="lineNum">     485 </span>            : {
<a name="486"><span class="lineNum">     486 </span><span class="lineCov">        224 :         chan-&gt;emulate_dtmf_duration = value;</span></a>
<span class="lineNum">     487 </span><span class="lineCov">        224 : }</span>
<span class="lineNum">     488 </span><span class="lineCov">    7854447 : unsigned int ast_channel_fin(const struct ast_channel *chan)</span>
<span class="lineNum">     489 </span>            : {
<a name="490"><span class="lineNum">     490 </span><span class="lineCov">    7854447 :         return chan-&gt;fin;</span></a>
<span class="lineNum">     491 </span>            : }
<span class="lineNum">     492 </span><span class="lineCov">    2622555 : void ast_channel_fin_set(struct ast_channel *chan, unsigned int value)</span>
<span class="lineNum">     493 </span>            : {
<a name="494"><span class="lineNum">     494 </span><span class="lineCov">    2622555 :         chan-&gt;fin = value;</span></a>
<span class="lineNum">     495 </span><span class="lineCov">    2622555 : }</span>
<span class="lineNum">     496 </span><span class="lineCov">    1681892 : unsigned int ast_channel_fout(const struct ast_channel *chan)</span>
<span class="lineNum">     497 </span>            : {
<a name="498"><span class="lineNum">     498 </span><span class="lineCov">    1681892 :         return chan-&gt;fout;</span></a>
<span class="lineNum">     499 </span>            : }
<span class="lineNum">     500 </span><span class="lineCov">     564967 : void ast_channel_fout_set(struct ast_channel *chan, unsigned int value)</span>
<span class="lineNum">     501 </span>            : {
<a name="502"><span class="lineNum">     502 </span><span class="lineCov">     564967 :         chan-&gt;fout = value;</span></a>
<span class="lineNum">     503 </span><span class="lineCov">     564967 : }</span>
<span class="lineNum">     504 </span><span class="lineNoCov">          0 : unsigned long ast_channel_insmpl(const struct ast_channel *chan)</span>
<span class="lineNum">     505 </span>            : {
<a name="506"><span class="lineNum">     506 </span><span class="lineNoCov">          0 :         return chan-&gt;insmpl;</span></a>
<span class="lineNum">     507 </span>            : }
<span class="lineNum">     508 </span><span class="lineCov">          4 : void ast_channel_insmpl_set(struct ast_channel *chan, unsigned long value)</span>
<span class="lineNum">     509 </span>            : {
<a name="510"><span class="lineNum">     510 </span><span class="lineCov">          4 :         chan-&gt;insmpl = value;</span></a>
<span class="lineNum">     511 </span><span class="lineCov">          4 : }</span>
<span class="lineNum">     512 </span><span class="lineNoCov">          0 : unsigned long ast_channel_outsmpl(const struct ast_channel *chan)</span>
<span class="lineNum">     513 </span>            : {
<a name="514"><span class="lineNum">     514 </span><span class="lineNoCov">          0 :         return chan-&gt;outsmpl;</span></a>
<span class="lineNum">     515 </span>            : }
<span class="lineNum">     516 </span><span class="lineCov">          4 : void ast_channel_outsmpl_set(struct ast_channel *chan, unsigned long value)</span>
<span class="lineNum">     517 </span>            : {
<a name="518"><span class="lineNum">     518 </span><span class="lineCov">          4 :         chan-&gt;outsmpl = value;</span></a>
<span class="lineNum">     519 </span><span class="lineCov">          4 : }</span>
<span class="lineNum">     520 </span><span class="lineCov">     703443 : void *ast_channel_generatordata(const struct ast_channel *chan)</span>
<span class="lineNum">     521 </span>            : {
<a name="522"><span class="lineNum">     522 </span><span class="lineCov">     703443 :         return chan-&gt;generatordata;</span></a>
<span class="lineNum">     523 </span>            : }
<span class="lineNum">     524 </span><span class="lineCov">     179780 : void ast_channel_generatordata_set(struct ast_channel *chan, void *value)</span>
<span class="lineNum">     525 </span>            : {
<a name="526"><span class="lineNum">     526 </span><span class="lineCov">     179780 :         chan-&gt;generatordata = value;</span></a>
<span class="lineNum">     527 </span><span class="lineCov">     179780 : }</span>
<span class="lineNum">     528 </span><span class="lineCov">    2666406 : void *ast_channel_music_state(const struct ast_channel *chan)</span>
<span class="lineNum">     529 </span>            : {
<a name="530"><span class="lineNum">     530 </span><span class="lineCov">    2666406 :         return chan-&gt;music_state;</span></a>
<span class="lineNum">     531 </span>            : }
<span class="lineNum">     532 </span><span class="lineCov">        304 : void ast_channel_music_state_set(struct ast_channel *chan, void *value)</span>
<span class="lineNum">     533 </span>            : {
<a name="534"><span class="lineNum">     534 </span><span class="lineCov">        304 :         chan-&gt;music_state = value;</span></a>
<span class="lineNum">     535 </span><span class="lineCov">        304 : }</span>
<span class="lineNum">     536 </span><span class="lineCov">    1895136 : void *ast_channel_tech_pvt(const struct ast_channel *chan)</span>
<span class="lineNum">     537 </span>            : {
<a name="538"><span class="lineNum">     538 </span><span class="lineCov">    1895136 :         return chan-&gt;tech_pvt;</span></a>
<span class="lineNum">     539 </span>            : }
<span class="lineNum">     540 </span><span class="lineCov">       8579 : void ast_channel_tech_pvt_set(struct ast_channel *chan, void *value)</span>
<span class="lineNum">     541 </span>            : {
<a name="542"><span class="lineNum">     542 </span><span class="lineCov">       8579 :         chan-&gt;tech_pvt = value;</span></a>
<span class="lineNum">     543 </span><span class="lineCov">       8579 : }</span>
<span class="lineNum">     544 </span><span class="lineCov">     282682 : void *ast_channel_timingdata(const struct ast_channel *chan)</span>
<span class="lineNum">     545 </span>            : {
<a name="546"><span class="lineNum">     546 </span><span class="lineCov">     282682 :         return chan-&gt;timingdata;</span></a>
<span class="lineNum">     547 </span>            : }
<span class="lineNum">     548 </span><span class="lineCov">       8853 : void ast_channel_timingdata_set(struct ast_channel *chan, void *value)</span>
<span class="lineNum">     549 </span>            : {
<a name="550"><span class="lineNum">     550 </span><span class="lineCov">       8853 :         chan-&gt;timingdata = value;</span></a>
<span class="lineNum">     551 </span><span class="lineCov">       8853 : }</span>
<span class="lineNum">     552 </span><span class="lineCov">    5061070 : struct ast_audiohook_list *ast_channel_audiohooks(const struct ast_channel *chan)</span>
<span class="lineNum">     553 </span>            : {
<a name="554"><span class="lineNum">     554 </span><span class="lineCov">    5061070 :         return chan-&gt;audiohooks;</span></a>
<span class="lineNum">     555 </span>            : }
<span class="lineNum">     556 </span><span class="lineCov">         50 : void ast_channel_audiohooks_set(struct ast_channel *chan, struct ast_audiohook_list *value)</span>
<span class="lineNum">     557 </span>            : {
<a name="558"><span class="lineNum">     558 </span><span class="lineCov">         50 :         chan-&gt;audiohooks = value;</span></a>
<span class="lineNum">     559 </span><span class="lineCov">         50 : }</span>
<span class="lineNum">     560 </span><span class="lineCov">      28497 : struct ast_cdr *ast_channel_cdr(const struct ast_channel *chan)</span>
<span class="lineNum">     561 </span>            : {
<a name="562"><span class="lineNum">     562 </span><span class="lineCov">      28497 :         return chan-&gt;cdr;</span></a>
<span class="lineNum">     563 </span>            : }
<span class="lineNum">     564 </span><span class="lineCov">          6 : void ast_channel_cdr_set(struct ast_channel *chan, struct ast_cdr *value)</span>
<span class="lineNum">     565 </span>            : {
<a name="566"><span class="lineNum">     566 </span><span class="lineCov">          6 :         chan-&gt;cdr = value;</span></a>
<span class="lineNum">     567 </span><span class="lineCov">          6 : }</span>
<span class="lineNum">     568 </span><span class="lineCov">       4399 : struct ast_channel *ast_channel_masq(const struct ast_channel *chan)</span>
<span class="lineNum">     569 </span>            : {
<a name="570"><span class="lineNum">     570 </span><span class="lineCov">       4399 :         return chan-&gt;masq;</span></a>
<span class="lineNum">     571 </span>            : }
<span class="lineNum">     572 </span><span class="lineCov">         64 : void ast_channel_masq_set(struct ast_channel *chan, struct ast_channel *value)</span>
<span class="lineNum">     573 </span>            : {
<a name="574"><span class="lineNum">     574 </span><span class="lineCov">         64 :         chan-&gt;masq = value;</span></a>
<span class="lineNum">     575 </span><span class="lineCov">         64 : }</span>
<span class="lineNum">     576 </span><span class="lineCov">       4387 : struct ast_channel *ast_channel_masqr(const struct ast_channel *chan)</span>
<span class="lineNum">     577 </span>            : {
<a name="578"><span class="lineNum">     578 </span><span class="lineCov">       4387 :         return chan-&gt;masqr;</span></a>
<span class="lineNum">     579 </span>            : }
<span class="lineNum">     580 </span><span class="lineCov">         64 : void ast_channel_masqr_set(struct ast_channel *chan, struct ast_channel *value)</span>
<span class="lineNum">     581 </span>            : {
<a name="582"><span class="lineNum">     582 </span><span class="lineCov">         64 :         chan-&gt;masqr = value;</span></a>
<span class="lineNum">     583 </span><span class="lineCov">         64 : }</span>
<span class="lineNum">     584 </span><span class="lineCov">     984333 : struct ast_channel_monitor *ast_channel_monitor(const struct ast_channel *chan)</span>
<span class="lineNum">     585 </span>            : {
<a name="586"><span class="lineNum">     586 </span><span class="lineCov">     984333 :         return chan-&gt;monitor;</span></a>
<span class="lineNum">     587 </span>            : }
<span class="lineNum">     588 </span><span class="lineCov">         72 : void ast_channel_monitor_set(struct ast_channel *chan, struct ast_channel_monitor *value)</span>
<span class="lineNum">     589 </span>            : {
<a name="590"><span class="lineNum">     590 </span><span class="lineCov">         72 :         chan-&gt;monitor = value;</span></a>
<span class="lineNum">     591 </span><span class="lineCov">         72 : }</span>
<span class="lineNum">     592 </span><span class="lineCov">     381036 : struct ast_filestream *ast_channel_stream(const struct ast_channel *chan)</span>
<span class="lineNum">     593 </span>            : {
<a name="594"><span class="lineNum">     594 </span><span class="lineCov">     381036 :         return chan-&gt;stream;</span></a>
<span class="lineNum">     595 </span>            : }
<span class="lineNum">     596 </span><span class="lineCov">       8750 : void ast_channel_stream_set(struct ast_channel *chan, struct ast_filestream *value)</span>
<span class="lineNum">     597 </span>            : {
<a name="598"><span class="lineNum">     598 </span><span class="lineCov">       8750 :         chan-&gt;stream = value;</span></a>
<span class="lineNum">     599 </span><span class="lineCov">       8750 : }</span>
<span class="lineNum">     600 </span><span class="lineCov">      10347 : struct ast_filestream *ast_channel_vstream(const struct ast_channel *chan)</span>
<span class="lineNum">     601 </span>            : {
<a name="602"><span class="lineNum">     602 </span><span class="lineCov">      10347 :         return chan-&gt;vstream;</span></a>
<span class="lineNum">     603 </span>            : }
<span class="lineNum">     604 </span><span class="lineNoCov">          0 : void ast_channel_vstream_set(struct ast_channel *chan, struct ast_filestream *value)</span>
<span class="lineNum">     605 </span>            : {
<a name="606"><span class="lineNum">     606 </span><span class="lineNoCov">          0 :         chan-&gt;vstream = value;</span></a>
<span class="lineNum">     607 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">     608 </span><span class="lineCov">     583747 : struct ast_format_cap *ast_channel_nativeformats(const struct ast_channel *chan)</span>
<span class="lineNum">     609 </span>            : {
<span class="lineNum">     610 </span><span class="lineCov">     583747 :         return chan-&gt;nativeformats;</span>
<a name="611"><span class="lineNum">     611 </span>            : }</a>
<span class="lineNum">     612 </span>            : 
<span class="lineNum">     613 </span><span class="lineCov">      38869 : static void channel_set_default_streams(struct ast_channel *chan)</span>
<span class="lineNum">     614 </span>            : {
<span class="lineNum">     615 </span>            :         enum ast_media_type type;
<span class="lineNum">     616 </span>            : 
<span class="lineNum">     617 </span><span class="lineCov">      38869 :         ast_assert(chan != NULL);</span>
<span class="lineNum">     618 </span>            : 
<span class="lineNum">     619 </span><span class="lineCov">     233214 :         for (type = AST_MEDIA_TYPE_UNKNOWN; type &lt; AST_MEDIA_TYPE_END; type++) {</span>
<span class="lineNum">     620 </span><span class="lineCov">     194345 :                 if (chan-&gt;stream_topology) {</span>
<span class="lineNum">     621 </span><span class="lineCov">      52115 :                         chan-&gt;default_streams[type] =</span>
<span class="lineNum">     622 </span><span class="lineCov">      52115 :                                 ast_stream_topology_get_first_stream_by_type(chan-&gt;stream_topology, type);</span>
<span class="lineNum">     623 </span>            :                 } else {
<span class="lineNum">     624 </span><span class="lineCov">     142230 :                         chan-&gt;default_streams[type] = NULL;</span>
<span class="lineNum">     625 </span>            :                 }
<span class="lineNum">     626 </span>            :         }
<a name="627"><span class="lineNum">     627 </span><span class="lineCov">      38869 : }</span></a>
<span class="lineNum">     628 </span>            : 
<span class="lineNum">     629 </span><span class="lineCov">      38805 : void ast_channel_internal_set_stream_topology(struct ast_channel *chan,</span>
<span class="lineNum">     630 </span>            :         struct ast_stream_topology *topology)
<span class="lineNum">     631 </span>            : {
<span class="lineNum">     632 </span><span class="lineCov">      38805 :         ast_stream_topology_free(chan-&gt;stream_topology);</span>
<span class="lineNum">     633 </span><span class="lineCov">      38805 :         chan-&gt;stream_topology = topology;</span>
<span class="lineNum">     634 </span><span class="lineCov">      38805 :         channel_set_default_streams(chan);</span>
<a name="635"><span class="lineNum">     635 </span><span class="lineCov">      38805 : }</span></a>
<span class="lineNum">     636 </span>            : 
<span class="lineNum">     637 </span><span class="lineCov">         20 : void ast_channel_internal_set_stream_topology_change_source(</span>
<span class="lineNum">     638 </span>            :         struct ast_channel *chan, void *change_source)
<span class="lineNum">     639 </span>            : {
<span class="lineNum">     640 </span><span class="lineCov">         20 :         chan-&gt;stream_topology_change_source = change_source;</span>
<a name="641"><span class="lineNum">     641 </span><span class="lineCov">         20 : }</span></a>
<span class="lineNum">     642 </span>            : 
<span class="lineNum">     643 </span><span class="lineCov">       1711 : void *ast_channel_get_stream_topology_change_source(struct ast_channel *chan)</span>
<span class="lineNum">     644 </span>            : {
<span class="lineNum">     645 </span><span class="lineCov">       1711 :         return chan-&gt;stream_topology_change_source;</span>
<a name="646"><span class="lineNum">     646 </span>            : }</a>
<span class="lineNum">     647 </span>            : 
<span class="lineNum">     648 </span><span class="lineCov">      14807 : void ast_channel_nativeformats_set(struct ast_channel *chan,</span>
<span class="lineNum">     649 </span>            :         struct ast_format_cap *value)
<span class="lineNum">     650 </span>            : {
<span class="lineNum">     651 </span><span class="lineCov">      14807 :         ast_assert(chan != NULL);</span>
<span class="lineNum">     652 </span>            : 
<span class="lineNum">     653 </span><span class="lineCov">      14807 :         ao2_replace(chan-&gt;nativeformats, value);</span>
<span class="lineNum">     654 </span>            : 
<span class="lineNum">     655 </span>            :         /* If chan-&gt;stream_topology is NULL, the channel is being destroyed
<span class="lineNum">     656 </span>            :          * and topology is destroyed.
<span class="lineNum">     657 </span>            :          */
<span class="lineNum">     658 </span><span class="lineCov">      14807 :         if (!chan-&gt;stream_topology) {</span>
<span class="lineNum">     659 </span><span class="lineCov">       8811 :                 return;</span>
<span class="lineNum">     660 </span>            :         }
<span class="lineNum">     661 </span>            : 
<span class="lineNum">     662 </span><span class="lineCov">       5996 :         if (!ast_channel_is_multistream(chan) || !value) {</span>
<span class="lineNum">     663 </span>            :                 struct ast_stream_topology *new_topology;
<span class="lineNum">     664 </span>            : 
<span class="lineNum">     665 </span><span class="lineCov">       4051 :                 new_topology = ast_stream_topology_create_from_format_cap(value);</span>
<span class="lineNum">     666 </span><span class="lineCov">       4051 :                 ast_channel_internal_set_stream_topology(chan, new_topology);</span>
<span class="lineNum">     667 </span>            :         }
<a name="668"><span class="lineNum">     668 </span>            : }</a>
<span class="lineNum">     669 </span>            : 
<span class="lineNum">     670 </span><span class="lineCov">    3357618 : struct ast_framehook_list *ast_channel_framehooks(const struct ast_channel *chan)</span>
<span class="lineNum">     671 </span>            : {
<a name="672"><span class="lineNum">     672 </span><span class="lineCov">    3357618 :         return chan-&gt;framehooks;</span></a>
<span class="lineNum">     673 </span>            : }
<span class="lineNum">     674 </span><span class="lineCov">       2142 : void ast_channel_framehooks_set(struct ast_channel *chan, struct ast_framehook_list *value)</span>
<span class="lineNum">     675 </span>            : {
<a name="676"><span class="lineNum">     676 </span><span class="lineCov">       2142 :         chan-&gt;framehooks = value;</span></a>
<span class="lineNum">     677 </span><span class="lineCov">       2142 : }</span>
<span class="lineNum">     678 </span><span class="lineCov">    2062316 : struct ast_generator *ast_channel_generator(const struct ast_channel *chan)</span>
<span class="lineNum">     679 </span>            : {
<a name="680"><span class="lineNum">     680 </span><span class="lineCov">    2062316 :         return chan-&gt;generator;</span></a>
<span class="lineNum">     681 </span>            : }
<span class="lineNum">     682 </span><span class="lineCov">       5082 : void ast_channel_generator_set(struct ast_channel *chan, struct ast_generator *value)</span>
<span class="lineNum">     683 </span>            : {
<a name="684"><span class="lineNum">     684 </span><span class="lineCov">       5082 :         chan-&gt;generator = value;</span></a>
<span class="lineNum">     685 </span><span class="lineCov">       5082 : }</span>
<span class="lineNum">     686 </span><span class="lineCov">      17927 : struct ast_pbx *ast_channel_pbx(const struct ast_channel *chan)</span>
<span class="lineNum">     687 </span>            : {
<a name="688"><span class="lineNum">     688 </span><span class="lineCov">      17927 :         return chan-&gt;pbx;</span></a>
<span class="lineNum">     689 </span>            : }
<span class="lineNum">     690 </span><span class="lineCov">       5990 : void ast_channel_pbx_set(struct ast_channel *chan, struct ast_pbx *value)</span>
<span class="lineNum">     691 </span>            : {
<a name="692"><span class="lineNum">     692 </span><span class="lineCov">       5990 :         chan-&gt;pbx = value;</span></a>
<span class="lineNum">     693 </span><span class="lineCov">       5990 : }</span>
<span class="lineNum">     694 </span><span class="lineCov">     563106 : struct ast_sched_context *ast_channel_sched(const struct ast_channel *chan)</span>
<span class="lineNum">     695 </span>            : {
<a name="696"><span class="lineNum">     696 </span><span class="lineCov">     563106 :         return chan-&gt;sched;</span></a>
<span class="lineNum">     697 </span>            : }
<span class="lineNum">     698 </span><span class="lineCov">       8791 : void ast_channel_sched_set(struct ast_channel *chan, struct ast_sched_context *value)</span>
<span class="lineNum">     699 </span>            : {
<a name="700"><span class="lineNum">     700 </span><span class="lineCov">       8791 :         chan-&gt;sched = value;</span></a>
<span class="lineNum">     701 </span><span class="lineCov">       8791 : }</span>
<span class="lineNum">     702 </span><span class="lineCov">     655688 : struct ast_timer *ast_channel_timer(const struct ast_channel *chan)</span>
<span class="lineNum">     703 </span>            : {
<a name="704"><span class="lineNum">     704 </span><span class="lineCov">     655688 :         return chan-&gt;timer;</span></a>
<span class="lineNum">     705 </span>            : }
<span class="lineNum">     706 </span><span class="lineCov">       8807 : void ast_channel_timer_set(struct ast_channel *chan, struct ast_timer *value)</span>
<span class="lineNum">     707 </span>            : {
<a name="708"><span class="lineNum">     708 </span><span class="lineCov">       8807 :         chan-&gt;timer = value;</span></a>
<span class="lineNum">     709 </span><span class="lineCov">       8807 : }</span>
<span class="lineNum">     710 </span><span class="lineCov">       4528 : struct ast_tone_zone *ast_channel_zone(const struct ast_channel *chan)</span>
<span class="lineNum">     711 </span>            : {
<a name="712"><span class="lineNum">     712 </span><span class="lineCov">       4528 :         return chan-&gt;zone;</span></a>
<span class="lineNum">     713 </span>            : }
<span class="lineNum">     714 </span><span class="lineNoCov">          0 : void ast_channel_zone_set(struct ast_channel *chan, struct ast_tone_zone *value)</span>
<span class="lineNum">     715 </span>            : {
<a name="716"><span class="lineNum">     716 </span><span class="lineNoCov">          0 :         chan-&gt;zone = value;</span></a>
<span class="lineNum">     717 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">     718 </span><span class="lineCov">     553223 : struct ast_trans_pvt *ast_channel_readtrans(const struct ast_channel *chan)</span>
<span class="lineNum">     719 </span>            : {
<a name="720"><span class="lineNum">     720 </span><span class="lineCov">     553223 :         return chan-&gt;readtrans;</span></a>
<span class="lineNum">     721 </span>            : }
<span class="lineNum">     722 </span><span class="lineCov">       5065 : void ast_channel_readtrans_set(struct ast_channel *chan, struct ast_trans_pvt *value)</span>
<span class="lineNum">     723 </span>            : {
<a name="724"><span class="lineNum">     724 </span><span class="lineCov">       5065 :         chan-&gt;readtrans = value;</span></a>
<span class="lineNum">     725 </span><span class="lineCov">       5065 : }</span>
<span class="lineNum">     726 </span><span class="lineCov">     668035 : struct ast_trans_pvt *ast_channel_writetrans(const struct ast_channel *chan)</span>
<span class="lineNum">     727 </span>            : {
<a name="728"><span class="lineNum">     728 </span><span class="lineCov">     668035 :         return chan-&gt;writetrans;</span></a>
<span class="lineNum">     729 </span>            : }
<span class="lineNum">     730 </span><span class="lineCov">       9179 : void ast_channel_writetrans_set(struct ast_channel *chan, struct ast_trans_pvt *value)</span>
<span class="lineNum">     731 </span>            : {
<a name="732"><span class="lineNum">     732 </span><span class="lineCov">       9179 :         chan-&gt;writetrans = value;</span></a>
<span class="lineNum">     733 </span><span class="lineCov">       9179 : }</span>
<span class="lineNum">     734 </span><span class="lineCov">    3431006 : const struct ast_channel_tech *ast_channel_tech(const struct ast_channel *chan)</span>
<span class="lineNum">     735 </span>            : {
<a name="736"><span class="lineNum">     736 </span><span class="lineCov">    3431006 :         return chan-&gt;tech;</span></a>
<span class="lineNum">     737 </span>            : }
<span class="lineNum">     738 </span><span class="lineCov">       8750 : void ast_channel_tech_set(struct ast_channel *chan, const struct ast_channel_tech *value)</span>
<span class="lineNum">     739 </span>            : {
<span class="lineNum">     740 </span><span class="lineCov">       8750 :         if (value-&gt;read_stream || value-&gt;write_stream) {</span>
<span class="lineNum">     741 </span><span class="lineCov">       1894 :                 ast_assert(value-&gt;read_stream &amp;&amp; value-&gt;write_stream);</span>
<span class="lineNum">     742 </span>            :         }
<span class="lineNum">     743 </span>            : 
<a name="744"><span class="lineNum">     744 </span><span class="lineCov">       8750 :         chan-&gt;tech = value;</span></a>
<span class="lineNum">     745 </span><span class="lineCov">       8750 : }</span>
<span class="lineNum">     746 </span><span class="lineCov">        988 : enum ast_channel_adsicpe ast_channel_adsicpe(const struct ast_channel *chan)</span>
<span class="lineNum">     747 </span>            : {
<a name="748"><span class="lineNum">     748 </span><span class="lineCov">        988 :         return chan-&gt;adsicpe;</span></a>
<span class="lineNum">     749 </span>            : }
<span class="lineNum">     750 </span><span class="lineCov">       2524 : void ast_channel_adsicpe_set(struct ast_channel *chan, enum ast_channel_adsicpe value)</span>
<span class="lineNum">     751 </span>            : {
<a name="752"><span class="lineNum">     752 </span><span class="lineCov">       2524 :         chan-&gt;adsicpe = value;</span></a>
<span class="lineNum">     753 </span><span class="lineCov">       2524 : }</span>
<span class="lineNum">     754 </span><span class="lineCov">    3359991 : enum ast_channel_state ast_channel_state(const struct ast_channel *chan)</span>
<span class="lineNum">     755 </span>            : {
<a name="756"><span class="lineNum">     756 </span><span class="lineCov">    3359991 :         return chan-&gt;state;</span></a>
<span class="lineNum">     757 </span>            : }
<span class="lineNum">     758 </span><span class="lineCov">      22510 : ast_callid ast_channel_callid(const struct ast_channel *chan)</span>
<span class="lineNum">     759 </span>            : {
<a name="760"><span class="lineNum">     760 </span><span class="lineCov">      22510 :         return chan-&gt;callid;</span></a>
<span class="lineNum">     761 </span>            : }
<span class="lineNum">     762 </span><span class="lineCov">       4423 : void ast_channel_callid_set(struct ast_channel *chan, ast_callid callid)</span>
<span class="lineNum">     763 </span>            : {
<span class="lineNum">     764 </span>            :         char call_identifier_from[AST_CALLID_BUFFER_LENGTH];
<span class="lineNum">     765 </span>            :         char call_identifier_to[AST_CALLID_BUFFER_LENGTH];
<span class="lineNum">     766 </span><span class="lineCov">       4423 :         call_identifier_from[0] = '\0';</span>
<span class="lineNum">     767 </span><span class="lineCov">       4423 :         ast_callid_strnprint(call_identifier_to, sizeof(call_identifier_to), callid);</span>
<span class="lineNum">     768 </span><span class="lineCov">       4423 :         if (chan-&gt;callid) {</span>
<span class="lineNum">     769 </span><span class="lineCov">        679 :                 ast_callid_strnprint(call_identifier_from, sizeof(call_identifier_from), chan-&gt;callid);</span>
<span class="lineNum">     770 </span><span class="lineCov">        679 :                 ast_debug(3, &quot;Channel Call ID changing from %s to %s\n&quot;, call_identifier_from, call_identifier_to);</span>
<span class="lineNum">     771 </span>            :         }
<span class="lineNum">     772 </span>            : 
<span class="lineNum">     773 </span><span class="lineCov">       4423 :         chan-&gt;callid = callid;</span>
<span class="lineNum">     774 </span>            : 
<span class="lineNum">     775 </span><span class="lineCov">       4423 :         ast_test_suite_event_notify(&quot;CallIDChange&quot;,</span>
<span class="lineNum">     776 </span>            :                 &quot;State: CallIDChange\r\n&quot;
<span class="lineNum">     777 </span>            :                 &quot;Channel: %s\r\n&quot;
<span class="lineNum">     778 </span>            :                 &quot;CallID: %s\r\n&quot;
<span class="lineNum">     779 </span>            :                 &quot;PriorCallID: %s&quot;,
<span class="lineNum">     780 </span>            :                 ast_channel_name(chan),
<span class="lineNum">     781 </span>            :                 call_identifier_to,
<span class="lineNum">     782 </span>            :                 call_identifier_from);
<a name="783"><span class="lineNum">     783 </span><span class="lineCov">       4423 : }</span></a>
<span class="lineNum">     784 </span>            : 
<span class="lineNum">     785 </span><span class="lineCov">       8876 : void ast_channel_state_set(struct ast_channel *chan, enum ast_channel_state value)</span>
<span class="lineNum">     786 </span>            : {
<a name="787"><span class="lineNum">     787 </span><span class="lineCov">       8876 :         chan-&gt;state = value;</span></a>
<span class="lineNum">     788 </span><span class="lineCov">       8876 : }</span>
<span class="lineNum">     789 </span><span class="lineCov">       6672 : void ast_channel_set_oldwriteformat(struct ast_channel *chan, struct ast_format *format)</span>
<span class="lineNum">     790 </span>            : {
<a name="791"><span class="lineNum">     791 </span><span class="lineCov">       6672 :         ao2_replace(chan-&gt;oldwriteformat, format);</span></a>
<span class="lineNum">     792 </span><span class="lineCov">       6672 : }</span>
<span class="lineNum">     793 </span><span class="lineCov">      19434 : void ast_channel_set_rawreadformat(struct ast_channel *chan, struct ast_format *format)</span>
<span class="lineNum">     794 </span>            : {
<a name="795"><span class="lineNum">     795 </span><span class="lineCov">      19434 :         ao2_replace(chan-&gt;rawreadformat, format);</span></a>
<span class="lineNum">     796 </span><span class="lineCov">      19434 : }</span>
<span class="lineNum">     797 </span><span class="lineCov">      24144 : void ast_channel_set_rawwriteformat(struct ast_channel *chan, struct ast_format *format)</span>
<span class="lineNum">     798 </span>            : {
<a name="799"><span class="lineNum">     799 </span><span class="lineCov">      24144 :         ao2_replace(chan-&gt;rawwriteformat, format);</span></a>
<span class="lineNum">     800 </span><span class="lineCov">      24144 : }</span>
<span class="lineNum">     801 </span><span class="lineCov">      19442 : void ast_channel_set_readformat(struct ast_channel *chan, struct ast_format *format)</span>
<span class="lineNum">     802 </span>            : {
<a name="803"><span class="lineNum">     803 </span><span class="lineCov">      19442 :         ao2_replace(chan-&gt;readformat, format);</span></a>
<span class="lineNum">     804 </span><span class="lineCov">      19442 : }</span>
<span class="lineNum">     805 </span><span class="lineCov">      24152 : void ast_channel_set_writeformat(struct ast_channel *chan, struct ast_format *format)</span>
<span class="lineNum">     806 </span>            : {
<a name="807"><span class="lineNum">     807 </span><span class="lineCov">      24152 :         ao2_replace(chan-&gt;writeformat, format);</span></a>
<span class="lineNum">     808 </span><span class="lineCov">      24152 : }</span>
<span class="lineNum">     809 </span><span class="lineCov">       4212 : struct ast_format *ast_channel_oldwriteformat(struct ast_channel *chan)</span>
<span class="lineNum">     810 </span>            : {
<a name="811"><span class="lineNum">     811 </span><span class="lineCov">       4212 :         return chan-&gt;oldwriteformat;</span></a>
<span class="lineNum">     812 </span>            : }
<span class="lineNum">     813 </span><span class="lineCov">     536153 : struct ast_format *ast_channel_rawreadformat(struct ast_channel *chan)</span>
<span class="lineNum">     814 </span>            : {
<a name="815"><span class="lineNum">     815 </span><span class="lineCov">     536153 :         return chan-&gt;rawreadformat;</span></a>
<span class="lineNum">     816 </span>            : }
<span class="lineNum">     817 </span><span class="lineCov">     589094 : struct ast_format *ast_channel_rawwriteformat(struct ast_channel *chan)</span>
<span class="lineNum">     818 </span>            : {
<a name="819"><span class="lineNum">     819 </span><span class="lineCov">     589094 :         return chan-&gt;rawwriteformat;</span></a>
<span class="lineNum">     820 </span>            : }
<span class="lineNum">     821 </span><span class="lineCov">      12186 : struct ast_format *ast_channel_readformat(struct ast_channel *chan)</span>
<span class="lineNum">     822 </span>            : {
<a name="823"><span class="lineNum">     823 </span><span class="lineCov">      12186 :         return chan-&gt;readformat;</span></a>
<span class="lineNum">     824 </span>            : }
<span class="lineNum">     825 </span><span class="lineCov">     433732 : struct ast_format *ast_channel_writeformat(struct ast_channel *chan)</span>
<span class="lineNum">     826 </span>            : {
<a name="827"><span class="lineNum">     827 </span><span class="lineCov">     433732 :         return chan-&gt;writeformat;</span></a>
<span class="lineNum">     828 </span>            : }
<span class="lineNum">     829 </span><span class="lineCov">      64679 : struct ast_hangup_handler_list *ast_channel_hangup_handlers(struct ast_channel *chan)</span>
<span class="lineNum">     830 </span>            : {
<a name="831"><span class="lineNum">     831 </span><span class="lineCov">      64679 :         return &amp;chan-&gt;hangup_handlers;</span></a>
<span class="lineNum">     832 </span>            : }
<span class="lineNum">     833 </span><span class="lineCov">     654725 : struct ast_datastore_list *ast_channel_datastores(struct ast_channel *chan)</span>
<span class="lineNum">     834 </span>            : {
<a name="835"><span class="lineNum">     835 </span><span class="lineCov">     654725 :         return &amp;chan-&gt;datastores;</span></a>
<span class="lineNum">     836 </span>            : }
<span class="lineNum">     837 </span><span class="lineCov">       8964 : struct ast_autochan_list *ast_channel_autochans(struct ast_channel *chan)</span>
<span class="lineNum">     838 </span>            : {
<a name="839"><span class="lineNum">     839 </span><span class="lineCov">       8964 :         return &amp;chan-&gt;autochans;</span></a>
<span class="lineNum">     840 </span>            : }
<span class="lineNum">     841 </span><span class="lineCov">    8968060 : struct ast_readq_list *ast_channel_readq(struct ast_channel *chan)</span>
<span class="lineNum">     842 </span>            : {
<a name="843"><span class="lineNum">     843 </span><span class="lineCov">    8968060 :         return &amp;chan-&gt;readq;</span></a>
<span class="lineNum">     844 </span>            : }
<span class="lineNum">     845 </span><span class="lineCov">        109 : struct ast_frame *ast_channel_dtmff(struct ast_channel *chan)</span>
<span class="lineNum">     846 </span>            : {
<a name="847"><span class="lineNum">     847 </span><span class="lineCov">        109 :         return &amp;chan-&gt;dtmff;</span></a>
<span class="lineNum">     848 </span>            : }
<span class="lineNum">     849 </span><span class="lineCov">       8036 : struct ast_jb *ast_channel_jb(struct ast_channel *chan)</span>
<span class="lineNum">     850 </span>            : {
<a name="851"><span class="lineNum">     851 </span><span class="lineCov">       8036 :         return &amp;chan-&gt;jb;</span></a>
<span class="lineNum">     852 </span>            : }
<span class="lineNum">     853 </span><span class="lineCov">     900798 : struct ast_party_caller *ast_channel_caller(struct ast_channel *chan)</span>
<span class="lineNum">     854 </span>            : {
<a name="855"><span class="lineNum">     855 </span><span class="lineCov">     900798 :         return &amp;chan-&gt;caller;</span></a>
<span class="lineNum">     856 </span>            : }
<span class="lineNum">     857 </span><span class="lineCov">     298754 : struct ast_party_connected_line *ast_channel_connected(struct ast_channel *chan)</span>
<span class="lineNum">     858 </span>            : {
<a name="859"><span class="lineNum">     859 </span><span class="lineCov">     298754 :         return &amp;chan-&gt;connected;</span></a>
<span class="lineNum">     860 </span>            : }
<span class="lineNum">     861 </span><span class="lineCov">      33619 : struct ast_party_connected_line *ast_channel_connected_indicated(struct ast_channel *chan)</span>
<span class="lineNum">     862 </span>            : {
<a name="863"><span class="lineNum">     863 </span><span class="lineCov">      33619 :         return &amp;chan-&gt;connected_indicated;</span></a>
<span class="lineNum">     864 </span>            : }
<span class="lineNum">     865 </span><span class="lineCov">       2118 : struct ast_party_id ast_channel_connected_effective_id(struct ast_channel *chan)</span>
<span class="lineNum">     866 </span>            : {
<a name="867"><span class="lineNum">     867 </span><span class="lineCov">       2118 :         return ast_party_id_merge(&amp;chan-&gt;connected.id, &amp;chan-&gt;connected.priv);</span></a>
<span class="lineNum">     868 </span>            : }
<span class="lineNum">     869 </span><span class="lineCov">     303330 : struct ast_party_dialed *ast_channel_dialed(struct ast_channel *chan)</span>
<span class="lineNum">     870 </span>            : {
<a name="871"><span class="lineNum">     871 </span><span class="lineCov">     303330 :         return &amp;chan-&gt;dialed;</span></a>
<span class="lineNum">     872 </span>            : }
<span class="lineNum">     873 </span><span class="lineCov">     287364 : struct ast_party_redirecting *ast_channel_redirecting(struct ast_channel *chan)</span>
<span class="lineNum">     874 </span>            : {
<a name="875"><span class="lineNum">     875 </span><span class="lineCov">     287364 :         return &amp;chan-&gt;redirecting;</span></a>
<span class="lineNum">     876 </span>            : }
<span class="lineNum">     877 </span><span class="lineNoCov">          0 : struct ast_party_id ast_channel_redirecting_effective_orig(struct ast_channel *chan)</span>
<span class="lineNum">     878 </span>            : {
<a name="879"><span class="lineNum">     879 </span><span class="lineNoCov">          0 :         return ast_party_id_merge(&amp;chan-&gt;redirecting.orig, &amp;chan-&gt;redirecting.priv_orig);</span></a>
<span class="lineNum">     880 </span>            : }
<span class="lineNum">     881 </span><span class="lineCov">        307 : struct ast_party_id ast_channel_redirecting_effective_from(struct ast_channel *chan)</span>
<span class="lineNum">     882 </span>            : {
<a name="883"><span class="lineNum">     883 </span><span class="lineCov">        307 :         return ast_party_id_merge(&amp;chan-&gt;redirecting.from, &amp;chan-&gt;redirecting.priv_from);</span></a>
<span class="lineNum">     884 </span>            : }
<span class="lineNum">     885 </span><span class="lineNoCov">          0 : struct ast_party_id ast_channel_redirecting_effective_to(struct ast_channel *chan)</span>
<span class="lineNum">     886 </span>            : {
<a name="887"><span class="lineNum">     887 </span><span class="lineNoCov">          0 :         return ast_party_id_merge(&amp;chan-&gt;redirecting.to, &amp;chan-&gt;redirecting.priv_to);</span></a>
<span class="lineNum">     888 </span>            : }
<span class="lineNum">     889 </span><span class="lineCov">    2987761 : struct timeval *ast_channel_dtmf_tv(struct ast_channel *chan)</span>
<span class="lineNum">     890 </span>            : {
<a name="891"><span class="lineNum">     891 </span><span class="lineCov">    2987761 :         return &amp;chan-&gt;dtmf_tv;</span></a>
<span class="lineNum">     892 </span>            : }
<span class="lineNum">     893 </span><span class="lineCov">    6747362 : struct timeval *ast_channel_whentohangup(struct ast_channel *chan)</span>
<span class="lineNum">     894 </span>            : {
<a name="895"><span class="lineNum">     895 </span><span class="lineCov">    6747362 :         return &amp;chan-&gt;whentohangup;</span></a>
<span class="lineNum">     896 </span>            : }
<span class="lineNum">     897 </span><span class="lineCov">     284582 : struct varshead *ast_channel_varshead(struct ast_channel *chan)</span>
<span class="lineNum">     898 </span>            : {
<a name="899"><span class="lineNum">     899 </span><span class="lineCov">     284582 :         return &amp;chan-&gt;varshead;</span></a>
<span class="lineNum">     900 </span>            : }
<span class="lineNum">     901 </span><span class="lineNoCov">          0 : void ast_channel_dtmff_set(struct ast_channel *chan, struct ast_frame *value)</span>
<span class="lineNum">     902 </span>            : {
<a name="903"><span class="lineNum">     903 </span><span class="lineNoCov">          0 :         chan-&gt;dtmff = *value;</span></a>
<span class="lineNum">     904 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">     905 </span><span class="lineNoCov">          0 : void ast_channel_jb_set(struct ast_channel *chan, struct ast_jb *value)</span>
<span class="lineNum">     906 </span>            : {
<a name="907"><span class="lineNum">     907 </span><span class="lineNoCov">          0 :         chan-&gt;jb = *value;</span></a>
<span class="lineNum">     908 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">     909 </span><span class="lineCov">         64 : void ast_channel_caller_set(struct ast_channel *chan, struct ast_party_caller *value)</span>
<span class="lineNum">     910 </span>            : {
<a name="911"><span class="lineNum">     911 </span><span class="lineCov">         64 :         chan-&gt;caller = *value;</span></a>
<span class="lineNum">     912 </span><span class="lineCov">         64 : }</span>
<span class="lineNum">     913 </span><span class="lineCov">         64 : void ast_channel_connected_set(struct ast_channel *chan, struct ast_party_connected_line *value)</span>
<span class="lineNum">     914 </span>            : {
<a name="915"><span class="lineNum">     915 </span><span class="lineCov">         64 :         chan-&gt;connected = *value;</span></a>
<span class="lineNum">     916 </span><span class="lineCov">         64 : }</span>
<span class="lineNum">     917 </span><span class="lineCov">         64 : void ast_channel_dialed_set(struct ast_channel *chan, struct ast_party_dialed *value)</span>
<span class="lineNum">     918 </span>            : {
<a name="919"><span class="lineNum">     919 </span><span class="lineCov">         64 :         chan-&gt;dialed = *value;</span></a>
<span class="lineNum">     920 </span><span class="lineCov">         64 : }</span>
<span class="lineNum">     921 </span><span class="lineCov">         64 : void ast_channel_redirecting_set(struct ast_channel *chan, struct ast_party_redirecting *value)</span>
<span class="lineNum">     922 </span>            : {
<a name="923"><span class="lineNum">     923 </span><span class="lineCov">         64 :         chan-&gt;redirecting = *value;</span></a>
<span class="lineNum">     924 </span><span class="lineCov">         64 : }</span>
<span class="lineNum">     925 </span><span class="lineCov">       2160 : void ast_channel_dtmf_tv_set(struct ast_channel *chan, struct timeval *value)</span>
<span class="lineNum">     926 </span>            : {
<a name="927"><span class="lineNum">     927 </span><span class="lineCov">       2160 :         chan-&gt;dtmf_tv = *value;</span></a>
<span class="lineNum">     928 </span><span class="lineCov">       2160 : }</span>
<span class="lineNum">     929 </span><span class="lineCov">          8 : void ast_channel_whentohangup_set(struct ast_channel *chan, struct timeval *value)</span>
<span class="lineNum">     930 </span>            : {
<a name="931"><span class="lineNum">     931 </span><span class="lineCov">          8 :         chan-&gt;whentohangup = *value;</span></a>
<span class="lineNum">     932 </span><span class="lineCov">          8 : }</span>
<span class="lineNum">     933 </span><span class="lineNoCov">          0 : void ast_channel_varshead_set(struct ast_channel *chan, struct varshead *value)</span>
<span class="lineNum">     934 </span>            : {
<a name="935"><span class="lineNum">     935 </span><span class="lineNoCov">          0 :         chan-&gt;varshead = *value;</span></a>
<span class="lineNum">     936 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">     937 </span><span class="lineCov">      65570 : struct timeval ast_channel_creationtime(struct ast_channel *chan)</span>
<span class="lineNum">     938 </span>            : {
<a name="939"><span class="lineNum">     939 </span><span class="lineCov">      65570 :         return chan-&gt;creationtime;</span></a>
<span class="lineNum">     940 </span>            : }
<span class="lineNum">     941 </span><span class="lineCov">       4406 : void ast_channel_creationtime_set(struct ast_channel *chan, struct timeval *value)</span>
<span class="lineNum">     942 </span>            : {
<span class="lineNum">     943 </span><span class="lineCov">       4406 :         chan-&gt;creationtime = *value;</span>
<a name="944"><span class="lineNum">     944 </span><span class="lineCov">       4406 : }</span></a>
<span class="lineNum">     945 </span>            : 
<span class="lineNum">     946 </span><span class="lineCov">       5191 : struct timeval ast_channel_answertime(struct ast_channel *chan)</span>
<span class="lineNum">     947 </span>            : {
<span class="lineNum">     948 </span><span class="lineCov">       5191 :         return chan-&gt;answertime;</span>
<a name="949"><span class="lineNum">     949 </span>            : }</a>
<span class="lineNum">     950 </span>            : 
<span class="lineNum">     951 </span><span class="lineCov">       3717 : void ast_channel_answertime_set(struct ast_channel *chan, struct timeval *value)</span>
<span class="lineNum">     952 </span>            : {
<span class="lineNum">     953 </span><span class="lineCov">       3717 :         chan-&gt;answertime = *value;</span>
<span class="lineNum">     954 </span><span class="lineCov">       3717 : }</span>
<a name="955"><span class="lineNum">     955 </span>            : </a>
<span class="lineNum">     956 </span>            : /* Evil softhangup accessors */
<span class="lineNum">     957 </span><span class="lineCov">    3625841 : int ast_channel_softhangup_internal_flag(struct ast_channel *chan)</span>
<span class="lineNum">     958 </span>            : {
<a name="959"><span class="lineNum">     959 </span><span class="lineCov">    3625841 :         return chan-&gt;softhangup;</span></a>
<span class="lineNum">     960 </span>            : }
<span class="lineNum">     961 </span><span class="lineCov">         32 : void ast_channel_softhangup_internal_flag_set(struct ast_channel *chan, int value)</span>
<span class="lineNum">     962 </span>            : {
<a name="963"><span class="lineNum">     963 </span><span class="lineCov">         32 :         chan-&gt;softhangup = value;</span></a>
<span class="lineNum">     964 </span><span class="lineCov">         32 : }</span>
<span class="lineNum">     965 </span><span class="lineCov">       9442 : void ast_channel_softhangup_internal_flag_add(struct ast_channel *chan, int value)</span>
<span class="lineNum">     966 </span>            : {
<a name="967"><span class="lineNum">     967 </span><span class="lineCov">       9442 :         chan-&gt;softhangup |= value;</span></a>
<span class="lineNum">     968 </span><span class="lineCov">       9442 : }</span>
<span class="lineNum">     969 </span><span class="lineCov">        593 : void ast_channel_softhangup_internal_flag_clear(struct ast_channel *chan, int value)</span>
<span class="lineNum">     970 </span>            : {
<span class="lineNum">     971 </span><span class="lineCov">        593 :         chan -&gt;softhangup &amp;= ~value;</span>
<a name="972"><span class="lineNum">     972 </span><span class="lineCov">        593 : }</span></a>
<span class="lineNum">     973 </span>            : 
<span class="lineNum">     974 </span><span class="lineCov">     614181 : int ast_channel_unbridged_nolock(struct ast_channel *chan)</span>
<span class="lineNum">     975 </span>            : {
<span class="lineNum">     976 </span><span class="lineCov">     614181 :         return chan-&gt;unbridged;</span>
<a name="977"><span class="lineNum">     977 </span>            : }</a>
<span class="lineNum">     978 </span>            : 
<span class="lineNum">     979 </span><span class="lineCov">     614181 : int ast_channel_unbridged(struct ast_channel *chan)</span>
<span class="lineNum">     980 </span>            : {
<span class="lineNum">     981 </span>            :         int res;
<span class="lineNum">     982 </span><span class="lineCov">     614181 :         ast_channel_lock(chan);</span>
<span class="lineNum">     983 </span><span class="lineCov">     614181 :         res = ast_channel_unbridged_nolock(chan);</span>
<span class="lineNum">     984 </span><span class="lineCov">     614181 :         ast_channel_unlock(chan);</span>
<span class="lineNum">     985 </span><span class="lineCov">     614181 :         return res;</span>
<a name="986"><span class="lineNum">     986 </span>            : }</a>
<span class="lineNum">     987 </span>            : 
<span class="lineNum">     988 </span><span class="lineCov">       2788 : void ast_channel_set_unbridged_nolock(struct ast_channel *chan, int value)</span>
<span class="lineNum">     989 </span>            : {
<span class="lineNum">     990 </span><span class="lineCov">       2788 :         chan-&gt;unbridged = !!value;</span>
<span class="lineNum">     991 </span><span class="lineCov">       2788 :         ast_queue_frame(chan, &amp;ast_null_frame);</span>
<a name="992"><span class="lineNum">     992 </span><span class="lineCov">       2788 : }</span></a>
<span class="lineNum">     993 </span>            : 
<span class="lineNum">     994 </span><span class="lineCov">       2049 : void ast_channel_set_unbridged(struct ast_channel *chan, int value)</span>
<span class="lineNum">     995 </span>            : {
<span class="lineNum">     996 </span><span class="lineCov">       2049 :         ast_channel_lock(chan);</span>
<span class="lineNum">     997 </span><span class="lineCov">       2049 :         ast_channel_set_unbridged_nolock(chan, value);</span>
<span class="lineNum">     998 </span><span class="lineCov">       2049 :         ast_channel_unlock(chan);</span>
<a name="999"><span class="lineNum">     999 </span><span class="lineCov">       2049 : }</span></a>
<span class="lineNum">    1000 </span>            : 
<span class="lineNum">    1001 </span><span class="lineCov">       1705 : int ast_channel_is_t38_active_nolock(struct ast_channel *chan)</span>
<span class="lineNum">    1002 </span>            : {
<span class="lineNum">    1003 </span><span class="lineCov">       1705 :         return chan-&gt;is_t38_active;</span>
<a name="1004"><span class="lineNum">    1004 </span>            : }</a>
<span class="lineNum">    1005 </span>            : 
<span class="lineNum">    1006 </span><span class="lineCov">       1705 : int ast_channel_is_t38_active(struct ast_channel *chan)</span>
<span class="lineNum">    1007 </span>            : {
<span class="lineNum">    1008 </span>            :         int res;
<span class="lineNum">    1009 </span>            : 
<span class="lineNum">    1010 </span><span class="lineCov">       1705 :         ast_channel_lock(chan);</span>
<span class="lineNum">    1011 </span><span class="lineCov">       1705 :         res = ast_channel_is_t38_active_nolock(chan);</span>
<span class="lineNum">    1012 </span><span class="lineCov">       1705 :         ast_channel_unlock(chan);</span>
<span class="lineNum">    1013 </span><span class="lineCov">       1705 :         return res;</span>
<a name="1014"><span class="lineNum">    1014 </span>            : }</a>
<span class="lineNum">    1015 </span>            : 
<span class="lineNum">    1016 </span><span class="lineCov">        108 : void ast_channel_set_is_t38_active_nolock(struct ast_channel *chan, int is_t38_active)</span>
<span class="lineNum">    1017 </span>            : {
<span class="lineNum">    1018 </span><span class="lineCov">        108 :         chan-&gt;is_t38_active = !!is_t38_active;</span>
<a name="1019"><span class="lineNum">    1019 </span><span class="lineCov">        108 : }</span></a>
<span class="lineNum">    1020 </span>            : 
<span class="lineNum">    1021 </span><span class="lineNoCov">          0 : void ast_channel_set_is_t38_active(struct ast_channel *chan, int is_t38_active)</span>
<span class="lineNum">    1022 </span>            : {
<span class="lineNum">    1023 </span><span class="lineNoCov">          0 :         ast_channel_lock(chan);</span>
<span class="lineNum">    1024 </span><span class="lineNoCov">          0 :         ast_channel_set_is_t38_active_nolock(chan, is_t38_active);</span>
<span class="lineNum">    1025 </span><span class="lineNoCov">          0 :         ast_channel_unlock(chan);</span>
<a name="1026"><span class="lineNum">    1026 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1027 </span>            : 
<span class="lineNum">    1028 </span><span class="lineCov">       4405 : void ast_channel_callid_cleanup(struct ast_channel *chan)</span>
<span class="lineNum">    1029 </span>            : {
<span class="lineNum">    1030 </span><span class="lineCov">       4405 :         chan-&gt;callid = 0;</span>
<span class="lineNum">    1031 </span><span class="lineCov">       4405 : }</span>
<a name="1032"><span class="lineNum">    1032 </span>            : </a>
<span class="lineNum">    1033 </span>            : /* Typedef accessors */
<span class="lineNum">    1034 </span><span class="lineCov">         26 : ast_group_t ast_channel_callgroup(const struct ast_channel *chan)</span>
<span class="lineNum">    1035 </span>            : {
<a name="1036"><span class="lineNum">    1036 </span><span class="lineCov">         26 :         return chan-&gt;callgroup;</span></a>
<span class="lineNum">    1037 </span>            : }
<span class="lineNum">    1038 </span><span class="lineCov">       1578 : void ast_channel_callgroup_set(struct ast_channel *chan, ast_group_t value)</span>
<span class="lineNum">    1039 </span>            : {
<a name="1040"><span class="lineNum">    1040 </span><span class="lineCov">       1578 :         chan-&gt;callgroup = value;</span></a>
<span class="lineNum">    1041 </span><span class="lineCov">       1578 : }</span>
<span class="lineNum">    1042 </span><span class="lineCov">         26 : ast_group_t ast_channel_pickupgroup(const struct ast_channel *chan)</span>
<span class="lineNum">    1043 </span>            : {
<a name="1044"><span class="lineNum">    1044 </span><span class="lineCov">         26 :         return chan-&gt;pickupgroup;</span></a>
<span class="lineNum">    1045 </span>            : }
<span class="lineNum">    1046 </span><span class="lineCov">       1578 : void ast_channel_pickupgroup_set(struct ast_channel *chan, ast_group_t value)</span>
<span class="lineNum">    1047 </span>            : {
<a name="1048"><span class="lineNum">    1048 </span><span class="lineCov">       1578 :         chan-&gt;pickupgroup = value;</span></a>
<span class="lineNum">    1049 </span><span class="lineCov">       1578 : }</span>
<span class="lineNum">    1050 </span><span class="lineCov">          3 : struct ast_namedgroups *ast_channel_named_callgroups(const struct ast_channel *chan)</span>
<span class="lineNum">    1051 </span>            : {
<a name="1052"><span class="lineNum">    1052 </span><span class="lineCov">          3 :         return chan-&gt;named_callgroups;</span></a>
<span class="lineNum">    1053 </span>            : }
<span class="lineNum">    1054 </span><span class="lineCov">       5984 : void ast_channel_named_callgroups_set(struct ast_channel *chan, struct ast_namedgroups *value)</span>
<span class="lineNum">    1055 </span>            : {
<span class="lineNum">    1056 </span><span class="lineCov">       5984 :         ast_unref_namedgroups(chan-&gt;named_callgroups);</span>
<a name="1057"><span class="lineNum">    1057 </span><span class="lineCov">       5984 :         chan-&gt;named_callgroups = ast_ref_namedgroups(value);</span></a>
<span class="lineNum">    1058 </span><span class="lineCov">       5984 : }</span>
<span class="lineNum">    1059 </span><span class="lineCov">          3 : struct ast_namedgroups *ast_channel_named_pickupgroups(const struct ast_channel *chan)</span>
<span class="lineNum">    1060 </span>            : {
<a name="1061"><span class="lineNum">    1061 </span><span class="lineCov">          3 :         return chan-&gt;named_pickupgroups;</span></a>
<span class="lineNum">    1062 </span>            : }
<span class="lineNum">    1063 </span><span class="lineCov">       5985 : void ast_channel_named_pickupgroups_set(struct ast_channel *chan, struct ast_namedgroups *value)</span>
<span class="lineNum">    1064 </span>            : {
<span class="lineNum">    1065 </span><span class="lineCov">       5985 :         ast_unref_namedgroups(chan-&gt;named_pickupgroups);</span>
<span class="lineNum">    1066 </span><span class="lineCov">       5985 :         chan-&gt;named_pickupgroups = ast_ref_namedgroups(value);</span>
<span class="lineNum">    1067 </span><span class="lineCov">       5985 : }</span>
<a name="1068"><span class="lineNum">    1068 </span>            : </a>
<span class="lineNum">    1069 </span>            : /* Alertpipe functions */
<span class="lineNum">    1070 </span><span class="lineCov">    2295325 : int ast_channel_alert_write(struct ast_channel *chan)</span>
<span class="lineNum">    1071 </span>            : {
<span class="lineNum">    1072 </span><span class="lineCov">    2295325 :         return ast_alertpipe_write(chan-&gt;alertpipe);</span>
<a name="1073"><span class="lineNum">    1073 </span>            : }</a>
<span class="lineNum">    1074 </span>            : 
<span class="lineNum">    1075 </span><span class="lineCov">         15 : ast_alert_status_t ast_channel_internal_alert_flush(struct ast_channel *chan)</span>
<span class="lineNum">    1076 </span>            : {
<span class="lineNum">    1077 </span><span class="lineCov">         15 :         return ast_alertpipe_flush(chan-&gt;alertpipe);</span>
<a name="1078"><span class="lineNum">    1078 </span>            : }</a>
<span class="lineNum">    1079 </span>            : 
<span class="lineNum">    1080 </span><span class="lineCov">    2618149 : ast_alert_status_t ast_channel_internal_alert_read(struct ast_channel *chan)</span>
<span class="lineNum">    1081 </span>            : {
<span class="lineNum">    1082 </span><span class="lineCov">    2618149 :         return ast_alertpipe_read(chan-&gt;alertpipe);</span>
<a name="1083"><span class="lineNum">    1083 </span>            : }</a>
<span class="lineNum">    1084 </span>            : 
<span class="lineNum">    1085 </span><span class="lineCov">     224263 : int ast_channel_alert_writable(struct ast_channel *chan)</span>
<span class="lineNum">    1086 </span>            : {
<span class="lineNum">    1087 </span><span class="lineCov">     224263 :         return ast_alertpipe_writable(chan-&gt;alertpipe);</span>
<a name="1088"><span class="lineNum">    1088 </span>            : }</a>
<span class="lineNum">    1089 </span>            : 
<span class="lineNum">    1090 </span><span class="lineNoCov">          0 : int ast_channel_internal_alert_readable(struct ast_channel *chan)</span>
<span class="lineNum">    1091 </span>            : {
<span class="lineNum">    1092 </span><span class="lineNoCov">          0 :         return ast_alertpipe_readable(chan-&gt;alertpipe);</span>
<a name="1093"><span class="lineNum">    1093 </span>            : }</a>
<span class="lineNum">    1094 </span>            : 
<span class="lineNum">    1095 </span><span class="lineCov">      28447 : void ast_channel_internal_alertpipe_clear(struct ast_channel *chan)</span>
<span class="lineNum">    1096 </span>            : {
<span class="lineNum">    1097 </span><span class="lineCov">      28447 :         ast_alertpipe_clear(chan-&gt;alertpipe);</span>
<a name="1098"><span class="lineNum">    1098 </span><span class="lineCov">      28447 : }</span></a>
<span class="lineNum">    1099 </span>            : 
<span class="lineNum">    1100 </span><span class="lineCov">       4405 : void ast_channel_internal_alertpipe_close(struct ast_channel *chan)</span>
<span class="lineNum">    1101 </span>            : {
<span class="lineNum">    1102 </span><span class="lineCov">       4405 :         ast_alertpipe_close(chan-&gt;alertpipe);</span>
<a name="1103"><span class="lineNum">    1103 </span><span class="lineCov">       4405 : }</span></a>
<span class="lineNum">    1104 </span>            : 
<span class="lineNum">    1105 </span><span class="lineCov">       4253 : int ast_channel_internal_alertpipe_init(struct ast_channel *chan)</span>
<span class="lineNum">    1106 </span>            : {
<span class="lineNum">    1107 </span><span class="lineCov">       4253 :         return ast_alertpipe_init(chan-&gt;alertpipe);</span>
<a name="1108"><span class="lineNum">    1108 </span>            : }</a>
<span class="lineNum">    1109 </span>            : 
<span class="lineNum">    1110 </span><span class="lineCov">       4406 : int ast_channel_internal_alert_readfd(struct ast_channel *chan)</span>
<span class="lineNum">    1111 </span>            : {
<span class="lineNum">    1112 </span><span class="lineCov">       4406 :         return ast_alertpipe_readfd(chan-&gt;alertpipe);</span>
<a name="1113"><span class="lineNum">    1113 </span>            : }</a>
<span class="lineNum">    1114 </span>            : 
<span class="lineNum">    1115 </span><span class="lineCov">         32 : void ast_channel_internal_alertpipe_swap(struct ast_channel *chan1, struct ast_channel *chan2)</span>
<span class="lineNum">    1116 </span>            : {
<span class="lineNum">    1117 </span><span class="lineCov">         32 :         ast_alertpipe_swap(chan1-&gt;alertpipe, chan2-&gt;alertpipe);</span>
<span class="lineNum">    1118 </span><span class="lineCov">         32 : }</span>
<a name="1119"><span class="lineNum">    1119 </span>            : </a>
<span class="lineNum">    1120 </span>            : /* file descriptor array accessors */
<span class="lineNum">    1121 </span><span class="lineCov">      13683 : void ast_channel_internal_fd_set(struct ast_channel *chan, int which, int value)</span>
<span class="lineNum">    1122 </span>            : {
<span class="lineNum">    1123 </span>            :         int pos;
<span class="lineNum">    1124 </span>            : 
<span class="lineNum">    1125 </span>            :         /* This ensures that if the vector has to grow with unused positions they will be
<span class="lineNum">    1126 </span>            :          * initialized to -1.
<span class="lineNum">    1127 </span>            :          */
<span class="lineNum">    1128 </span><span class="lineCov">      58817 :         for (pos = AST_VECTOR_SIZE(&amp;chan-&gt;fds); pos &lt; which; pos++) {</span>
<span class="lineNum">    1129 </span><span class="lineCov">      45134 :                 AST_VECTOR_REPLACE(&amp;chan-&gt;fds, pos, -1);</span>
<span class="lineNum">    1130 </span>            :         }
<span class="lineNum">    1131 </span>            : 
<a name="1132"><span class="lineNum">    1132 </span><span class="lineCov">      13683 :         AST_VECTOR_REPLACE(&amp;chan-&gt;fds, which, value);</span></a>
<span class="lineNum">    1133 </span><span class="lineCov">      13683 : }</span>
<span class="lineNum">    1134 </span><span class="lineCov">        231 : void ast_channel_internal_fd_clear(struct ast_channel *chan, int which)</span>
<span class="lineNum">    1135 </span>            : {
<span class="lineNum">    1136 </span><span class="lineCov">        231 :         if (which &gt;= AST_VECTOR_SIZE(&amp;chan-&gt;fds)) {</span>
<span class="lineNum">    1137 </span><span class="lineNoCov">          0 :                 return;</span>
<span class="lineNum">    1138 </span>            :         }
<span class="lineNum">    1139 </span>            : 
<a name="1140"><span class="lineNum">    1140 </span><span class="lineCov">        231 :         AST_VECTOR_REPLACE(&amp;chan-&gt;fds, which, -1);</span></a>
<span class="lineNum">    1141 </span>            : }
<span class="lineNum">    1142 </span><span class="lineCov">      28479 : void ast_channel_internal_fd_clear_all(struct ast_channel *chan)</span>
<span class="lineNum">    1143 </span>            : {
<a name="1144"><span class="lineNum">    1144 </span><span class="lineCov">      28843 :         AST_VECTOR_RESET(&amp;chan-&gt;fds, AST_VECTOR_ELEM_CLEANUP_NOOP);</span></a>
<span class="lineNum">    1145 </span><span class="lineCov">      28479 : }</span>
<span class="lineNum">    1146 </span><span class="lineCov">   43365746 : int ast_channel_fd(const struct ast_channel *chan, int which)</span>
<span class="lineNum">    1147 </span>            : {
<a name="1148"><span class="lineNum">    1148 </span><span class="lineCov">   43365746 :         return (which &gt;= AST_VECTOR_SIZE(&amp;chan-&gt;fds)) ? -1 : AST_VECTOR_GET(&amp;chan-&gt;fds, which);</span></a>
<span class="lineNum">    1149 </span>            : }
<span class="lineNum">    1150 </span><span class="lineCov">    5070551 : int ast_channel_fd_isset(const struct ast_channel *chan, int which)</span>
<span class="lineNum">    1151 </span>            : {
<span class="lineNum">    1152 </span><span class="lineCov">    5070551 :         return ast_channel_fd(chan, which) &gt; -1;</span>
<a name="1153"><span class="lineNum">    1153 </span>            : }</a>
<span class="lineNum">    1154 </span>            : 
<span class="lineNum">    1155 </span><span class="lineCov">   44715869 : int ast_channel_fd_count(const struct ast_channel *chan)</span>
<span class="lineNum">    1156 </span>            : {
<span class="lineNum">    1157 </span><span class="lineCov">   44715869 :         return AST_VECTOR_SIZE(&amp;chan-&gt;fds);</span>
<a name="1158"><span class="lineNum">    1158 </span>            : }</a>
<span class="lineNum">    1159 </span>            : 
<span class="lineNum">    1160 </span><span class="lineCov">          1 : int ast_channel_fd_add(struct ast_channel *chan, int value)</span>
<span class="lineNum">    1161 </span>            : {
<span class="lineNum">    1162 </span><span class="lineCov">          1 :         int pos = AST_EXTENDED_FDS;</span>
<span class="lineNum">    1163 </span>            : 
<span class="lineNum">    1164 </span><span class="lineCov">          1 :         while (ast_channel_fd_isset(chan, pos)) {</span>
<span class="lineNum">    1165 </span><span class="lineNoCov">          0 :                 pos += 1;</span>
<span class="lineNum">    1166 </span>            :         }
<span class="lineNum">    1167 </span>            : 
<span class="lineNum">    1168 </span><span class="lineCov">          1 :         AST_VECTOR_REPLACE(&amp;chan-&gt;fds, pos, value);</span>
<span class="lineNum">    1169 </span>            : 
<span class="lineNum">    1170 </span><span class="lineCov">          1 :         return pos;</span>
<a name="1171"><span class="lineNum">    1171 </span>            : }</a>
<span class="lineNum">    1172 </span>            : 
<span class="lineNum">    1173 </span><span class="lineCov">        732 : pthread_t ast_channel_blocker(const struct ast_channel *chan)</span>
<span class="lineNum">    1174 </span>            : {
<a name="1175"><span class="lineNum">    1175 </span><span class="lineCov">        732 :         return chan-&gt;blocker;</span></a>
<span class="lineNum">    1176 </span>            : }
<span class="lineNum">    1177 </span><span class="lineCov">    3696603 : void ast_channel_blocker_set(struct ast_channel *chan, pthread_t value)</span>
<span class="lineNum">    1178 </span>            : {
<span class="lineNum">    1179 </span><span class="lineCov">    3696603 :         chan-&gt;blocker = value;</span>
<a name="1180"><span class="lineNum">    1180 </span><span class="lineCov">    3696603 : }</span></a>
<span class="lineNum">    1181 </span>            : 
<span class="lineNum">    1182 </span><span class="lineNoCov">          0 : int ast_channel_blocker_tid(const struct ast_channel *chan)</span>
<span class="lineNum">    1183 </span>            : {
<a name="1184"><span class="lineNum">    1184 </span><span class="lineNoCov">          0 :         return chan-&gt;blocker_tid;</span></a>
<span class="lineNum">    1185 </span>            : }
<span class="lineNum">    1186 </span><span class="lineCov">    3696603 : void ast_channel_blocker_tid_set(struct ast_channel *chan, int value)</span>
<span class="lineNum">    1187 </span>            : {
<span class="lineNum">    1188 </span><span class="lineCov">    3696603 :         chan-&gt;blocker_tid = value;</span>
<a name="1189"><span class="lineNum">    1189 </span><span class="lineCov">    3696603 : }</span></a>
<span class="lineNum">    1190 </span>            : 
<span class="lineNum">    1191 </span><span class="lineCov">     848730 : ast_timing_func_t ast_channel_timingfunc(const struct ast_channel *chan)</span>
<span class="lineNum">    1192 </span>            : {
<a name="1193"><span class="lineNum">    1193 </span><span class="lineCov">     848730 :         return chan-&gt;timingfunc;</span></a>
<span class="lineNum">    1194 </span>            : }
<span class="lineNum">    1195 </span><span class="lineCov">       8853 : void ast_channel_timingfunc_set(struct ast_channel *chan, ast_timing_func_t value)</span>
<span class="lineNum">    1196 </span>            : {
<span class="lineNum">    1197 </span><span class="lineCov">       8853 :         chan-&gt;timingfunc = value;</span>
<a name="1198"><span class="lineNum">    1198 </span><span class="lineCov">       8853 : }</span></a>
<span class="lineNum">    1199 </span>            : 
<span class="lineNum">    1200 </span><span class="lineCov">     124039 : struct ast_bridge *ast_channel_internal_bridge(const struct ast_channel *chan)</span>
<span class="lineNum">    1201 </span>            : {
<a name="1202"><span class="lineNum">    1202 </span><span class="lineCov">     124039 :         return chan-&gt;bridge;</span></a>
<span class="lineNum">    1203 </span>            : }
<span class="lineNum">    1204 </span><span class="lineCov">       3689 : void ast_channel_internal_bridge_set(struct ast_channel *chan, struct ast_bridge *value)</span>
<span class="lineNum">    1205 </span>            : {
<span class="lineNum">    1206 </span><span class="lineCov">       3689 :         chan-&gt;bridge = value;</span>
<span class="lineNum">    1207 </span><span class="lineCov">       3689 :         ast_channel_publish_snapshot(chan);</span>
<a name="1208"><span class="lineNum">    1208 </span><span class="lineCov">       3689 : }</span></a>
<span class="lineNum">    1209 </span>            : 
<span class="lineNum">    1210 </span><span class="lineCov">     117665 : struct ast_bridge_channel *ast_channel_internal_bridge_channel(const struct ast_channel *chan)</span>
<span class="lineNum">    1211 </span>            : {
<a name="1212"><span class="lineNum">    1212 </span><span class="lineCov">     117665 :         return chan-&gt;bridge_channel;</span></a>
<span class="lineNum">    1213 </span>            : }
<span class="lineNum">    1214 </span><span class="lineCov">       3408 : void ast_channel_internal_bridge_channel_set(struct ast_channel *chan, struct ast_bridge_channel *value)</span>
<span class="lineNum">    1215 </span>            : {
<span class="lineNum">    1216 </span><span class="lineCov">       3408 :         chan-&gt;bridge_channel = value;</span>
<a name="1217"><span class="lineNum">    1217 </span><span class="lineCov">       3408 : }</span></a>
<span class="lineNum">    1218 </span>            : 
<span class="lineNum">    1219 </span><span class="lineCov">   50149846 : struct ast_flags *ast_channel_flags(struct ast_channel *chan)</span>
<span class="lineNum">    1220 </span>            : {
<span class="lineNum">    1221 </span><span class="lineCov">   50149846 :         return &amp;chan-&gt;flags;</span>
<a name="1222"><span class="lineNum">    1222 </span>            : }</a>
<span class="lineNum">    1223 </span>            : 
<span class="lineNum">    1224 </span><span class="lineCov">         41 : static int collect_names_cb(void *obj, void *arg, int flags) {</span>
<span class="lineNum">    1225 </span><span class="lineCov">         41 :         struct ast_control_pvt_cause_code *cause_code = obj;</span>
<span class="lineNum">    1226 </span><span class="lineCov">         41 :         struct ast_str **str = arg;</span>
<span class="lineNum">    1227 </span>            : 
<span class="lineNum">    1228 </span><span class="lineCov">         41 :         ast_str_append(str, 0, &quot;%s%s&quot;, (ast_str_strlen(*str) ? &quot;,&quot; : &quot;&quot;), cause_code-&gt;chan_name);</span>
<span class="lineNum">    1229 </span>            : 
<span class="lineNum">    1230 </span><span class="lineCov">         41 :         return 0;</span>
<a name="1231"><span class="lineNum">    1231 </span>            : }</a>
<span class="lineNum">    1232 </span>            : 
<span class="lineNum">    1233 </span><span class="lineCov">         34 : struct ast_str *ast_channel_dialed_causes_channels(const struct ast_channel *chan)</span>
<span class="lineNum">    1234 </span>            : {
<span class="lineNum">    1235 </span><span class="lineCov">         34 :         struct ast_str *chanlist = ast_str_create(128);</span>
<span class="lineNum">    1236 </span>            : 
<span class="lineNum">    1237 </span><span class="lineCov">         34 :         if (!chanlist) {</span>
<span class="lineNum">    1238 </span><span class="lineNoCov">          0 :                 return NULL;</span>
<span class="lineNum">    1239 </span>            :         }
<span class="lineNum">    1240 </span>            : 
<span class="lineNum">    1241 </span><span class="lineCov">         34 :         ao2_callback(chan-&gt;dialed_causes, 0, collect_names_cb, &amp;chanlist);</span>
<span class="lineNum">    1242 </span>            : 
<span class="lineNum">    1243 </span><span class="lineCov">         34 :         return chanlist;</span>
<a name="1244"><span class="lineNum">    1244 </span>            : }</a>
<span class="lineNum">    1245 </span>            : 
<span class="lineNum">    1246 </span><span class="lineCov">         68 : struct ast_control_pvt_cause_code *ast_channel_dialed_causes_find(const struct ast_channel *chan, const char *chan_name)</span>
<span class="lineNum">    1247 </span>            : {
<span class="lineNum">    1248 </span><span class="lineCov">         68 :         return ao2_find(chan-&gt;dialed_causes, chan_name, OBJ_KEY);</span>
<a name="1249"><span class="lineNum">    1249 </span>            : }</a>
<span class="lineNum">    1250 </span>            : 
<span class="lineNum">    1251 </span><span class="lineCov">       3715 : int ast_channel_dialed_causes_add(const struct ast_channel *chan, const struct ast_control_pvt_cause_code *cause_code, int datalen)</span>
<span class="lineNum">    1252 </span>            : {
<span class="lineNum">    1253 </span>            :         struct ast_control_pvt_cause_code *ao2_cause_code;
<span class="lineNum">    1254 </span><span class="lineCov">       3715 :         ao2_find(chan-&gt;dialed_causes, cause_code-&gt;chan_name, OBJ_KEY | OBJ_UNLINK | OBJ_NODATA);</span>
<span class="lineNum">    1255 </span><span class="lineCov">       3715 :         ao2_cause_code = ao2_alloc(datalen, NULL);</span>
<span class="lineNum">    1256 </span>            : 
<span class="lineNum">    1257 </span><span class="lineCov">       3715 :         if (ao2_cause_code) {</span>
<span class="lineNum">    1258 </span><span class="lineCov">       3715 :                 memcpy(ao2_cause_code, cause_code, datalen);</span>
<span class="lineNum">    1259 </span><span class="lineCov">       3715 :                 ao2_link(chan-&gt;dialed_causes, ao2_cause_code);</span>
<span class="lineNum">    1260 </span><span class="lineCov">       3715 :                 ao2_ref(ao2_cause_code, -1);</span>
<span class="lineNum">    1261 </span><span class="lineCov">       3715 :                 return 0;</span>
<span class="lineNum">    1262 </span>            :         } else {
<span class="lineNum">    1263 </span><span class="lineNoCov">          0 :                 return -1;</span>
<span class="lineNum">    1264 </span>            :         }
<a name="1265"><span class="lineNum">    1265 </span>            : }</a>
<span class="lineNum">    1266 </span>            : 
<span class="lineNum">    1267 </span><span class="lineNoCov">          0 : void ast_channel_dialed_causes_clear(const struct ast_channel *chan)</span>
<span class="lineNum">    1268 </span>            : {
<span class="lineNum">    1269 </span><span class="lineNoCov">          0 :         ao2_callback(chan-&gt;dialed_causes, OBJ_UNLINK | OBJ_NODATA | OBJ_MULTIPLE, NULL, NULL);</span>
<span class="lineNum">    1270 </span><span class="lineNoCov">          0 : }</span>
<a name="1271"><span class="lineNum">    1271 </span>            : </a>
<span class="lineNum">    1272 </span>            : /* \brief Hash function for pvt cause code frames */
<span class="lineNum">    1273 </span><span class="lineCov">       7498 : static int pvt_cause_hash_fn(const void *vpc, const int flags)</span>
<span class="lineNum">    1274 </span>            : {
<span class="lineNum">    1275 </span><span class="lineCov">       7498 :         const struct ast_control_pvt_cause_code *pc = vpc;</span>
<span class="lineNum">    1276 </span><span class="lineCov">       7498 :         return ast_str_hash(ast_tech_to_upper(ast_strdupa(pc-&gt;chan_name)));</span>
<span class="lineNum">    1277 </span>            : }
<a name="1278"><span class="lineNum">    1278 </span>            : </a>
<span class="lineNum">    1279 </span>            : /* \brief Comparison function for pvt cause code frames */
<span class="lineNum">    1280 </span><span class="lineCov">       2340 : static int pvt_cause_cmp_fn(void *obj, void *vstr, int flags)</span>
<span class="lineNum">    1281 </span>            : {
<span class="lineNum">    1282 </span><span class="lineCov">       2340 :         struct ast_control_pvt_cause_code *pc = obj;</span>
<span class="lineNum">    1283 </span><span class="lineCov">       2340 :         char *str = ast_tech_to_upper(ast_strdupa(vstr));</span>
<span class="lineNum">    1284 </span><span class="lineCov">       2340 :         char *pc_str = ast_tech_to_upper(ast_strdupa(pc-&gt;chan_name));</span>
<span class="lineNum">    1285 </span><span class="lineCov">       2340 :         return !strcmp(pc_str, str) ? CMP_MATCH | CMP_STOP : 0;</span>
<span class="lineNum">    1286 </span>            : }
<span class="lineNum">    1287 </span>            : 
<a name="1288"><span class="lineNum">    1288 </span>            : #define DIALED_CAUSES_BUCKETS 37</a>
<span class="lineNum">    1289 </span>            : 
<span class="lineNum">    1290 </span><span class="lineCov">      28447 : struct ast_channel *__ast_channel_internal_alloc(void (*destructor)(void *obj), const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *file, int line, const char *function)</span>
<span class="lineNum">    1291 </span>            : {
<span class="lineNum">    1292 </span>            :         struct ast_channel *tmp;
<span class="lineNum">    1293 </span>            : 
<span class="lineNum">    1294 </span><span class="lineCov">      28447 :         tmp = __ao2_alloc(sizeof(*tmp), destructor,</span>
<span class="lineNum">    1295 </span>            :                 AO2_ALLOC_OPT_LOCK_MUTEX, &quot;&quot;, file, line, function);
<span class="lineNum">    1296 </span>            : 
<span class="lineNum">    1297 </span><span class="lineCov">      28447 :         if (!tmp) {</span>
<span class="lineNum">    1298 </span><span class="lineNoCov">          0 :                 return NULL;</span>
<span class="lineNum">    1299 </span>            :         }
<span class="lineNum">    1300 </span>            : 
<span class="lineNum">    1301 </span><span class="lineCov">      28447 :         if ((ast_string_field_init(tmp, 128))) {</span>
<span class="lineNum">    1302 </span><span class="lineNoCov">          0 :                 return ast_channel_unref(tmp);</span>
<span class="lineNum">    1303 </span>            :         }
<span class="lineNum">    1304 </span>            : 
<span class="lineNum">    1305 </span><span class="lineCov">      28447 :         if (!(tmp-&gt;dialed_causes = ao2_container_alloc(DIALED_CAUSES_BUCKETS, pvt_cause_hash_fn, pvt_cause_cmp_fn))) {</span>
<span class="lineNum">    1306 </span><span class="lineNoCov">          0 :                 return ast_channel_unref(tmp);</span>
<span class="lineNum">    1307 </span>            :         }
<span class="lineNum">    1308 </span>            : 
<span class="lineNum">    1309 </span>            :         /* set the creation time in the uniqueid */
<span class="lineNum">    1310 </span><span class="lineCov">      28447 :         tmp-&gt;uniqueid.creation_time = time(NULL);</span>
<span class="lineNum">    1311 </span><span class="lineCov">      28447 :         tmp-&gt;uniqueid.creation_unique = ast_atomic_fetchadd_int(&amp;uniqueint, 1);</span>
<span class="lineNum">    1312 </span>            : 
<span class="lineNum">    1313 </span>            :         /* use provided id or default to historical {system-}time.# format */
<span class="lineNum">    1314 </span><span class="lineCov">      28447 :         if (assignedids &amp;&amp; !ast_strlen_zero(assignedids-&gt;uniqueid)) {</span>
<span class="lineNum">    1315 </span><span class="lineCov">        210 :                 ast_copy_string(tmp-&gt;uniqueid.unique_id, assignedids-&gt;uniqueid, sizeof(tmp-&gt;uniqueid.unique_id));</span>
<span class="lineNum">    1316 </span><span class="lineCov">      28237 :         } else if (ast_strlen_zero(ast_config_AST_SYSTEM_NAME)) {</span>
<span class="lineNum">    1317 </span><span class="lineCov">      56474 :                 snprintf(tmp-&gt;uniqueid.unique_id, sizeof(tmp-&gt;uniqueid.unique_id), &quot;%li.%d&quot;,</span>
<span class="lineNum">    1318 </span><span class="lineCov">      28237 :                         (long)(tmp-&gt;uniqueid.creation_time),</span>
<span class="lineNum">    1319 </span>            :                         tmp-&gt;uniqueid.creation_unique);
<span class="lineNum">    1320 </span>            :         } else {
<span class="lineNum">    1321 </span><span class="lineNoCov">          0 :                 snprintf(tmp-&gt;uniqueid.unique_id, sizeof(tmp-&gt;uniqueid.unique_id), &quot;%s-%li.%d&quot;,</span>
<span class="lineNum">    1322 </span>            :                         ast_config_AST_SYSTEM_NAME,
<span class="lineNum">    1323 </span><span class="lineNoCov">          0 :                         (long)(tmp-&gt;uniqueid.creation_time),</span>
<span class="lineNum">    1324 </span>            :                         tmp-&gt;uniqueid.creation_unique);
<span class="lineNum">    1325 </span>            :         }
<span class="lineNum">    1326 </span>            : 
<span class="lineNum">    1327 </span>            :         /* copy linked id from parent channel if known */
<span class="lineNum">    1328 </span><span class="lineCov">      28447 :         if (requestor) {</span>
<span class="lineNum">    1329 </span><span class="lineCov">       2210 :                 tmp-&gt;linkedid = requestor-&gt;linkedid;</span>
<span class="lineNum">    1330 </span>            :         } else {
<span class="lineNum">    1331 </span><span class="lineCov">      26237 :                 tmp-&gt;linkedid = tmp-&gt;uniqueid;</span>
<span class="lineNum">    1332 </span>            :         }
<span class="lineNum">    1333 </span>            : 
<span class="lineNum">    1334 </span><span class="lineCov">      28447 :         AST_VECTOR_INIT(&amp;tmp-&gt;fds, AST_MAX_FDS);</span>
<span class="lineNum">    1335 </span>            : 
<span class="lineNum">    1336 </span><span class="lineCov">      28447 :         return tmp;</span>
<a name="1337"><span class="lineNum">    1337 </span>            : }</a>
<span class="lineNum">    1338 </span>            : 
<span class="lineNum">    1339 </span><span class="lineCov">       1024 : struct ast_channel *ast_channel_internal_oldest_linkedid(struct ast_channel *a, struct ast_channel *b)</span>
<span class="lineNum">    1340 </span>            : {
<span class="lineNum">    1341 </span><span class="lineCov">       1024 :         ast_assert(a-&gt;linkedid.creation_time != 0);</span>
<span class="lineNum">    1342 </span><span class="lineCov">       1024 :         ast_assert(b-&gt;linkedid.creation_time != 0);</span>
<span class="lineNum">    1343 </span>            : 
<span class="lineNum">    1344 </span><span class="lineCov">       1024 :         if (a-&gt;linkedid.creation_time &lt; b-&gt;linkedid.creation_time) {</span>
<span class="lineNum">    1345 </span><span class="lineCov">          6 :                 return a;</span>
<span class="lineNum">    1346 </span>            :         }
<span class="lineNum">    1347 </span><span class="lineCov">       1018 :         if (b-&gt;linkedid.creation_time &lt; a-&gt;linkedid.creation_time) {</span>
<span class="lineNum">    1348 </span><span class="lineCov">         13 :                 return b;</span>
<span class="lineNum">    1349 </span>            :         }
<span class="lineNum">    1350 </span><span class="lineCov">       1005 :         if (a-&gt;linkedid.creation_unique &lt; b-&gt;linkedid.creation_unique) {</span>
<span class="lineNum">    1351 </span><span class="lineCov">         23 :                 return a;</span>
<span class="lineNum">    1352 </span>            :         }
<span class="lineNum">    1353 </span><span class="lineCov">        982 :         return b;</span>
<a name="1354"><span class="lineNum">    1354 </span>            : }</a>
<span class="lineNum">    1355 </span>            : 
<span class="lineNum">    1356 </span><span class="lineCov">       2807 : void ast_channel_internal_copy_linkedid(struct ast_channel *dest, struct ast_channel *source)</span>
<span class="lineNum">    1357 </span>            : {
<span class="lineNum">    1358 </span><span class="lineCov">       2807 :         if (dest-&gt;linkedid.creation_time == source-&gt;linkedid.creation_time</span>
<span class="lineNum">    1359 </span><span class="lineCov">       2788 :                 &amp;&amp; dest-&gt;linkedid.creation_unique == source-&gt;linkedid.creation_unique</span>
<span class="lineNum">    1360 </span><span class="lineCov">       2722 :                 &amp;&amp; !strcmp(dest-&gt;linkedid.unique_id, source-&gt;linkedid.unique_id)) {</span>
<span class="lineNum">    1361 </span><span class="lineCov">       2722 :                 return;</span>
<span class="lineNum">    1362 </span>            :         }
<span class="lineNum">    1363 </span><span class="lineCov">         85 :         dest-&gt;linkedid = source-&gt;linkedid;</span>
<span class="lineNum">    1364 </span><span class="lineCov">         85 :         ast_channel_publish_snapshot(dest);</span>
<a name="1365"><span class="lineNum">    1365 </span>            : }</a>
<span class="lineNum">    1366 </span>            : 
<span class="lineNum">    1367 </span><span class="lineCov">         32 : void ast_channel_internal_swap_uniqueid_and_linkedid(struct ast_channel *a, struct ast_channel *b)</span>
<span class="lineNum">    1368 </span>            : {
<span class="lineNum">    1369 </span>            :         struct ast_channel_id temp;
<span class="lineNum">    1370 </span>            : 
<span class="lineNum">    1371 </span><span class="lineCov">         32 :         temp = a-&gt;uniqueid;</span>
<span class="lineNum">    1372 </span><span class="lineCov">         32 :         a-&gt;uniqueid = b-&gt;uniqueid;</span>
<span class="lineNum">    1373 </span><span class="lineCov">         32 :         b-&gt;uniqueid = temp;</span>
<span class="lineNum">    1374 </span>            : 
<span class="lineNum">    1375 </span><span class="lineCov">         32 :         temp = a-&gt;linkedid;</span>
<span class="lineNum">    1376 </span><span class="lineCov">         32 :         a-&gt;linkedid = b-&gt;linkedid;</span>
<span class="lineNum">    1377 </span><span class="lineCov">         32 :         b-&gt;linkedid = temp;</span>
<a name="1378"><span class="lineNum">    1378 </span><span class="lineCov">         32 : }</span></a>
<span class="lineNum">    1379 </span>            : 
<span class="lineNum">    1380 </span><span class="lineCov">         32 : void ast_channel_internal_swap_topics(struct ast_channel *a, struct ast_channel *b)</span>
<span class="lineNum">    1381 </span>            : {
<span class="lineNum">    1382 </span>            :         struct stasis_cp_single *temp;
<span class="lineNum">    1383 </span>            : 
<span class="lineNum">    1384 </span><span class="lineCov">         32 :         temp = a-&gt;topics;</span>
<span class="lineNum">    1385 </span><span class="lineCov">         32 :         a-&gt;topics = b-&gt;topics;</span>
<span class="lineNum">    1386 </span><span class="lineCov">         32 :         b-&gt;topics = temp;</span>
<a name="1387"><span class="lineNum">    1387 </span><span class="lineCov">         32 : }</span></a>
<span class="lineNum">    1388 </span>            : 
<span class="lineNum">    1389 </span><span class="lineCov">      24020 : void ast_channel_internal_set_fake_ids(struct ast_channel *chan, const char *uniqueid, const char *linkedid)</span>
<span class="lineNum">    1390 </span>            : {
<span class="lineNum">    1391 </span><span class="lineCov">      24020 :         ast_copy_string(chan-&gt;uniqueid.unique_id, uniqueid, sizeof(chan-&gt;uniqueid.unique_id));</span>
<span class="lineNum">    1392 </span><span class="lineCov">      24020 :         ast_copy_string(chan-&gt;linkedid.unique_id, linkedid, sizeof(chan-&gt;linkedid.unique_id));</span>
<a name="1393"><span class="lineNum">    1393 </span><span class="lineCov">      24020 : }</span></a>
<span class="lineNum">    1394 </span>            : 
<span class="lineNum">    1395 </span><span class="lineCov">      28446 : void ast_channel_internal_cleanup(struct ast_channel *chan)</span>
<span class="lineNum">    1396 </span>            : {
<span class="lineNum">    1397 </span><span class="lineCov">      28446 :         if (chan-&gt;dialed_causes) {</span>
<span class="lineNum">    1398 </span><span class="lineCov">      28446 :                 ao2_t_ref(chan-&gt;dialed_causes, -1,</span>
<span class="lineNum">    1399 </span>            :                         &quot;done with dialed causes since the channel is going away&quot;);
<span class="lineNum">    1400 </span><span class="lineCov">      28446 :                 chan-&gt;dialed_causes = NULL;</span>
<span class="lineNum">    1401 </span>            :         }
<span class="lineNum">    1402 </span>            : 
<span class="lineNum">    1403 </span><span class="lineCov">      28446 :         ast_string_field_free_memory(chan);</span>
<span class="lineNum">    1404 </span>            : 
<span class="lineNum">    1405 </span><span class="lineCov">      28446 :         chan-&gt;endpoint_forward = stasis_forward_cancel(chan-&gt;endpoint_forward);</span>
<span class="lineNum">    1406 </span><span class="lineCov">      28446 :         chan-&gt;endpoint_cache_forward = stasis_forward_cancel(chan-&gt;endpoint_cache_forward);</span>
<span class="lineNum">    1407 </span>            : 
<span class="lineNum">    1408 </span><span class="lineCov">      28446 :         stasis_cp_single_unsubscribe(chan-&gt;topics);</span>
<span class="lineNum">    1409 </span><span class="lineCov">      28446 :         chan-&gt;topics = NULL;</span>
<span class="lineNum">    1410 </span>            : 
<span class="lineNum">    1411 </span><span class="lineCov">      28446 :         ast_channel_internal_set_stream_topology(chan, NULL);</span>
<span class="lineNum">    1412 </span>            : 
<span class="lineNum">    1413 </span><span class="lineCov">      28446 :         AST_VECTOR_FREE(&amp;chan-&gt;fds);</span>
<a name="1414"><span class="lineNum">    1414 </span><span class="lineCov">      28446 : }</span></a>
<span class="lineNum">    1415 </span>            : 
<span class="lineNum">    1416 </span><span class="lineCov">       4406 : void ast_channel_internal_finalize(struct ast_channel *chan)</span>
<span class="lineNum">    1417 </span>            : {
<span class="lineNum">    1418 </span><span class="lineCov">       4406 :         chan-&gt;finalized = 1;</span>
<a name="1419"><span class="lineNum">    1419 </span><span class="lineCov">       4406 : }</span></a>
<span class="lineNum">    1420 </span>            : 
<span class="lineNum">    1421 </span><span class="lineCov">      14704 : int ast_channel_internal_is_finalized(struct ast_channel *chan)</span>
<span class="lineNum">    1422 </span>            : {
<span class="lineNum">    1423 </span><span class="lineCov">      14704 :         return chan-&gt;finalized;</span>
<a name="1424"><span class="lineNum">    1424 </span>            : }</a>
<span class="lineNum">    1425 </span>            : 
<span class="lineNum">    1426 </span><span class="lineCov">     154071 : struct stasis_topic *ast_channel_topic(struct ast_channel *chan)</span>
<span class="lineNum">    1427 </span>            : {
<span class="lineNum">    1428 </span><span class="lineCov">     154071 :         if (!chan) {</span>
<span class="lineNum">    1429 </span><span class="lineCov">        927 :                 return ast_channel_topic_all();</span>
<span class="lineNum">    1430 </span>            :         }
<span class="lineNum">    1431 </span>            : 
<span class="lineNum">    1432 </span><span class="lineCov">     153144 :         return stasis_cp_single_topic(chan-&gt;topics);</span>
<a name="1433"><span class="lineNum">    1433 </span>            : }</a>
<span class="lineNum">    1434 </span>            : 
<span class="lineNum">    1435 </span><span class="lineCov">       1985 : struct stasis_topic *ast_channel_topic_cached(struct ast_channel *chan)</span>
<span class="lineNum">    1436 </span>            : {
<span class="lineNum">    1437 </span><span class="lineCov">       1985 :         if (!chan) {</span>
<span class="lineNum">    1438 </span><span class="lineNoCov">          0 :                 return ast_channel_topic_all_cached();</span>
<span class="lineNum">    1439 </span>            :         }
<span class="lineNum">    1440 </span>            : 
<span class="lineNum">    1441 </span><span class="lineCov">       1985 :         return stasis_cp_single_topic_cached(chan-&gt;topics);</span>
<a name="1442"><span class="lineNum">    1442 </span>            : }</a>
<span class="lineNum">    1443 </span>            : 
<span class="lineNum">    1444 </span><span class="lineCov">       1622 : int ast_channel_forward_endpoint(struct ast_channel *chan,</span>
<span class="lineNum">    1445 </span>            :         struct ast_endpoint *endpoint)
<span class="lineNum">    1446 </span>            : {
<span class="lineNum">    1447 </span><span class="lineCov">       1622 :         ast_assert(chan != NULL);</span>
<span class="lineNum">    1448 </span><span class="lineCov">       1622 :         ast_assert(endpoint != NULL);</span>
<span class="lineNum">    1449 </span>            : 
<span class="lineNum">    1450 </span><span class="lineCov">       1622 :         chan-&gt;endpoint_forward =</span>
<span class="lineNum">    1451 </span><span class="lineCov">       1622 :                 stasis_forward_all(ast_channel_topic(chan),</span>
<span class="lineNum">    1452 </span>            :                         ast_endpoint_topic(endpoint));
<span class="lineNum">    1453 </span><span class="lineCov">       1622 :         if (!chan-&gt;endpoint_forward) {</span>
<span class="lineNum">    1454 </span><span class="lineNoCov">          0 :                 return -1;</span>
<span class="lineNum">    1455 </span>            :         }
<span class="lineNum">    1456 </span>            : 
<span class="lineNum">    1457 </span><span class="lineCov">       1622 :         chan-&gt;endpoint_cache_forward = stasis_forward_all(ast_channel_topic_cached(chan),</span>
<span class="lineNum">    1458 </span>            :                 ast_endpoint_topic(endpoint));
<span class="lineNum">    1459 </span><span class="lineCov">       1622 :         if (!chan-&gt;endpoint_cache_forward) {</span>
<span class="lineNum">    1460 </span><span class="lineNoCov">          0 :                 chan-&gt;endpoint_forward = stasis_forward_cancel(chan-&gt;endpoint_forward);</span>
<span class="lineNum">    1461 </span><span class="lineNoCov">          0 :                 return -1;</span>
<span class="lineNum">    1462 </span>            :         }
<span class="lineNum">    1463 </span>            : 
<span class="lineNum">    1464 </span><span class="lineCov">       1622 :         return 0;</span>
<a name="1465"><span class="lineNum">    1465 </span>            : }</a>
<span class="lineNum">    1466 </span>            : 
<span class="lineNum">    1467 </span><span class="lineCov">      28447 : int ast_channel_internal_setup_topics(struct ast_channel *chan)</span>
<span class="lineNum">    1468 </span>            : {
<span class="lineNum">    1469 </span><span class="lineCov">      28447 :         const char *topic_name = chan-&gt;uniqueid.unique_id;</span>
<span class="lineNum">    1470 </span><span class="lineCov">      28447 :         ast_assert(chan-&gt;topics == NULL);</span>
<span class="lineNum">    1471 </span>            : 
<span class="lineNum">    1472 </span><span class="lineCov">      28447 :         if (ast_strlen_zero(topic_name)) {</span>
<span class="lineNum">    1473 </span><span class="lineNoCov">          0 :                 topic_name = &quot;&lt;dummy-channel&gt;&quot;;</span>
<span class="lineNum">    1474 </span>            :         }
<span class="lineNum">    1475 </span>            : 
<span class="lineNum">    1476 </span><span class="lineCov">      28447 :         chan-&gt;topics = stasis_cp_single_create(</span>
<span class="lineNum">    1477 </span>            :                 ast_channel_cache_all(), topic_name);
<span class="lineNum">    1478 </span><span class="lineCov">      28447 :         if (!chan-&gt;topics) {</span>
<span class="lineNum">    1479 </span><span class="lineNoCov">          0 :                 return -1;</span>
<span class="lineNum">    1480 </span>            :         }
<span class="lineNum">    1481 </span>            : 
<span class="lineNum">    1482 </span><span class="lineCov">      28447 :         return 0;</span>
<a name="1483"><span class="lineNum">    1483 </span>            : }</a>
<span class="lineNum">    1484 </span>            : 
<a name="1485"><span class="lineNum">    1485 </span><span class="lineNoCov">          0 : AST_THREADSTORAGE(channel_errno);</span></a>
<span class="lineNum">    1486 </span>            : 
<span class="lineNum">    1487 </span><span class="lineNoCov">          0 : void ast_channel_internal_errno_set(enum ast_channel_error error)</span>
<span class="lineNum">    1488 </span>            : {
<span class="lineNum">    1489 </span><span class="lineNoCov">          0 :         enum ast_channel_error *error_code = ast_threadstorage_get(&amp;channel_errno, sizeof(*error_code));</span>
<span class="lineNum">    1490 </span><span class="lineNoCov">          0 :         if (!error_code) {</span>
<span class="lineNum">    1491 </span><span class="lineNoCov">          0 :                 return;</span>
<span class="lineNum">    1492 </span>            :         }
<span class="lineNum">    1493 </span>            : 
<span class="lineNum">    1494 </span><span class="lineNoCov">          0 :         *error_code = error;</span>
<a name="1495"><span class="lineNum">    1495 </span>            : }</a>
<span class="lineNum">    1496 </span>            : 
<span class="lineNum">    1497 </span><span class="lineNoCov">          0 : enum ast_channel_error ast_channel_internal_errno(void)</span>
<span class="lineNum">    1498 </span>            : {
<span class="lineNum">    1499 </span><span class="lineNoCov">          0 :         enum ast_channel_error *error_code = ast_threadstorage_get(&amp;channel_errno, sizeof(*error_code));</span>
<span class="lineNum">    1500 </span><span class="lineNoCov">          0 :         if (!error_code) {</span>
<span class="lineNum">    1501 </span><span class="lineNoCov">          0 :                 return AST_CHANNEL_ERROR_UNKNOWN;</span>
<span class="lineNum">    1502 </span>            :         }
<span class="lineNum">    1503 </span>            : 
<span class="lineNum">    1504 </span><span class="lineNoCov">          0 :         return *error_code;</span>
<a name="1505"><span class="lineNum">    1505 </span>            : }</a>
<span class="lineNum">    1506 </span>            : 
<span class="lineNum">    1507 </span><span class="lineCov">     234178 : struct ast_stream_topology *ast_channel_get_stream_topology(</span>
<span class="lineNum">    1508 </span>            :         const struct ast_channel *chan)
<span class="lineNum">    1509 </span>            : {
<span class="lineNum">    1510 </span><span class="lineCov">     234178 :         ast_assert(chan != NULL);</span>
<span class="lineNum">    1511 </span>            : 
<span class="lineNum">    1512 </span><span class="lineCov">     234178 :         return chan-&gt;stream_topology;</span>
<a name="1513"><span class="lineNum">    1513 </span>            : }</a>
<span class="lineNum">    1514 </span>            : 
<span class="lineNum">    1515 </span><span class="lineCov">       1902 : struct ast_stream_topology *ast_channel_set_stream_topology(struct ast_channel *chan,</span>
<span class="lineNum">    1516 </span>            :         struct ast_stream_topology *topology)
<span class="lineNum">    1517 </span>            : {
<span class="lineNum">    1518 </span>            :         struct ast_stream_topology *new_topology;
<span class="lineNum">    1519 </span>            : 
<span class="lineNum">    1520 </span><span class="lineCov">       1902 :         ast_assert(chan != NULL);</span>
<span class="lineNum">    1521 </span>            : 
<span class="lineNum">    1522 </span>            :         /* A non-MULTISTREAM channel can't manipulate topology directly */
<span class="lineNum">    1523 </span><span class="lineCov">       1902 :         ast_assert(ast_channel_is_multistream(chan));</span>
<span class="lineNum">    1524 </span>            : 
<span class="lineNum">    1525 </span>            :         /* Unless the channel is being destroyed, we always want a topology on
<span class="lineNum">    1526 </span>            :          * it even if its empty.
<span class="lineNum">    1527 </span>            :          */
<span class="lineNum">    1528 </span><span class="lineCov">       1902 :         if (!topology) {</span>
<span class="lineNum">    1529 </span><span class="lineNoCov">          0 :                 new_topology = ast_stream_topology_alloc();</span>
<span class="lineNum">    1530 </span>            :         } else {
<span class="lineNum">    1531 </span><span class="lineCov">       1902 :                 new_topology = topology;</span>
<span class="lineNum">    1532 </span>            :         }
<span class="lineNum">    1533 </span>            : 
<span class="lineNum">    1534 </span><span class="lineCov">       1902 :         if (new_topology) {</span>
<span class="lineNum">    1535 </span><span class="lineCov">       1902 :                 ast_channel_internal_set_stream_topology(chan, new_topology);</span>
<span class="lineNum">    1536 </span>            :         }
<span class="lineNum">    1537 </span>            : 
<span class="lineNum">    1538 </span><span class="lineCov">       1902 :         return new_topology;</span>
<a name="1539"><span class="lineNum">    1539 </span>            : }</a>
<span class="lineNum">    1540 </span>            : 
<span class="lineNum">    1541 </span><span class="lineCov">    1079224 : struct ast_stream *ast_channel_get_default_stream(struct ast_channel *chan,</span>
<span class="lineNum">    1542 </span>            :         enum ast_media_type type)
<span class="lineNum">    1543 </span>            : {
<span class="lineNum">    1544 </span><span class="lineCov">    1079224 :         ast_assert(chan != NULL);</span>
<span class="lineNum">    1545 </span><span class="lineCov">    1079224 :         ast_assert(type &lt; AST_MEDIA_TYPE_END);</span>
<span class="lineNum">    1546 </span>            : 
<span class="lineNum">    1547 </span><span class="lineCov">    1079224 :         return chan-&gt;default_streams[type];</span>
<a name="1548"><span class="lineNum">    1548 </span>            : }</a>
<span class="lineNum">    1549 </span>            : 
<span class="lineNum">    1550 </span><span class="lineCov">         32 : void ast_channel_internal_swap_stream_topology(struct ast_channel *chan1,</span>
<span class="lineNum">    1551 </span>            :         struct ast_channel *chan2)
<span class="lineNum">    1552 </span>            : {
<span class="lineNum">    1553 </span>            :         struct ast_stream_topology *tmp_topology;
<span class="lineNum">    1554 </span>            : 
<span class="lineNum">    1555 </span><span class="lineCov">         32 :         ast_assert(chan1 != NULL &amp;&amp; chan2 != NULL);</span>
<span class="lineNum">    1556 </span>            : 
<span class="lineNum">    1557 </span><span class="lineCov">         32 :         tmp_topology = chan1-&gt;stream_topology;</span>
<span class="lineNum">    1558 </span><span class="lineCov">         32 :         chan1-&gt;stream_topology = chan2-&gt;stream_topology;</span>
<span class="lineNum">    1559 </span><span class="lineCov">         32 :         chan2-&gt;stream_topology = tmp_topology;</span>
<span class="lineNum">    1560 </span>            : 
<span class="lineNum">    1561 </span><span class="lineCov">         32 :         channel_set_default_streams(chan1);</span>
<span class="lineNum">    1562 </span><span class="lineCov">         32 :         channel_set_default_streams(chan2);</span>
<a name="1563"><span class="lineNum">    1563 </span><span class="lineCov">         32 : }</span></a>
<span class="lineNum">    1564 </span>            : 
<span class="lineNum">    1565 </span><span class="lineCov">     873068 : int ast_channel_is_multistream(struct ast_channel *chan)</span>
<span class="lineNum">    1566 </span>            : {
<span class="lineNum">    1567 </span><span class="lineCov">     873068 :         return (chan-&gt;tech &amp;&amp; chan-&gt;tech-&gt;read_stream &amp;&amp; chan-&gt;tech-&gt;write_stream);</span>
<span class="lineNum">    1568 </span>            : }
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.13</a></td></tr>
  </table>
  <br>

</body>
</html>
