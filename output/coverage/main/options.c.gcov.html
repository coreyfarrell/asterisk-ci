<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - Asterisk GIT-16-d8ac5bf1a5 - main/options.c</title>
  <link rel="stylesheet" type="text/css" href="../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../index.html">top level</a> - <a href="index.html">main</a> - options.c<span style="font-size: 80%;"> (source / <a href="options.c.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">Asterisk GIT-16-d8ac5bf1a5</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">101</td>
            <td class="headerCovTableEntry">190</td>
            <td class="headerCovTableEntryLo">53.2 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2018-07-23 21:48:22</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">2</td>
            <td class="headerCovTableEntry">4</td>
            <td class="headerCovTableEntryLo">50.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Legend:</td>
            <td class="headerValueLeg">            Lines:
            <span class="coverLegendCov">hit</span>
            <span class="coverLegendNoCov">not hit</span>
</td>
            <td></td>
          </tr>
          <tr><td><img src="../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : /*</a>
<span class="lineNum">       2 </span>            :  * Asterisk -- An open source telephony toolkit.
<span class="lineNum">       3 </span>            :  *
<span class="lineNum">       4 </span>            :  * Copyright (C) 2018, CFWare, LLC
<span class="lineNum">       5 </span>            :  *
<span class="lineNum">       6 </span>            :  * Corey Farrell &lt;git@cfware.com&gt;
<span class="lineNum">       7 </span>            :  *
<span class="lineNum">       8 </span>            :  * See http://www.asterisk.org for more information about
<span class="lineNum">       9 </span>            :  * the Asterisk project. Please do not directly contact
<span class="lineNum">      10 </span>            :  * any of the maintainers of this project for assistance;
<span class="lineNum">      11 </span>            :  * the project provides a web site, mailing lists and IRC
<span class="lineNum">      12 </span>            :  * channels for your use.
<span class="lineNum">      13 </span>            :  *
<span class="lineNum">      14 </span>            :  * This program is free software, distributed under the terms of
<span class="lineNum">      15 </span>            :  * the GNU General Public License Version 2. See the LICENSE file
<span class="lineNum">      16 </span>            :  * at the top of the source tree.
<span class="lineNum">      17 </span>            :  */
<span class="lineNum">      18 </span>            : 
<span class="lineNum">      19 </span>            : /*! \file
<span class="lineNum">      20 </span>            :  *
<span class="lineNum">      21 </span>            :  * \brief Symbols related to asterisk.conf options and paths.
<span class="lineNum">      22 </span>            :  *
<span class="lineNum">      23 </span>            :  * \author Corey Farrell &lt;git@cfware.com&gt;
<span class="lineNum">      24 </span>            :  */
<span class="lineNum">      25 </span>            : 
<span class="lineNum">      26 </span>            : /*** MODULEINFO
<span class="lineNum">      27 </span>            :         &lt;support_level&gt;core&lt;/support_level&gt;
<span class="lineNum">      28 </span>            :  ***/
<span class="lineNum">      29 </span>            : 
<span class="lineNum">      30 </span>            : #include &quot;asterisk.h&quot;
<span class="lineNum">      31 </span>            : #include &quot;asterisk/_private.h&quot;
<span class="lineNum">      32 </span>            : #include &quot;asterisk/app.h&quot;
<span class="lineNum">      33 </span>            : #include &quot;asterisk/config.h&quot;
<span class="lineNum">      34 </span>            : #include &quot;asterisk/logger.h&quot;
<span class="lineNum">      35 </span>            : #include &quot;asterisk/options.h&quot;
<span class="lineNum">      36 </span>            : #include &quot;asterisk/paths.h&quot;
<span class="lineNum">      37 </span>            : #include &quot;asterisk/pbx.h&quot;
<span class="lineNum">      38 </span>            : #include &quot;asterisk/rtp_engine.h&quot;
<span class="lineNum">      39 </span>            : #include &quot;asterisk/strings.h&quot;
<span class="lineNum">      40 </span>            : #include &quot;asterisk/utils.h&quot;
<span class="lineNum">      41 </span>            : 
<span class="lineNum">      42 </span>            : #include &quot;../defaults.h&quot;
<span class="lineNum">      43 </span>            : 
<span class="lineNum">      44 </span>            : #include &lt;sys/time.h&gt;
<span class="lineNum">      45 </span>            : #include &lt;sys/resource.h&gt;
<span class="lineNum">      46 </span>            : 
<span class="lineNum">      47 </span>            : 
<span class="lineNum">      48 </span>            : /*! Default minimum DTMF digit length - 80ms */
<span class="lineNum">      49 </span>            : #define AST_MIN_DTMF_DURATION 80
<span class="lineNum">      50 </span>            : 
<span class="lineNum">      51 </span>            : #define DEFAULT_MONITOR_DIR DEFAULT_SPOOL_DIR &quot;/monitor&quot;
<span class="lineNum">      52 </span>            : #define DEFAULT_RECORDING_DIR DEFAULT_SPOOL_DIR &quot;/recording&quot;
<span class="lineNum">      53 </span>            : 
<span class="lineNum">      54 </span>            : /*! \defgroup main_options Main Configuration Options
<span class="lineNum">      55 </span>            :  * \brief Main configuration options from asterisk.conf or OS command line on starting Asterisk.
<span class="lineNum">      56 </span>            :  * \arg \ref Config_ast &quot;asterisk.conf&quot;
<span class="lineNum">      57 </span>            :  * \note Some of them can be changed in the CLI
<span class="lineNum">      58 </span>            :  */
<span class="lineNum">      59 </span>            : /*! @{ */
<span class="lineNum">      60 </span>            : 
<span class="lineNum">      61 </span>            : struct ast_flags ast_options = { AST_DEFAULT_OPTIONS };
<span class="lineNum">      62 </span>            : 
<span class="lineNum">      63 </span>            : /*! Maximum active system verbosity level. */
<span class="lineNum">      64 </span>            : int ast_verb_sys_level;
<span class="lineNum">      65 </span>            : 
<span class="lineNum">      66 </span>            : /*! Verbosity level */
<span class="lineNum">      67 </span>            : int option_verbose;
<span class="lineNum">      68 </span>            : /*! Debug level */
<span class="lineNum">      69 </span>            : int option_debug;
<span class="lineNum">      70 </span>            : /*! Default to -1 to know if we have read the level from pjproject yet. */
<span class="lineNum">      71 </span>            : int ast_pjproject_max_log_level = -1;
<span class="lineNum">      72 </span>            : int ast_option_pjproject_log_level;
<span class="lineNum">      73 </span>            : int ast_option_pjproject_cache_pools;
<span class="lineNum">      74 </span>            : /*! Max load avg on system */
<span class="lineNum">      75 </span>            : double ast_option_maxload;
<span class="lineNum">      76 </span>            : /*! Max number of active calls */
<span class="lineNum">      77 </span>            : int ast_option_maxcalls;
<span class="lineNum">      78 </span>            : /*! Max number of open file handles (files, sockets) */
<span class="lineNum">      79 </span>            : int ast_option_maxfiles;
<span class="lineNum">      80 </span>            : /*! Minimum duration of DTMF. */
<span class="lineNum">      81 </span>            : unsigned int option_dtmfminduration = AST_MIN_DTMF_DURATION;
<span class="lineNum">      82 </span>            : #if defined(HAVE_SYSINFO)
<span class="lineNum">      83 </span>            : /*! Minimum amount of free system memory - stop accepting calls if free memory falls below this watermark */
<span class="lineNum">      84 </span>            : long option_minmemfree;
<span class="lineNum">      85 </span>            : #endif
<span class="lineNum">      86 </span>            : int ast_option_rtpusedynamic = 1;
<span class="lineNum">      87 </span>            : unsigned int ast_option_rtpptdynamic = 35;
<span class="lineNum">      88 </span>            : 
<span class="lineNum">      89 </span>            : /*! @} */
<span class="lineNum">      90 </span>            : 
<span class="lineNum">      91 </span>            : struct ast_eid ast_eid_default;
<span class="lineNum">      92 </span>            : 
<span class="lineNum">      93 </span>            : /* XXX tmpdir is a subdir of the spool directory, and no way to remap it */
<span class="lineNum">      94 </span>            : char record_cache_dir[AST_CACHE_DIR_LEN] = DEFAULT_TMP_DIR;
<span class="lineNum">      95 </span>            : 
<span class="lineNum">      96 </span>            : char ast_defaultlanguage[MAX_LANGUAGE] = DEFAULT_LANGUAGE;
<span class="lineNum">      97 </span>            : 
<span class="lineNum">      98 </span>            : struct _cfg_paths {
<span class="lineNum">      99 </span>            :         char config_dir[PATH_MAX];
<span class="lineNum">     100 </span>            :         char module_dir[PATH_MAX];
<span class="lineNum">     101 </span>            :         char spool_dir[PATH_MAX];
<span class="lineNum">     102 </span>            :         char monitor_dir[PATH_MAX];
<span class="lineNum">     103 </span>            :         char recording_dir[PATH_MAX];
<span class="lineNum">     104 </span>            :         char var_dir[PATH_MAX];
<span class="lineNum">     105 </span>            :         char data_dir[PATH_MAX];
<span class="lineNum">     106 </span>            :         char log_dir[PATH_MAX];
<span class="lineNum">     107 </span>            :         char agi_dir[PATH_MAX];
<span class="lineNum">     108 </span>            :         char run_dir[PATH_MAX];
<span class="lineNum">     109 </span>            :         char key_dir[PATH_MAX];
<span class="lineNum">     110 </span>            : 
<span class="lineNum">     111 </span>            :         char config_file[PATH_MAX];
<span class="lineNum">     112 </span>            :         char db_path[PATH_MAX];
<span class="lineNum">     113 </span>            :         char sbin_dir[PATH_MAX];
<span class="lineNum">     114 </span>            :         char pid_path[PATH_MAX];
<span class="lineNum">     115 </span>            :         char socket_path[PATH_MAX];
<span class="lineNum">     116 </span>            :         char run_user[PATH_MAX];
<span class="lineNum">     117 </span>            :         char run_group[PATH_MAX];
<span class="lineNum">     118 </span>            :         char system_name[128];
<span class="lineNum">     119 </span>            :         char ctl_perms[PATH_MAX];
<span class="lineNum">     120 </span>            :         char ctl_owner[PATH_MAX];
<span class="lineNum">     121 </span>            :         char ctl_group[PATH_MAX];
<span class="lineNum">     122 </span>            :         char ctl_file[PATH_MAX];
<span class="lineNum">     123 </span>            : };
<span class="lineNum">     124 </span>            : 
<span class="lineNum">     125 </span>            : static struct _cfg_paths cfg_paths = {
<span class="lineNum">     126 </span>            :         .config_dir = DEFAULT_CONFIG_DIR,
<span class="lineNum">     127 </span>            :         .module_dir = DEFAULT_MODULE_DIR,
<span class="lineNum">     128 </span>            :         .spool_dir = DEFAULT_SPOOL_DIR,
<span class="lineNum">     129 </span>            :         .monitor_dir = DEFAULT_MONITOR_DIR,
<span class="lineNum">     130 </span>            :         .recording_dir = DEFAULT_RECORDING_DIR,
<span class="lineNum">     131 </span>            :         .var_dir = DEFAULT_VAR_DIR,
<span class="lineNum">     132 </span>            :         .data_dir = DEFAULT_DATA_DIR,
<span class="lineNum">     133 </span>            :         .log_dir = DEFAULT_LOG_DIR,
<span class="lineNum">     134 </span>            :         .agi_dir = DEFAULT_AGI_DIR,
<span class="lineNum">     135 </span>            :         .run_dir = DEFAULT_RUN_DIR,
<span class="lineNum">     136 </span>            :         .key_dir = DEFAULT_KEY_DIR,
<span class="lineNum">     137 </span>            : 
<span class="lineNum">     138 </span>            :         .config_file = DEFAULT_CONFIG_FILE,
<span class="lineNum">     139 </span>            :         .db_path = DEFAULT_DB,
<span class="lineNum">     140 </span>            :         .sbin_dir = DEFAULT_SBIN_DIR,
<span class="lineNum">     141 </span>            :         .pid_path = DEFAULT_PID,
<span class="lineNum">     142 </span>            :         .socket_path = DEFAULT_SOCKET,
<span class="lineNum">     143 </span>            :         .ctl_file = &quot;asterisk.ctl&quot;,
<span class="lineNum">     144 </span>            : };
<span class="lineNum">     145 </span>            : 
<span class="lineNum">     146 </span>            : const char *ast_config_AST_CONFIG_DIR   = cfg_paths.config_dir;
<span class="lineNum">     147 </span>            : const char *ast_config_AST_CONFIG_FILE  = cfg_paths.config_file;
<span class="lineNum">     148 </span>            : const char *ast_config_AST_MODULE_DIR   = cfg_paths.module_dir;
<span class="lineNum">     149 </span>            : const char *ast_config_AST_SPOOL_DIR    = cfg_paths.spool_dir;
<span class="lineNum">     150 </span>            : const char *ast_config_AST_MONITOR_DIR  = cfg_paths.monitor_dir;
<span class="lineNum">     151 </span>            : const char *ast_config_AST_RECORDING_DIR        = cfg_paths.recording_dir;
<span class="lineNum">     152 </span>            : const char *ast_config_AST_VAR_DIR      = cfg_paths.var_dir;
<span class="lineNum">     153 </span>            : const char *ast_config_AST_DATA_DIR     = cfg_paths.data_dir;
<span class="lineNum">     154 </span>            : const char *ast_config_AST_LOG_DIR      = cfg_paths.log_dir;
<span class="lineNum">     155 </span>            : const char *ast_config_AST_AGI_DIR      = cfg_paths.agi_dir;
<span class="lineNum">     156 </span>            : const char *ast_config_AST_KEY_DIR      = cfg_paths.key_dir;
<span class="lineNum">     157 </span>            : const char *ast_config_AST_RUN_DIR      = cfg_paths.run_dir;
<span class="lineNum">     158 </span>            : const char *ast_config_AST_SBIN_DIR = cfg_paths.sbin_dir;
<span class="lineNum">     159 </span>            : 
<span class="lineNum">     160 </span>            : const char *ast_config_AST_DB           = cfg_paths.db_path;
<span class="lineNum">     161 </span>            : const char *ast_config_AST_PID          = cfg_paths.pid_path;
<span class="lineNum">     162 </span>            : const char *ast_config_AST_SOCKET       = cfg_paths.socket_path;
<span class="lineNum">     163 </span>            : const char *ast_config_AST_RUN_USER     = cfg_paths.run_user;
<span class="lineNum">     164 </span>            : const char *ast_config_AST_RUN_GROUP    = cfg_paths.run_group;
<span class="lineNum">     165 </span>            : const char *ast_config_AST_SYSTEM_NAME  = cfg_paths.system_name;
<span class="lineNum">     166 </span>            : 
<span class="lineNum">     167 </span>            : const char *ast_config_AST_CTL_PERMISSIONS = cfg_paths.ctl_perms;
<span class="lineNum">     168 </span>            : const char *ast_config_AST_CTL_OWNER = cfg_paths.ctl_owner;
<span class="lineNum">     169 </span>            : const char *ast_config_AST_CTL_GROUP = cfg_paths.ctl_group;
<span class="lineNum">     170 </span>            : const char *ast_config_AST_CTL = cfg_paths.ctl_file;
<a name="171"><span class="lineNum">     171 </span>            : </a>
<span class="lineNum">     172 </span>            : /*! \brief Set maximum open files */
<span class="lineNum">     173 </span><span class="lineNoCov">          0 : static void set_ulimit(int value)</span>
<span class="lineNum">     174 </span>            : {
<span class="lineNum">     175 </span><span class="lineNoCov">          0 :         struct rlimit l = {0, 0};</span>
<span class="lineNum">     176 </span>            : 
<span class="lineNum">     177 </span><span class="lineNoCov">          0 :         if (value &lt;= 0) {</span>
<span class="lineNum">     178 </span><span class="lineNoCov">          0 :                 ast_log(LOG_WARNING, &quot;Unable to change max files open to invalid value %i\n&quot;,value);</span>
<span class="lineNum">     179 </span><span class="lineNoCov">          0 :                 return;</span>
<span class="lineNum">     180 </span>            :         }
<span class="lineNum">     181 </span>            : 
<span class="lineNum">     182 </span><span class="lineNoCov">          0 :         l.rlim_cur = value;</span>
<span class="lineNum">     183 </span><span class="lineNoCov">          0 :         l.rlim_max = value;</span>
<span class="lineNum">     184 </span>            : 
<span class="lineNum">     185 </span><span class="lineNoCov">          0 :         if (setrlimit(RLIMIT_NOFILE, &amp;l)) {</span>
<span class="lineNum">     186 </span><span class="lineNoCov">          0 :                 ast_log(LOG_WARNING, &quot;Unable to disable core size resource limit: %s\n&quot;,strerror(errno));</span>
<span class="lineNum">     187 </span><span class="lineNoCov">          0 :                 return;</span>
<span class="lineNum">     188 </span>            :         }
<span class="lineNum">     189 </span>            : 
<span class="lineNum">     190 </span><span class="lineNoCov">          0 :         ast_log(LOG_NOTICE, &quot;Setting max files open to %d\n&quot;,value);</span>
<span class="lineNum">     191 </span>            : 
<span class="lineNum">     192 </span><span class="lineNoCov">          0 :         return;</span>
<a name="193"><span class="lineNum">     193 </span>            : }</a>
<span class="lineNum">     194 </span>            : 
<span class="lineNum">     195 </span><span class="lineCov">       4579 : void set_asterisk_conf_path(const char *path)</span>
<span class="lineNum">     196 </span>            : {
<span class="lineNum">     197 </span><span class="lineCov">       4579 :         ast_copy_string(cfg_paths.config_file, path, sizeof(cfg_paths.config_file));</span>
<a name="198"><span class="lineNum">     198 </span><span class="lineCov">       4579 : }</span></a>
<span class="lineNum">     199 </span>            : 
<span class="lineNum">     200 </span><span class="lineNoCov">          0 : void set_socket_path(const char *path)</span>
<span class="lineNum">     201 </span>            : {
<span class="lineNum">     202 </span><span class="lineNoCov">          0 :         ast_copy_string(cfg_paths.socket_path, path, sizeof(cfg_paths.socket_path));</span>
<a name="203"><span class="lineNum">     203 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     204 </span>            : 
<span class="lineNum">     205 </span><span class="lineCov">       4579 : void load_asterisk_conf(void)</span>
<span class="lineNum">     206 </span>            : {
<span class="lineNum">     207 </span>            :         struct ast_config *cfg;
<span class="lineNum">     208 </span>            :         struct ast_variable *v;
<span class="lineNum">     209 </span><span class="lineCov">       4579 :         char hostname[MAXHOSTNAMELEN] = &quot;&quot;;</span>
<span class="lineNum">     210 </span><span class="lineCov">       4579 :         struct ast_flags config_flags = { CONFIG_FLAG_NOREALTIME };</span>
<span class="lineNum">     211 </span>            :         struct {
<span class="lineNum">     212 </span>            :                 unsigned int dbdir:1;
<span class="lineNum">     213 </span>            :                 unsigned int keydir:1;
<span class="lineNum">     214 </span><span class="lineCov">       4579 :         } found = { 0, 0 };</span>
<span class="lineNum">     215 </span>            :         /* Default to false for security */
<span class="lineNum">     216 </span><span class="lineCov">       4579 :         int live_dangerously = 0;</span>
<span class="lineNum">     217 </span><span class="lineCov">       4579 :         int option_debug_new = 0;</span>
<span class="lineNum">     218 </span><span class="lineCov">       4579 :         int option_verbose_new = 0;</span>
<span class="lineNum">     219 </span>            : 
<span class="lineNum">     220 </span>            :         /* init with buildtime config */
<span class="lineNum">     221 </span>            : #ifdef REF_DEBUG
<span class="lineNum">     222 </span>            :         /* The REF_DEBUG compiler flag is now only used to enable refdebug by default.
<span class="lineNum">     223 </span>            :          * Support for debugging reference counts is always compiled in. */
<span class="lineNum">     224 </span>            :         ast_set2_flag(&amp;ast_options, 1, AST_OPT_FLAG_REF_DEBUG);
<span class="lineNum">     225 </span>            : #endif
<span class="lineNum">     226 </span>            : 
<span class="lineNum">     227 </span><span class="lineCov">       4579 :         ast_set_default_eid(&amp;ast_eid_default);</span>
<span class="lineNum">     228 </span>            : 
<span class="lineNum">     229 </span><span class="lineCov">       4579 :         cfg = ast_config_load2(ast_config_AST_CONFIG_FILE, &quot;&quot; /* core, can't reload */, config_flags);</span>
<span class="lineNum">     230 </span>            : 
<span class="lineNum">     231 </span>            :         /* If AST_OPT_FLAG_EXEC_INCLUDES was previously enabled with -X turn it off now.
<span class="lineNum">     232 </span>            :          * Using #exec from other configs requires that it be enabled from asterisk.conf. */
<span class="lineNum">     233 </span><span class="lineCov">       4579 :         ast_clear_flag(&amp;ast_options, AST_OPT_FLAG_EXEC_INCLUDES);</span>
<span class="lineNum">     234 </span>            : 
<span class="lineNum">     235 </span>            :         /* no asterisk.conf? no problem, use buildtime config! */
<span class="lineNum">     236 </span><span class="lineCov">       4579 :         if (cfg == CONFIG_STATUS_FILEMISSING || cfg == CONFIG_STATUS_FILEUNCHANGED || cfg == CONFIG_STATUS_FILEINVALID) {</span>
<span class="lineNum">     237 </span><span class="lineNoCov">          0 :                 fprintf(stderr, &quot;Unable to open specified master config file '%s', using built-in defaults\n&quot;, ast_config_AST_CONFIG_FILE);</span>
<span class="lineNum">     238 </span><span class="lineNoCov">          0 :                 return;</span>
<span class="lineNum">     239 </span>            :         }
<span class="lineNum">     240 </span>            : 
<span class="lineNum">     241 </span><span class="lineCov">       4579 :         for (v = ast_variable_browse(cfg, &quot;files&quot;); v; v = v-&gt;next) {</span>
<span class="lineNum">     242 </span><span class="lineNoCov">          0 :                 if (!strcasecmp(v-&gt;name, &quot;astctlpermissions&quot;)) {</span>
<span class="lineNum">     243 </span><span class="lineNoCov">          0 :                         ast_copy_string(cfg_paths.ctl_perms, v-&gt;value, sizeof(cfg_paths.ctl_perms));</span>
<span class="lineNum">     244 </span><span class="lineNoCov">          0 :                 } else if (!strcasecmp(v-&gt;name, &quot;astctlowner&quot;)) {</span>
<span class="lineNum">     245 </span><span class="lineNoCov">          0 :                         ast_copy_string(cfg_paths.ctl_owner, v-&gt;value, sizeof(cfg_paths.ctl_owner));</span>
<span class="lineNum">     246 </span><span class="lineNoCov">          0 :                 } else if (!strcasecmp(v-&gt;name, &quot;astctlgroup&quot;)) {</span>
<span class="lineNum">     247 </span><span class="lineNoCov">          0 :                         ast_copy_string(cfg_paths.ctl_group, v-&gt;value, sizeof(cfg_paths.ctl_group));</span>
<span class="lineNum">     248 </span><span class="lineNoCov">          0 :                 } else if (!strcasecmp(v-&gt;name, &quot;astctl&quot;)) {</span>
<span class="lineNum">     249 </span><span class="lineNoCov">          0 :                         ast_copy_string(cfg_paths.ctl_file, v-&gt;value, sizeof(cfg_paths.ctl_file));</span>
<span class="lineNum">     250 </span>            :                 }
<span class="lineNum">     251 </span>            :         }
<span class="lineNum">     252 </span>            : 
<span class="lineNum">     253 </span><span class="lineCov">      54882 :         for (v = ast_variable_browse(cfg, &quot;directories&quot;); v; v = v-&gt;next) {</span>
<span class="lineNum">     254 </span><span class="lineCov">      50303 :                 if (!strcasecmp(v-&gt;name, &quot;astetcdir&quot;)) {</span>
<span class="lineNum">     255 </span><span class="lineCov">       4573 :                         ast_copy_string(cfg_paths.config_dir, v-&gt;value, sizeof(cfg_paths.config_dir));</span>
<span class="lineNum">     256 </span><span class="lineCov">      45730 :                 } else if (!strcasecmp(v-&gt;name, &quot;astspooldir&quot;)) {</span>
<span class="lineNum">     257 </span><span class="lineCov">       4573 :                         ast_copy_string(cfg_paths.spool_dir, v-&gt;value, sizeof(cfg_paths.spool_dir));</span>
<span class="lineNum">     258 </span><span class="lineCov">       4573 :                         snprintf(cfg_paths.monitor_dir, sizeof(cfg_paths.monitor_dir), &quot;%s/monitor&quot;, v-&gt;value);</span>
<span class="lineNum">     259 </span><span class="lineCov">       4573 :                         snprintf(cfg_paths.recording_dir, sizeof(cfg_paths.recording_dir), &quot;%s/recording&quot;, v-&gt;value);</span>
<span class="lineNum">     260 </span><span class="lineCov">      41157 :                 } else if (!strcasecmp(v-&gt;name, &quot;astvarlibdir&quot;)) {</span>
<span class="lineNum">     261 </span><span class="lineCov">       4573 :                         ast_copy_string(cfg_paths.var_dir, v-&gt;value, sizeof(cfg_paths.var_dir));</span>
<span class="lineNum">     262 </span><span class="lineCov">       4573 :                         if (!found.dbdir) {</span>
<span class="lineNum">     263 </span><span class="lineCov">       4573 :                                 snprintf(cfg_paths.db_path, sizeof(cfg_paths.db_path), &quot;%s/astdb&quot;, v-&gt;value);</span>
<span class="lineNum">     264 </span>            :                         }
<span class="lineNum">     265 </span><span class="lineCov">      36584 :                 } else if (!strcasecmp(v-&gt;name, &quot;astdbdir&quot;)) {</span>
<span class="lineNum">     266 </span><span class="lineCov">       4573 :                         snprintf(cfg_paths.db_path, sizeof(cfg_paths.db_path), &quot;%s/astdb&quot;, v-&gt;value);</span>
<span class="lineNum">     267 </span><span class="lineCov">       4573 :                         found.dbdir = 1;</span>
<span class="lineNum">     268 </span><span class="lineCov">      32011 :                 } else if (!strcasecmp(v-&gt;name, &quot;astdatadir&quot;)) {</span>
<span class="lineNum">     269 </span><span class="lineCov">       4573 :                         ast_copy_string(cfg_paths.data_dir, v-&gt;value, sizeof(cfg_paths.data_dir));</span>
<span class="lineNum">     270 </span><span class="lineCov">       4573 :                         if (!found.keydir) {</span>
<span class="lineNum">     271 </span><span class="lineNoCov">          0 :                                 snprintf(cfg_paths.key_dir, sizeof(cfg_paths.key_dir), &quot;%s/keys&quot;, v-&gt;value);</span>
<span class="lineNum">     272 </span>            :                         }
<span class="lineNum">     273 </span><span class="lineCov">      27438 :                 } else if (!strcasecmp(v-&gt;name, &quot;astkeydir&quot;)) {</span>
<span class="lineNum">     274 </span><span class="lineCov">       4573 :                         snprintf(cfg_paths.key_dir, sizeof(cfg_paths.key_dir), &quot;%s/keys&quot;, v-&gt;value);</span>
<span class="lineNum">     275 </span><span class="lineCov">       4573 :                         found.keydir = 1;</span>
<span class="lineNum">     276 </span><span class="lineCov">      22865 :                 } else if (!strcasecmp(v-&gt;name, &quot;astlogdir&quot;)) {</span>
<span class="lineNum">     277 </span><span class="lineCov">       4573 :                         ast_copy_string(cfg_paths.log_dir, v-&gt;value, sizeof(cfg_paths.log_dir));</span>
<span class="lineNum">     278 </span><span class="lineCov">      18292 :                 } else if (!strcasecmp(v-&gt;name, &quot;astagidir&quot;)) {</span>
<span class="lineNum">     279 </span><span class="lineCov">       4573 :                         ast_copy_string(cfg_paths.agi_dir, v-&gt;value, sizeof(cfg_paths.agi_dir));</span>
<span class="lineNum">     280 </span><span class="lineCov">      13719 :                 } else if (!strcasecmp(v-&gt;name, &quot;astrundir&quot;)) {</span>
<span class="lineNum">     281 </span><span class="lineCov">       4573 :                         snprintf(cfg_paths.pid_path, sizeof(cfg_paths.pid_path), &quot;%s/%s&quot;, v-&gt;value, &quot;asterisk.pid&quot;);</span>
<span class="lineNum">     282 </span><span class="lineCov">       4573 :                         ast_copy_string(cfg_paths.run_dir, v-&gt;value, sizeof(cfg_paths.run_dir));</span>
<span class="lineNum">     283 </span><span class="lineCov">       9146 :                 } else if (!strcasecmp(v-&gt;name, &quot;astmoddir&quot;)) {</span>
<span class="lineNum">     284 </span><span class="lineCov">       4573 :                         ast_copy_string(cfg_paths.module_dir, v-&gt;value, sizeof(cfg_paths.module_dir));</span>
<span class="lineNum">     285 </span><span class="lineCov">       4573 :                 } else if (!strcasecmp(v-&gt;name, &quot;astsbindir&quot;)) {</span>
<span class="lineNum">     286 </span><span class="lineCov">       4573 :                         ast_copy_string(cfg_paths.sbin_dir, v-&gt;value, sizeof(cfg_paths.sbin_dir));</span>
<span class="lineNum">     287 </span>            :                 }
<span class="lineNum">     288 </span>            :         }
<span class="lineNum">     289 </span>            : 
<span class="lineNum">     290 </span>            :         /* Combine astrundir and astctl settings. */
<span class="lineNum">     291 </span><span class="lineCov">       4579 :         snprintf(cfg_paths.socket_path, sizeof(cfg_paths.socket_path), &quot;%s/%s&quot;,</span>
<span class="lineNum">     292 </span>            :                 ast_config_AST_RUN_DIR, ast_config_AST_CTL);
<span class="lineNum">     293 </span>            : 
<span class="lineNum">     294 </span><span class="lineCov">      32032 :         for (v = ast_variable_browse(cfg, &quot;options&quot;); v; v = v-&gt;next) {</span>
<span class="lineNum">     295 </span>            :                 /* verbose level (-v at startup) */
<span class="lineNum">     296 </span><span class="lineCov">      27453 :                 if (!strcasecmp(v-&gt;name, &quot;verbose&quot;)) {</span>
<span class="lineNum">     297 </span><span class="lineCov">       4573 :                         option_verbose_new = atoi(v-&gt;value);</span>
<span class="lineNum">     298 </span>            :                 /* whether or not to force timestamping in CLI verbose output. (-T at startup) */
<span class="lineNum">     299 </span><span class="lineCov">      22880 :                 } else if (!strcasecmp(v-&gt;name, &quot;timestamp&quot;)) {</span>
<span class="lineNum">     300 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_TIMESTAMP);</span>
<span class="lineNum">     301 </span>            :                 /* whether or not to support #exec in config files */
<span class="lineNum">     302 </span><span class="lineCov">      22880 :                 } else if (!strcasecmp(v-&gt;name, &quot;execincludes&quot;)) {</span>
<span class="lineNum">     303 </span><span class="lineCov">       4573 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_EXEC_INCLUDES);</span>
<span class="lineNum">     304 </span>            :                 /* debug level (-d at startup) */
<span class="lineNum">     305 </span><span class="lineCov">      18307 :                 } else if (!strcasecmp(v-&gt;name, &quot;debug&quot;)) {</span>
<span class="lineNum">     306 </span><span class="lineCov">       4573 :                         option_debug_new = 0;</span>
<span class="lineNum">     307 </span><span class="lineCov">       4573 :                         if (sscanf(v-&gt;value, &quot;%30d&quot;, &amp;option_debug_new) != 1) {</span>
<span class="lineNum">     308 </span><span class="lineNoCov">          0 :                                 option_debug_new = ast_true(v-&gt;value) ? 1 : 0;</span>
<span class="lineNum">     309 </span>            :                         }
<span class="lineNum">     310 </span><span class="lineCov">      13734 :                 } else if (!strcasecmp(v-&gt;name, &quot;refdebug&quot;)) {</span>
<span class="lineNum">     311 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_REF_DEBUG);</span>
<span class="lineNum">     312 </span>            : #if HAVE_WORKING_FORK
<span class="lineNum">     313 </span>            :                 /* Disable forking (-f at startup) */
<span class="lineNum">     314 </span><span class="lineCov">      13734 :                 } else if (!strcasecmp(v-&gt;name, &quot;nofork&quot;)) {</span>
<span class="lineNum">     315 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_NO_FORK);</span>
<span class="lineNum">     316 </span>            :                 /* Always fork, even if verbose or debug are enabled (-F at startup) */
<span class="lineNum">     317 </span><span class="lineCov">      13734 :                 } else if (!strcasecmp(v-&gt;name, &quot;alwaysfork&quot;)) {</span>
<span class="lineNum">     318 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_ALWAYS_FORK);</span>
<span class="lineNum">     319 </span>            : #endif
<span class="lineNum">     320 </span>            :                 /* Run quietly (-q at startup ) */
<span class="lineNum">     321 </span><span class="lineCov">      13734 :                 } else if (!strcasecmp(v-&gt;name, &quot;quiet&quot;)) {</span>
<span class="lineNum">     322 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_QUIET);</span>
<span class="lineNum">     323 </span>            :                 /* Run as console (-c at startup, implies nofork) */
<span class="lineNum">     324 </span><span class="lineCov">      13734 :                 } else if (!strcasecmp(v-&gt;name, &quot;console&quot;)) {</span>
<span class="lineNum">     325 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_NO_FORK | AST_OPT_FLAG_CONSOLE);</span>
<span class="lineNum">     326 </span>            :                 /* Run with high priority if the O/S permits (-p at startup) */
<span class="lineNum">     327 </span><span class="lineCov">      13734 :                 } else if (!strcasecmp(v-&gt;name, &quot;highpriority&quot;)) {</span>
<span class="lineNum">     328 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_HIGH_PRIORITY);</span>
<span class="lineNum">     329 </span>            :                 /* Initialize RSA auth keys (IAX2) (-i at startup) */
<span class="lineNum">     330 </span><span class="lineCov">      13734 :                 } else if (!strcasecmp(v-&gt;name, &quot;initcrypto&quot;)) {</span>
<span class="lineNum">     331 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_INIT_KEYS);</span>
<span class="lineNum">     332 </span>            :                 /* Disable ANSI colors for console (-c at startup) */
<span class="lineNum">     333 </span><span class="lineCov">      13734 :                 } else if (!strcasecmp(v-&gt;name, &quot;nocolor&quot;)) {</span>
<span class="lineNum">     334 </span><span class="lineCov">       4573 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_NO_COLOR);</span>
<span class="lineNum">     335 </span>            :                 /* Disable some usage warnings for picky people :p */
<span class="lineNum">     336 </span><span class="lineCov">       9161 :                 } else if (!strcasecmp(v-&gt;name, &quot;dontwarn&quot;)) {</span>
<span class="lineNum">     337 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_DONT_WARN);</span>
<span class="lineNum">     338 </span>            :                 /* Dump core in case of crash (-g) */
<span class="lineNum">     339 </span><span class="lineCov">       9161 :                 } else if (!strcasecmp(v-&gt;name, &quot;dumpcore&quot;)) {</span>
<span class="lineNum">     340 </span><span class="lineCov">       4573 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_DUMP_CORE);</span>
<span class="lineNum">     341 </span>            :                 /* Cache recorded sound files to another directory during recording */
<span class="lineNum">     342 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;cache_record_files&quot;)) {</span>
<span class="lineNum">     343 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_CACHE_RECORD_FILES);</span>
<span class="lineNum">     344 </span>            : #if !defined(LOW_MEMORY)
<span class="lineNum">     345 </span>            :                 /* Cache media frames for performance */
<span class="lineNum">     346 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;cache_media_frames&quot;)) {</span>
<span class="lineNum">     347 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_CACHE_MEDIA_FRAMES);</span>
<span class="lineNum">     348 </span>            : #endif
<span class="lineNum">     349 </span>            :                 /* Specify cache directory */
<span class="lineNum">     350 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;record_cache_dir&quot;)) {</span>
<span class="lineNum">     351 </span><span class="lineNoCov">          0 :                         ast_copy_string(record_cache_dir, v-&gt;value, AST_CACHE_DIR_LEN);</span>
<span class="lineNum">     352 </span>            :                 /* Build transcode paths via SLINEAR, instead of directly */
<span class="lineNum">     353 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;transcode_via_sln&quot;)) {</span>
<span class="lineNum">     354 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_TRANSCODE_VIA_SLIN);</span>
<span class="lineNum">     355 </span>            :                 /* Transmit SLINEAR silence while a channel is being recorded or DTMF is being generated on a channel */
<span class="lineNum">     356 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;transmit_silence_during_record&quot;) || !strcasecmp(v-&gt;name, &quot;transmit_silence&quot;)) {</span>
<span class="lineNum">     357 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_TRANSMIT_SILENCE);</span>
<span class="lineNum">     358 </span>            :                 /* Enable internal timing */
<span class="lineNum">     359 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;internal_timing&quot;)) {</span>
<span class="lineNum">     360 </span><span class="lineNoCov">          0 :                         if (!ast_opt_remote) {</span>
<span class="lineNum">     361 </span><span class="lineNoCov">          0 :                                 fprintf(stderr,</span>
<span class="lineNum">     362 </span>            :                                         &quot;NOTICE: The internal_timing option is no longer needed.\n&quot;
<span class="lineNum">     363 </span>            :                                         &quot;  It will always be enabled if you have a timing module loaded.\n&quot;);
<span class="lineNum">     364 </span>            :                         }
<span class="lineNum">     365 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;mindtmfduration&quot;)) {</span>
<span class="lineNum">     366 </span><span class="lineNoCov">          0 :                         if (sscanf(v-&gt;value, &quot;%30u&quot;, &amp;option_dtmfminduration) != 1) {</span>
<span class="lineNum">     367 </span><span class="lineNoCov">          0 :                                 option_dtmfminduration = AST_MIN_DTMF_DURATION;</span>
<span class="lineNum">     368 </span>            :                         }
<span class="lineNum">     369 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;rtp_use_dynamic&quot;)) {</span>
<span class="lineNum">     370 </span><span class="lineNoCov">          0 :                         ast_option_rtpusedynamic = ast_true(v-&gt;value);</span>
<span class="lineNum">     371 </span>            :                 /* http://www.iana.org/assignments/rtp-parameters
<span class="lineNum">     372 </span>            :                  * RTP dynamic payload types start at 96 normally; extend down to 0 */
<span class="lineNum">     373 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;rtp_pt_dynamic&quot;)) {</span>
<span class="lineNum">     374 </span><span class="lineNoCov">          0 :                         ast_parse_arg(v-&gt;value, PARSE_UINT32|PARSE_IN_RANGE,</span>
<span class="lineNum">     375 </span>            :                                       &amp;ast_option_rtpptdynamic, 0, AST_RTP_PT_FIRST_DYNAMIC);
<span class="lineNum">     376 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;maxcalls&quot;)) {</span>
<span class="lineNum">     377 </span><span class="lineNoCov">          0 :                         if ((sscanf(v-&gt;value, &quot;%30d&quot;, &amp;ast_option_maxcalls) != 1) || (ast_option_maxcalls &lt; 0)) {</span>
<span class="lineNum">     378 </span><span class="lineNoCov">          0 :                                 ast_option_maxcalls = 0;</span>
<span class="lineNum">     379 </span>            :                         }
<span class="lineNum">     380 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;maxload&quot;)) {</span>
<span class="lineNum">     381 </span>            :                         double test[1];
<span class="lineNum">     382 </span>            : 
<span class="lineNum">     383 </span><span class="lineNoCov">          0 :                         if (getloadavg(test, 1) == -1) {</span>
<span class="lineNum">     384 </span><span class="lineNoCov">          0 :                                 ast_log(LOG_ERROR, &quot;Cannot obtain load average on this system. 'maxload' option disabled.\n&quot;);</span>
<span class="lineNum">     385 </span><span class="lineNoCov">          0 :                                 ast_option_maxload = 0.0;</span>
<span class="lineNum">     386 </span><span class="lineNoCov">          0 :                         } else if ((sscanf(v-&gt;value, &quot;%30lf&quot;, &amp;ast_option_maxload) != 1) || (ast_option_maxload &lt; 0.0)) {</span>
<span class="lineNum">     387 </span><span class="lineNoCov">          0 :                                 ast_option_maxload = 0.0;</span>
<span class="lineNum">     388 </span>            :                         }
<span class="lineNum">     389 </span>            :                 /* Set the maximum amount of open files */
<span class="lineNum">     390 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;maxfiles&quot;)) {</span>
<span class="lineNum">     391 </span><span class="lineNoCov">          0 :                         ast_option_maxfiles = atoi(v-&gt;value);</span>
<span class="lineNum">     392 </span><span class="lineNoCov">          0 :                         if (!ast_opt_remote) {</span>
<span class="lineNum">     393 </span><span class="lineNoCov">          0 :                                 set_ulimit(ast_option_maxfiles);</span>
<span class="lineNum">     394 </span>            :                         }
<span class="lineNum">     395 </span>            :                 /* What user to run as */
<span class="lineNum">     396 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;runuser&quot;)) {</span>
<span class="lineNum">     397 </span><span class="lineNoCov">          0 :                         ast_copy_string(cfg_paths.run_user, v-&gt;value, sizeof(cfg_paths.run_user));</span>
<span class="lineNum">     398 </span>            :                 /* What group to run as */
<span class="lineNum">     399 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;rungroup&quot;)) {</span>
<span class="lineNum">     400 </span><span class="lineNoCov">          0 :                         ast_copy_string(cfg_paths.run_group, v-&gt;value, sizeof(cfg_paths.run_group));</span>
<span class="lineNum">     401 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;systemname&quot;)) {</span>
<span class="lineNum">     402 </span><span class="lineNoCov">          0 :                         ast_copy_string(cfg_paths.system_name, v-&gt;value, sizeof(cfg_paths.system_name));</span>
<span class="lineNum">     403 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;autosystemname&quot;)) {</span>
<span class="lineNum">     404 </span><span class="lineNoCov">          0 :                         if (ast_true(v-&gt;value)) {</span>
<span class="lineNum">     405 </span><span class="lineNoCov">          0 :                                 if (!gethostname(hostname, sizeof(hostname) - 1)) {</span>
<span class="lineNum">     406 </span><span class="lineNoCov">          0 :                                         ast_copy_string(cfg_paths.system_name, hostname, sizeof(cfg_paths.system_name));</span>
<span class="lineNum">     407 </span>            :                                 } else {
<span class="lineNum">     408 </span><span class="lineNoCov">          0 :                                         if (ast_strlen_zero(ast_config_AST_SYSTEM_NAME)){</span>
<span class="lineNum">     409 </span><span class="lineNoCov">          0 :                                                 ast_copy_string(cfg_paths.system_name, &quot;localhost&quot;, sizeof(cfg_paths.system_name));</span>
<span class="lineNum">     410 </span>            :                                         }
<span class="lineNum">     411 </span><span class="lineNoCov">          0 :                                         ast_log(LOG_ERROR, &quot;Cannot obtain hostname for this system.  Using '%s' instead.\n&quot;, ast_config_AST_SYSTEM_NAME);</span>
<span class="lineNum">     412 </span>            :                                 }
<span class="lineNum">     413 </span>            :                         }
<span class="lineNum">     414 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;languageprefix&quot;)) {</span>
<span class="lineNum">     415 </span><span class="lineNoCov">          0 :                         ast_language_is_prefix = ast_true(v-&gt;value);</span>
<span class="lineNum">     416 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;defaultlanguage&quot;)) {</span>
<span class="lineNum">     417 </span><span class="lineNoCov">          0 :                         ast_copy_string(ast_defaultlanguage, v-&gt;value, MAX_LANGUAGE);</span>
<span class="lineNum">     418 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;lockmode&quot;)) {</span>
<span class="lineNum">     419 </span><span class="lineNoCov">          0 :                         if (!strcasecmp(v-&gt;value, &quot;lockfile&quot;)) {</span>
<span class="lineNum">     420 </span><span class="lineNoCov">          0 :                                 ast_set_lock_type(AST_LOCK_TYPE_LOCKFILE);</span>
<span class="lineNum">     421 </span><span class="lineNoCov">          0 :                         } else if (!strcasecmp(v-&gt;value, &quot;flock&quot;)) {</span>
<span class="lineNum">     422 </span><span class="lineNoCov">          0 :                                 ast_set_lock_type(AST_LOCK_TYPE_FLOCK);</span>
<span class="lineNum">     423 </span>            :                         } else {
<span class="lineNum">     424 </span><span class="lineNoCov">          0 :                                 ast_log(LOG_WARNING, &quot;'%s' is not a valid setting for the lockmode option, &quot;</span>
<span class="lineNum">     425 </span>            :                                         &quot;defaulting to 'lockfile'\n&quot;, v-&gt;value);
<span class="lineNum">     426 </span><span class="lineNoCov">          0 :                                 ast_set_lock_type(AST_LOCK_TYPE_LOCKFILE);</span>
<span class="lineNum">     427 </span>            :                         }
<span class="lineNum">     428 </span>            : #if defined(HAVE_SYSINFO)
<span class="lineNum">     429 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;minmemfree&quot;)) {</span>
<span class="lineNum">     430 </span>            :                         /* specify the minimum amount of free memory to retain.  Asterisk should stop accepting new calls
<span class="lineNum">     431 </span>            :                          * if the amount of free memory falls below this watermark */
<span class="lineNum">     432 </span><span class="lineNoCov">          0 :                         if ((sscanf(v-&gt;value, &quot;%30ld&quot;, &amp;option_minmemfree) != 1) || (option_minmemfree &lt; 0)) {</span>
<span class="lineNum">     433 </span><span class="lineNoCov">          0 :                                 option_minmemfree = 0;</span>
<span class="lineNum">     434 </span>            :                         }
<span class="lineNum">     435 </span>            : #endif
<span class="lineNum">     436 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;entityid&quot;)) {</span>
<span class="lineNum">     437 </span>            :                         struct ast_eid tmp_eid;
<span class="lineNum">     438 </span><span class="lineNoCov">          0 :                         if (!ast_str_to_eid(&amp;tmp_eid, v-&gt;value)) {</span>
<span class="lineNum">     439 </span><span class="lineNoCov">          0 :                                 ast_eid_default = tmp_eid;</span>
<span class="lineNum">     440 </span>            :                         } else {
<span class="lineNum">     441 </span><span class="lineNoCov">          0 :                                 ast_log(LOG_WARNING, &quot;Invalid Entity ID '%s' provided\n&quot;, v-&gt;value);</span>
<span class="lineNum">     442 </span>            :                         }
<span class="lineNum">     443 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;lightbackground&quot;)) {</span>
<span class="lineNum">     444 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_LIGHT_BACKGROUND);</span>
<span class="lineNum">     445 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;forceblackbackground&quot;)) {</span>
<span class="lineNum">     446 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_FORCE_BLACK_BACKGROUND);</span>
<span class="lineNum">     447 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;hideconnect&quot;)) {</span>
<span class="lineNum">     448 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value), AST_OPT_FLAG_HIDE_CONSOLE_CONNECT);</span>
<span class="lineNum">     449 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;lockconfdir&quot;)) {</span>
<span class="lineNum">     450 </span><span class="lineNoCov">          0 :                         ast_set2_flag(&amp;ast_options, ast_true(v-&gt;value),  AST_OPT_FLAG_LOCK_CONFIG_DIR);</span>
<span class="lineNum">     451 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;stdexten&quot;)) {</span>
<span class="lineNum">     452 </span>            :                         /* Choose how to invoke the extensions.conf stdexten */
<span class="lineNum">     453 </span><span class="lineNoCov">          0 :                         if (!strcasecmp(v-&gt;value, &quot;gosub&quot;)) {</span>
<span class="lineNum">     454 </span><span class="lineNoCov">          0 :                                 ast_clear_flag(&amp;ast_options, AST_OPT_FLAG_STDEXTEN_MACRO);</span>
<span class="lineNum">     455 </span><span class="lineNoCov">          0 :                         } else if (!strcasecmp(v-&gt;value, &quot;macro&quot;)) {</span>
<span class="lineNum">     456 </span><span class="lineNoCov">          0 :                                 ast_set_flag(&amp;ast_options, AST_OPT_FLAG_STDEXTEN_MACRO);</span>
<span class="lineNum">     457 </span>            :                         } else {
<span class="lineNum">     458 </span><span class="lineNoCov">          0 :                                 ast_log(LOG_WARNING,</span>
<span class="lineNum">     459 </span>            :                                         &quot;'%s' is not a valid setting for the stdexten option, defaulting to 'gosub'\n&quot;,
<span class="lineNum">     460 </span>            :                                         v-&gt;value);
<span class="lineNum">     461 </span><span class="lineNoCov">          0 :                                 ast_clear_flag(&amp;ast_options, AST_OPT_FLAG_STDEXTEN_MACRO);</span>
<span class="lineNum">     462 </span>            :                         }
<span class="lineNum">     463 </span><span class="lineCov">       4588 :                 } else if (!strcasecmp(v-&gt;name, &quot;live_dangerously&quot;)) {</span>
<span class="lineNum">     464 </span><span class="lineCov">          9 :                         live_dangerously = ast_true(v-&gt;value);</span>
<span class="lineNum">     465 </span>            :                 }
<span class="lineNum">     466 </span>            :         }
<span class="lineNum">     467 </span><span class="lineCov">       4579 :         if (!ast_opt_remote) {</span>
<span class="lineNum">     468 </span><span class="lineCov">       1124 :                 pbx_live_dangerously(live_dangerously);</span>
<span class="lineNum">     469 </span>            :         }
<span class="lineNum">     470 </span>            : 
<span class="lineNum">     471 </span><span class="lineCov">       4579 :         option_debug += option_debug_new;</span>
<span class="lineNum">     472 </span><span class="lineCov">       4579 :         option_verbose += option_verbose_new;</span>
<span class="lineNum">     473 </span>            : 
<span class="lineNum">     474 </span><span class="lineCov">       4579 :         ast_config_destroy(cfg);</span>
<span class="lineNum">     475 </span>            : }
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.13</a></td></tr>
  </table>
  <br>

</body>
</html>
